function loadJS(e,o,t){var i=!!window.ActiveXObject,n=i&&!window.XMLHttpRequest,a=document.createElement("script"),r=n?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,o&&o())}:a.onload=function(){o&&o()},a.src=e,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var e=$(window),o={top:e.scrollTop(),left:e.scrollLeft()};o.right=o.left+e.width(),o.bottom=o.top+e.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var e=window,o=(e.document,navigator.userAgent.toLowerCase()),t=e.navigator.appVersion.match(/android/gi);e.navigator.appVersion.match(/iphone/gi);"micromessenger"==o.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos()},updateImageWidth:function(){function e(){var e=$(this),o=t.outerWidth(),i=this.naturalWidth;i>=o?e.addClass("full-img"):e.removeClass("full-img")}function o(){i.each(e)}var t=$(".post-content"),i=$(".single-post-inner img").on("load",e);o()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["iconfont","fontawesome"],urls:["https://img.halfrost.com/iconfonts/iconfont.css",General.absUrl+"/assets/css/font-awesome.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["iconfont","fontawesome"]}})})},scrollToPos:function(e){var o="我要飞到最高",t=(e||$(window).height(),$('<a href="#" id="to-top" title="'+o+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(e){var o,t,i={twitter:"iconfont-twitter icon-iconfonttwitter",qzone:"iconfont-qzone icon-qzone",weibo:"iconfont-weibo icon-iconfontweibo",facebook:"iconfont-facebook icon-iconfontfacebook",github:"iconfont-github icon-github",douban:"iconfont-douban icon-iconfontdouban",google:"iconfont-google icon-iconfontgoogle",luolei:"iconfont-luolei icon-luolei",dribble:"iconfont-dribble icon-dribbblecircled",v2ex:"iconfont-v2ex icon-iconfontv2ex",zhihu:"iconfont-zhihu icon-iconfontzhihu",wikipedia:"iconfont-wikipedia icon-iconfontwikipedia",jianshu:"iconfont-jianshu icon-jianshu",youku:"iconfont-youku icon-iconfontyouku",youtube:"iconfont-youtube icon-youtube",juejin:"iconfont-juejin icon-juejin",weixin:"iconfont-weixin icon-iconfontwechat",segmentfault:"iconfont-sf icon-iconsf-copy"};for(var n in i)if("function"!=typeof i[n]){var a=n;e.indexOf(a)>=0&&(o=a,t=i[a])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(e){var o=$(this).attr("href"),t=document.createElement("a");t.href=o,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var i=$(this).find("i").css("color"),n=$(this).css("color");$(this).hover(function(){$(this).css("color",i),$(this).addClass("animated pulse")},function(){$(this).css("color",n),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var e={alipay:"/assets/images/qr-alipay-255.png",wechat:"/assets/images/qr-wechat-255.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",e.wechat),$("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",e.wechat),$(this).find("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(e,o){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},i=new Image;i.onload=function(){i.width>0&&i.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},i.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},i.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(ImageSmartLoader.isWebPSupported===!0){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!1,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var e=$(window),o=document.getElementById("scroll-hint");if(null!==o&&($(".header-scroll-hint").on("click",function(e){var o=$(this).closest(".cover");$("html, body").animate({scrollTop:o.position().top+o.height()},400),e.preventDefault()}),window.addEventListener("load",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")}),window.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")})),$("#toc").initTOC({selector:"h1, h2, h3, h4, h5, h6",scope:"article",overwrite:!1,prefix:"toc"}),$(".sidebar-toggle").on("click",function(e){$("body").hasClass("sidebar-opened")?($("body").removeClass("sidebar-opened"),$("body").css("overflow","scroll")):($("body").addClass("sidebar-opened"),$("body").css("overflow","hidden")),e.preventDefault()}),$(".search-toggle").on("click",function(e){$("body").hasClass("search-opened")?($("body").removeClass("search-opened"),$("body").css("overflow","scroll"),searchField.clear()):($("body").addClass("search-opened"),$("body").css("overflow","hidden"),setTimeout(function(){$("#search-field").focus()},300)),e.preventDefault()}),$(".overlay").on("click",function(e){$("body").removeClass("sidebar-opened search-opened"),$("body").css("overflow","scroll"),searchField.clear(),e.preventDefault()}),"undefined"!=typeof disqus_shortname){var t=!1;$(".comments-title").on("click",function(){var e=$(this);t?($("#disqus_thread").slideToggle(),e.hasClass("toggled-on")?e.removeClass("toggled-on"):e.addClass("toggled-on")):($.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}),e.addClass("toggled-on"),t=!0)})}$.fn.lazyload=function(o){function t(){var e=0;n.each(function(){var o=$(this);if(!a.skip_invisible||o.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else o.trigger("appear"),e=0})}var i,n=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return o&&(void 0!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),void 0!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),$.extend(a,o)),i=void 0===a.container||a.container===window?e:$(a.container),0===a.event.indexOf("scroll")&&i.bind(a.event,function(){return t()}),this.each(function(){var e=this,o=$(e);e.loaded=!1,void 0!==o.attr("src")&&o.attr("src")!==!1||o.is("img")&&(o.attr("src",a.placeholder),o.addClass("loading")),o.one("appear",function(){if(!this.loaded){if(a.appear){var t=n.length;a.appear.call(e,t,a)}var i=o.attr("data-"+a.data_attribute);void 0===i&&(i=o.attr("src")),void 0===i&&(i=o.style.backgroundImage),void 0!==i&&i.indexOf("img.halfrost.com")>-1&&(a.advanced_load===!0&&(i+="?imageView2"),a.is_scale===!0&&(i+="/0/w/"+a.scale_width),a.webP_load===!0&&a.is_scale===!1&&(i+="/0/format/webp"),a.webP_load===!0&&a.is_scale===!0&&(i+="/format/webp"),a.webP_load===!1&&i.indexOf("https://img.halfrost.com/Blog/ArticleTitleImage/background-cover_.png")>-1&&(i="https://img.halfrost.com/Blog/ArticleTitleImage/background-cover_.png")),$("<img />").bind("load",function(){o.hide(),o.is("img")?o.attr("src",i):o.css("background-image","url('"+i+"')"),o[a.effect](a.effect_speed),e.loaded=!0;var t=$.grep(n,function(e){return!e.loaded});if(n=$(t),a.load){var r=n.length;a.load.call(e,r,a)}o.removeClass("loading")}).attr("src",i)}}),0!==a.event.indexOf("scroll")&&o.bind(a.event,function(){e.loaded||o.trigger("appear")})}),e.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(o,t){var i;return i=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:e.height())+e.scrollTop():$(t.container).offset().top+$(t.container).height(),i<=$(o).offset().top-t.threshold},$.rightoffold=function(o,t){var i;return i=void 0===t.container||t.container===window?e.width()+e.scrollLeft():$(t.container).offset().left+$(t.container).width(),i<=$(o).offset().left-t.threshold},$.abovethetop=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollTop():$(t.container).offset().top,i>=$(o).offset().top+t.threshold+$(o).height()},$.leftofbegin=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollLeft():$(t.container).offset().left,i>=$(o).offset().left+t.threshold+$(o).width()},$.inviewport=function(e,o){return!($.rightoffold(e,o)||$.leftofbegin(e,o)||$.belowthefold(e,o)||$.abovethetop(e,o))},$.extend($.expr[":"],{"below-the-fold":function(e){return $.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return $.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!$.rightoffold(e,{threshold:0})},"in-viewport":function(e){return $.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return $.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!$.rightoffold(e,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&General.addIcons()});
!function(e){!function(){var e=function(t){var r=new e.Builder;return r.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),r.searchPipeline.add(e.stemmer),t.call(r,r),r.build()};e.version="2.1.5",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},e.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){var r=t.indexOf(e.FieldRef.joiner);if(r===-1)throw"malformed field ref string";var i=t.slice(0,r),n=t.slice(r+1);return new e.FieldRef(n,i,t)},e.FieldRef.prototype.toString=function(){return void 0===this._stringValue&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue},e.idf=function(e,t){var r=0;for(var i in e)"_index"!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(n))},e.Token=function(e,t){this.str=e||"",this.metadata=t||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(e){return e},new e.Token(t(this.str,this.metadata),this.metadata)},e.tokenizer=function(t){if(null===t||void 0===t)return[];if(Array.isArray(t))return t.map(function(t){return new e.Token(e.utils.asString(t).toLowerCase())});for(var r=t.toString().trim().toLowerCase(),i=r.length,n=[],s=0,o=0;s<=i;s++){var a=r.charAt(s),u=s-o;(a.match(e.tokenizer.separator)||s==i)&&(u>0&&n.push(new e.Token(r.slice(o,s),{position:[o,u],index:n.length})),o=s+1)}return n},e.tokenizer.separator=/[\s\-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,r){r in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+r),t.label=r,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var r=t.label&&t.label in this.registeredFunctions;r||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var r=new e.Pipeline;return t.forEach(function(t){var i=e.Pipeline.registeredFunctions[t];if(!i)throw new Error("Cannot load unregistered function: "+t);r.add(i)}),r},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");i+=1,this._stack.splice(i,0,r)},e.Pipeline.prototype.before=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");this._stack.splice(i,0,r)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);t!=-1&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=function(t,r,i){var s=n(r,i,e);return void 0===s||""===s?t:t.concat(s)},i=0;i<t;i++){var n=this._stack[i];e=e.reduce(r,[])}return e},e.Pipeline.prototype.runString=function(t){var r=new e.Token(t);return this.run([r]).map(function(e){return e.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(e){this._magnitude=0,this.elements=e||[]},e.Vector.prototype.positionForIndex=function(e){if(0===this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];i>1&&(s<e&&(t=n),s>e&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e?2*n:s>e?2*n:s<e?2*(n+1):void 0},e.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e),this._magnitude},e.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,i=e.elements,n=r.length,s=i.length,o=0,a=0,u=0,l=0;u<n&&l<s;)o=r[u],a=i[l],o<a?u+=2:o>a?l+=2:o==a&&(t+=r[u+1]*i[l+1],u+=2,l+=2);return t},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},e.Vector.prototype.toJSON=function(){return this.elements},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",i="[aeiouy]",n=r+"[^aeiouy]*",s=i+"[aeiou]*",o="^("+n+")?"+s+n,a="^("+n+")?"+s+n+"("+s+")?$",u="^("+n+")?"+s+n+s+n,l="^("+n+")?"+i,h=new RegExp(o),d=new RegExp(u),c=new RegExp(a),f=new RegExp(l),p=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/,v=/.$/,x=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),b=new RegExp("^"+n+i+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,S=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Q=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,L=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,_=/^(.+?)(s|t)(ion)$/,T=/^(.+?)e$/,P=/ll$/,I=new RegExp("^"+n+i+"[^aeiouwxy]$"),O=function(r){var i,n,s,o,a,u,l;if(r.length<3)return r;s=r.substr(0,1),"y"==s&&(r=s.toUpperCase()+r.substr(1)),o=p,a=g,o.test(r)?r=r.replace(o,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2"));var O;return o=m,a=y,o.test(r)?(O=o.exec(r),o=h,o.test(O[1])&&(o=v,r=r.replace(o,""))):a.test(r)&&(O=a.exec(r),i=O[1],a=f,a.test(i)&&(r=i,a=x,u=w,l=b,a.test(r)?r+="e":u.test(r)?(o=v,r=r.replace(o,"")):l.test(r)&&(r+="e"))),o=k,o.test(r)&&(O=o.exec(r),i=O[1],r=i+"i"),o=S,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+e[n])),o=Q,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+t[n])),o=L,a=_,o.test(r)?(O=o.exec(r),i=O[1],o=d,o.test(i)&&(r=i)):a.test(r)&&(O=a.exec(r),i=O[1]+O[2],a=d,a.test(i)&&(r=i)),o=T,o.test(r)&&(O=o.exec(r),i=O[1],o=d,a=c,u=I,(o.test(i)||a.test(i)&&!u.test(i))&&(r=i)),o=P,a=d,o.test(r)&&a.test(r)&&(o=v,r=r.replace(o,"")),"y"==s&&(r=s.toLowerCase()+r.substr(1)),r};return function(e){return e.update(O)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenSet=function(){this["final"]=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var r=new e.TokenSet.Builder,i=0,n=t.length;i<n;i++)r.insert(t[i]);return r.finish(),r.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,r){for(var i=new e.TokenSet,n=[{node:i,editsRemaining:r,str:t}];n.length;){var s,o=n.pop();if(o.str.length>0){s=o.str.charAt(0);var a;s in o.node.edges?a=o.node.edges[s]:(a=new e.TokenSet,o.node.edges[s]=a),1==o.str.length?a["final"]=!0:n.push({node:a,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(o.editsRemaining>0&&o.str.length>1){s=o.str.charAt(1);var u;s in o.node.edges?u=o.node.edges[s]:(u=new e.TokenSet,o.node.edges[s]=u),o.str.length<=2?u["final"]=!0:n.push({node:u,editsRemaining:o.editsRemaining-1,str:o.str.slice(2)})}o.editsRemaining>0&&1==o.str.length&&(o.node["final"]=!0);var l;o.editsRemaining>0&&o.str.length>=1&&("*"in o.node.edges?l=o.node.edges["*"]:(l=new e.TokenSet,o.node.edges["*"]=l),1==o.str.length?l["final"]=!0:n.push({node:l,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}));var h;if(o.editsRemaining>0&&("*"in o.node.edges?h=o.node.edges["*"]:(h=new e.TokenSet,o.node.edges["*"]=h),0===o.str.length?h["final"]=!0:n.push({node:h,editsRemaining:o.editsRemaining-1,str:o.str})),o.editsRemaining>0&&o.str.length>1){var d,c=o.str.charAt(0),f=o.str.charAt(1);f in o.node.edges?d=o.node.edges[f]:(d=new e.TokenSet,o.node.edges[f]=d),1==o.str.length?d["final"]=!0:n.push({node:d,editsRemaining:o.editsRemaining-1,str:c+o.str.slice(2)})}}return i},e.TokenSet.fromString=function(t){for(var r=new e.TokenSet,i=r,n=!1,s=0,o=t.length;s<o;s++){var a=t[s],u=s==o-1;if("*"==a)n=!0,r.edges[a]=r,r["final"]=u;else{var l=new e.TokenSet;l["final"]=u,r.edges[a]=l,r=l,n&&(r.edges["*"]=i)}}return i},e.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node["final"]&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this["final"]?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++){var n=t[i],s=this.edges[n];e=e+n+s.id}return e},e.TokenSet.prototype.intersect=function(t){for(var r,i=new e.TokenSet,n=[{qNode:t,output:i,node:this}];n.length;){r=n.pop();for(var s=Object.keys(r.qNode.edges),o=s.length,a=Object.keys(r.node.edges),u=a.length,l=0;l<o;l++)for(var h=s[l],d=0;d<u;d++){var c=a[d];if(c==h||"*"==h){var f,p=r.node.edges[c],g=r.qNode.edges[h],m=p["final"]&&g["final"];c in r.output.edges?(f=r.output.edges[c],f["final"]=f["final"]||m):(f=new e.TokenSet,f["final"]=m,r.output.edges[c]=f),n.push({qNode:g,output:f,node:p})}}}return i},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){var r,i=0;if(t<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<t.length&&n<this.previousWord.length&&t[n]==this.previousWord[n];n++)i++;this.minimize(i),r=0===this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var s=i;s<t.length;s++){var o=new e.TokenSet,a=t[s];r.edges[a]=o,this.uncheckedNodes.push({parent:r,"char":a,child:o}),r=o}r["final"]=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r["char"]]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},e.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},e.Index.prototype.search=function(t){return this.query(function(r){var i=new e.QueryParser(t,r);i.parse()})},e.Index.prototype.query=function(t){var r=new e.Query(this.fields),i=Object.create(null),n=Object.create(null),s=Object.create(null);t.call(r,r);for(var o=0;o<r.clauses.length;o++){var a=r.clauses[o],u=null;u=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var l=0;l<u.length;l++){var h=u[l];a=JSON.parse(JSON.stringify(a)),a.term=h;for(var d,c=e.TokenSet.fromClause(a),f=this.tokenSet.intersect(c).toArray(),p=0;p<f.length;p++){var g=f[p],m=this.invertedIndex[g];if(m){d=m._index;for(var y=0;y<a.fields.length;y++){var v=a.fields[y],x=m[v],w=Object.keys(x),b=g+"/"+v;if(void 0===n[v]&&(n[v]=new e.Vector),n[v].upsert(d,1*a.boost,function(e,t){return e+t}),!s[b]){for(var k=0;k<w.length;k++){var S,Q=w[k],L=new e.FieldRef(Q,v),_=x[Q];void 0===(S=i[L])?i[L]=new e.MatchData(g,v,_):S.add(g,v,_)}s[b]=!0}}}}}}var T=Object.keys(i),P=[],I=Object.create(null);for(o=0;o<T.length;o++){var O,E=e.FieldRef.fromString(T[o]),F=E.docRef,D=this.fieldVectors[E],j=n[E.fieldName].similarity(D);if(void 0!==(O=I[F]))O.score+=j,O.matchData.combine(i[E]);else{var R={ref:F,score:j,matchData:i[E]};I[F]=R,P.push(R)}}return P.sort(function(e,t){return t.score-e.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),r=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:r,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var r={},i={},n=t.fieldVectors,s={},o=t.invertedIndex,a=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(var l,h=0;h<n.length;h++)l=n[h],ref=l[0],elements=l[1],i[ref]=new e.Vector(elements);for(h=0;h<o.length;h++)l=o[h],term=l[0],posting=l[1],a.insert(term),s[term]=posting;return a.finish(),r.fields=t.fields,r.fieldVectors=i,r.invertedIndex=s,r.tokenSet=a.root,r.pipeline=u,new e.Index(r)},e.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(e){this._ref=e},e.Builder.prototype.field=function(e){this._fields.push(e)},e.Builder.prototype.b=function(e){e<0?this._b=0:e>1?this._b=1:this._b=e},e.Builder.prototype.k1=function(e){this._k1=e},e.Builder.prototype.add=function(t){var r=t[this._ref];this.documentCount+=1;for(var i=0;i<this._fields.length;i++){var n=this._fields[i],s=t[n],o=this.tokenizer(s),a=this.pipeline.run(o),u=new e.FieldRef(r,n),l=Object.create(null);this.fieldTermFrequencies[u]=l,this.fieldLengths[u]=0,this.fieldLengths[u]+=a.length;for(var h=0;h<a.length;h++){var d=a[h];if(void 0===l[d]&&(l[d]=0),l[d]+=1,void 0===this.invertedIndex[d]){var c=Object.create(null);c._index=this.termIndex,this.termIndex+=1;for(var f=0;f<this._fields.length;f++)c[this._fields[f]]=Object.create(null);this.invertedIndex[d]=c}void 0===this.invertedIndex[d][n][r]&&(this.invertedIndex[d][n][r]=Object.create(null));for(var p=0;p<this.metadataWhitelist.length;p++){var g=this.metadataWhitelist[p],m=d.metadata[g];void 0===this.invertedIndex[d][n][r][g]&&(this.invertedIndex[d][n][r][g]=[]),this.invertedIndex[d][n][r][g].push(m)}}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var t,r=Object.keys(this.fieldLengths),i=r.length,n={},s={},o=0;o<i;o++){var a=e.FieldRef.fromString(r[o]);t=a.fieldName,(s[t]||(s[t]=0))&&(s[t]+=1),(n[t]||(n[t]=0))&&(n[t]+=this.fieldLengths[a])}for(o=0;o<this._fields.length;o++)t=this._fields[o],n[t]=n[t]/s[t];this.averageFieldLength=n},e.Builder.prototype.createFieldVectors=function(){for(var t={},r=Object.keys(this.fieldTermFrequencies),i=r.length,n=Object.create(null),s=0;s<i;s++){for(var o=e.FieldRef.fromString(r[s]),a=o.fieldName,u=this.fieldLengths[o],l=new e.Vector,h=this.fieldTermFrequencies[o],d=Object.keys(h),c=d.length,f=0;f<c;f++){var p,g,m,y=d[f],v=h[y],x=this.invertedIndex[y]._index;void 0===n[y]?(p=e.idf(this.invertedIndex[y],this.documentCount),n[y]=p):p=n[y],g=p*((this._k1+1)*v)/(this._k1*(1-this._b+this._b*(u/this.averageFieldLength[a]))+v),m=Math.round(1e3*g)/1e3,l.insert(x,m)}t[o]=l}this.fieldVectors=t},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},e.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},e.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);void 0===this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);void 0===this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var u=0;u<a.length;u++){var l=a[u];void 0===this.metadata[i][o][l]?this.metadata[i][o][l]=e.metadata[i][o][l]:this.metadata[i][o][l]=this.metadata[i][o][l].concat(e.metadata[i][o][l])}}}},e.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(!(t in this.metadata[e]))return void(this.metadata[e][t]=r);for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}},e.Query=function(e){this.clauses=[],this.allFields=e},e.Query.wildcard="*",e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),this.clauses.push(t),this},e.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},e.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},e.QueryParseError.prototype=new Error,e.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},e.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,r;do t=this.next(),r=t.charCodeAt(0);while(r>47&&r<58);t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var r=t.next();if(r==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(92!=r.charCodeAt(0)){if(":"==r)return e.QueryLexer.lexField;if("~"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if("^"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if(r.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}else t.escapeCharacter()}},e.QueryParser=function(t,r){this.lexer=new e.QueryLexer(t),this.query=r,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseFieldOrTerm;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},e.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},e.QueryParser.parseFieldOrTerm=function(t){var r=t.peekLexeme();if(void 0!==r)switch(r.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var i="expected either a field or a term, found "+r.type;throw r.str.length>=1&&(i+=" with value '"+r.str+"'"),new e.QueryParseError(i,r.start,r.end)}},e.QueryParser.parseField=function(t){var r=t.consumeLexeme();if(void 0!==r){var i;if(t.query.allFields.indexOf(r.str)==-1){var n=t.query.allFields.map(function(e){return"'"+e+"'"}).join(", ");throw i="unrecognised field '"+r.str+"', possible fields: "+n,new e.QueryParseError(i,r.start,r.end)}t.currentClause.fields=[r.str];var s=t.peekLexeme();if(void 0===s)throw i="expecting term, found nothing",new e.QueryParseError(i,r.start,r.end);switch(s.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw i="expecting term, found '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseTerm=function(t){var r=t.consumeLexeme();if(void 0!==r){t.currentClause.term=r.str.toLowerCase(),r.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1);var i=t.peekLexeme();if(void 0===i)return void t.nextClause();switch(i.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:var n="Unexpected lexeme type '"+i.type+"'";throw new e.QueryParseError(n,i.start,i.end)}}},e.QueryParser.parseEditDistance=function(t){var r=t.consumeLexeme();if(void 0!==r){var i,n=parseInt(r.str,10);if(isNaN(n))throw i="edit distance must be numeric",new e.QueryParseError(i,r.start,r.end);t.currentClause.editDistance=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseBoost=function(t){var r,i=t.consumeLexeme();if(void 0!==i){var n=parseInt(i.str,10);if(isNaN(n))throw r="boost must be numeric",new e.QueryParseError(r,i.start,i.end);t.currentClause.boost=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw r="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(r,s.start,s.end)}}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e,t){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module&&module.exports?module.exports=t(e):e.Levenshtein=t(e)}(this,function(e){function t(e,t){var r,i;for(r=-1,i=e.length;++r<i;)t(e[r],r,e)}function r(e,r){var i;return i=Array(e.length),t(e,function(e,t,n){i.push(r(e,t,n))}),i}function i(e,r,i){return t(e,function(e,t,n){i=r(e,t,n)}),i}function n(e,t){return e.charAt(t)}function s(e,t){return e[t]}function o(e,r){var i,o,a,u;if("string"==typeof e&&"string"==typeof r)u=n;else{if("object"!=typeof e||"object"!=typeof r)throw"Levensthtein: input must be two strings or two arrays";u=s}return a=this._matrix=[],e==r?(this.distance=0,this.distance):""===e?(this.distance=r.length,this.distance):""===r?(this.distance=e.length,this.distance):(i=[0],t(e,function(e,t){t++,i[t]=t}),a[0]=i,t(r,function(n,s){o=[++s],t(e,function(t,n){n++,u(e,n-1)==u(r,s-1)?o[n]=i[n-1]:o[n]=Math.min(i[n]+1,o[n-1]+1,i[n-1]+1)}),i=o,a[a.length]=i}),this.distance=o[o.length-1],this.distance)}return o.prototype.toString=o.prototype.inspect=function(e){var t,n,s,o,a;for(t=this.getMatrix(),n=i(t,function(e,t){return Math.max(e,i(t,Math.max,0))},0),s=Array((n+"").length).join(" "),o=[];o.length<(t[0]&&t[0].length||0);)o[o.length]=Array(s.length+1).join("-");return o=o.join("-+")+"-",a=r(t,function(e){var t;return t=r(e,function(e){return(s+e).slice(-s.length)}),t.join(" |")+" "}),a.join("\n"+o+"\n")},o.prototype.getSteps=function(){var e,t,r,i,n,s,o,a;for(e=[],t=this.getMatrix(),r=t.length-1,i=t[0].length-1;0!==r||0!==i;)n=i>0?t[r][i-1]:Number.MAX_VALUE,s=r>0?t[r-1][i]:Number.MAX_VALUE,o=i>0&&r>0?t[r-1][i-1]:Number.MAX_VALUE,a=Math.min(n,s,o),a===o?(o<t[r][i]&&e.push(["substitute",i,r]),r--,i--):a===s?(e.push(["insert",i,r]),r--):(e.push(["delete",i,r]),i--);return e},o.prototype.getMatrix=function(){return this._matrix.slice()},o.prototype.valueOf=function(){return this.distance},o}),e.fn.ghostHunter=function(t){var r=e.extend({},e.fn.ghostHunter.defaults,t);if(r.results)return a.init(this,r),a},e.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!0,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{prettyPubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,includepages:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1};var t=function(e){var t=new Date(e),r=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getDate()+" "+r[t.getMonth()]+" "+t.getFullYear()},r=function(e){return e.replace(/^\//,"").replace(/\//g,"-")},i=null,n=function(){e(".gh-search-item").each(function(){var e=this.getAttribute("id"),t=e.replace(/^new-/,"");this.setAttribute("id",t)})},s=function(e,t,r){for(var i=0,s=r.length;i<s;i++){var o=r[i];if("delete"==o[0])e.eq(o[1]-1).remove();else{var a=t[o[2]-1].ref,u=this.blogData[a],l=this.format(this.result_template,u);if("substitute"===o[0])e.eq(o[1]-1).replaceWith(l);else if("insert"===o[0]){var h;h=0===o[1]?null:o[1]-1,e.eq(h).after(l)}}}n()},o=function(){this.blogData={},this.latestPost=0;var i={limit:"all",include:"tags",formats:["plaintext"]};this.includepages&&(i.filter="(page:true,page:false)");var n=this;e.get(ghost.url.api("posts",i)).done(function(e){var i=e.posts;n.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),this.field("plaintext"),this.field("pubDate"),this.field("tag"),i.forEach(function(e){var r=new Date(e.updated_at).getTime(),i=new Date(n.latestPost).getTime();r>i&&(n.latestPost=e.updated_at);var s=e.tags.map(function(e){return e.name});null===e.meta_description&&(e.meta_description="");var o=s.join(", ");o.length<1&&(o="undefined");var a={id:String(e.id),title:String(e.title),description:String(e.custom_excerpt),plaintext:String(e.plaintext),pubDate:String(e.published_at),tag:o};this.add(a);var u=n.subpath+e.url;n.blogData[e.id]={title:e.title,description:e.meta_description,pubDate:t(a.pubDate),link:u,tags:s},n.item_preprocessor&&Object.assign(n.blogData[e.id],n.item_preprocessor(e))},this)});try{var s=r(n.subpath);localStorage.setItem("ghost_"+s+"_lunrIndex",JSON.stringify(n.index)),localStorage.setItem("ghost_"+s+"_blogData",JSON.stringify(n.blogData)),localStorage.setItem("ghost_"+s+"_latestPost",n.latestPost)}catch(o){}n.indexing_end&&n.indexing_end(),n.isInit=!0})},a={isInit:!1,init:function(e,t){var r=this;Object.assign(this,t);var i=function(){};t.onPageLoad?(i=function(){r.loadAPI()},window.setTimeout(i,1)):e.focus(function(){r.loadAPI()}),e.closest("form").submit(function(t){t.preventDefault(),r.find(e.val())}),t.onKeyUp&&(e.keydown(function(e){if(13===e.which)return!1}),e.keyup(function(t){r.find(e.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var t=r(this.subpath);this.index=localStorage.getItem("ghost_"+t+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+t+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+t+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(i){}}if(this.isInit){var n={limit:"all",filter:"updated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",fields:"id"},s=this;e.get(ghost.url.api("posts",n)).done(function(e){e.posts.length>0?o.call(s):(s.indexing_end&&s.indexing_end(),s.isInit=!0)})}else o.call(this)},find:function(t){clearTimeout(i),t||(t=""),t=t.toLowerCase(),i=setTimeout(function(){for(var r=[],i=t.split(/\s+/),o=0,a=i.length;o<a;o++){var u=i[o];u&&r.push(this.index.query(function(e){e.term(u,{usePipeline:!0,boost:100}),e.term(u,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(u,{usePipeline:!1,editDistance:1,boost:1})}))}var l;if(r.length>1)for(l=r[0],r=r.slice(1),o=l.length-1;o>-1;o--){var h=l[o].ref;for(j=0,jlen=r.length;j<jlen;j++){for(var d={},c=0,f=r[j].length;c<f;c++)d[r[j][c].ref]=!0;if(!d[h]){l=l.slice(0,o).concat(l.slice(o+1));break}}}else l=1===r.length?r[0]:[];var p=e(this.results),g=[];for(0===l.length?(p.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&p.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(p.length>0?p.children().eq(0).replaceWith(this.format(this.info_template,{amount:l.length
})):p.append(this.format(this.info_template,{amount:l.length}))),this.before&&this.before(),o=0;o<l.length;o++){var m=l[o].ref,y=this.blogData[m];y&&(y.ref=m,g.push(y))}var v=e(".gh-search-item"),x=v.map(function(){return this.id.slice(3)}).get();if(0===x.length){for(o=0,a=g.length;o<a;o++)p.append(this.format(this.result_template,g[o]));n()}else{var w=[];for(o=0,a=l.length;o<a;o++)w.push(l[o].ref);var b=new Levenshtein(x,w),k=b.getSteps();s.call(this,v,l,k)}this.onComplete&&this.onComplete(g)}.bind(this),100)},clear:function(){e(this.results).empty()},format:function(e,t){return e.replace(/{{([^{}]*)}}/g,function(e,r){var i=t[r];return"string"==typeof i||"number"==typeof i?i:e})}}}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var n=function(e){if("string"!=typeof e)return 0;var n=e.match(/\d/g);return n?Math.min.apply(null,n):1},t=function(n,t){for(;t--;)n=e("<ol/>").appendTo(n),t&&(n=e("<li/>").appendTo(n));return n},r=function(e,n){for(;n--;)e=e.parent();return e},o=function(e,n){return function(t,r,o){var i=t.text(),a=n+"-"+o;r.text(i);var c=t[0],f=r[0],u=e?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(i){var a=i.selector,c=i.scope,f=e("<ol/>"),u=f,p=null,s=n(a),l=o(i.overwrite,i.prefix);return e(c).find(a).each(function(o,i){var a=n(i.tagName),c=a-s;c>0&&(u=t(p,c)),c<0&&(u=r(u,2*-c)),u.length||(u=f);var h=e("<li/>"),d=e("<a/>");l(e(i),d,o),h.append(d).appendTo(u),p=h,s=a}),f};e.fn.initTOC=function(n){var t={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};n=e.extend(t,n);var r=n.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");e(this).append(i(n));var o=location.hash;return o&&setTimeout(function(){var e=document.getElementById(o.slice(1));e&&e.scrollIntoView()},0),e(this)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJqcXVlcnkuZ2hvc3RodW50ZXIuanMiLCJqcXVlcnkudG9jLmpzIl0sIm5hbWVzIjpbImxvYWRKUyIsInVybCIsImNhbGxiYWNrIiwiZWwiLCJpc0lFIiwid2luZG93IiwiQWN0aXZlWE9iamVjdCIsImlzSUU2IiwiWE1MSHR0cFJlcXVlc3QiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0eXBlIiwiYXN5bmMiLCJyZWFkeVN0YXRlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwib25sb2FkIiwic3JjIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCIkIiwiZm4iLCJleHRlbmQiLCJpc09uU2NyZWVuVmlzaWJsZSIsImhhc0NsYXNzIiwid2luIiwidmlld3BvcnQiLCJ0b3AiLCJzY3JvbGxUb3AiLCJsZWZ0Iiwic2Nyb2xsTGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJib3R0b20iLCJoZWlnaHQiLCJib3VuZHMiLCJ0aGlzIiwib2Zmc2V0Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiR2VuZXJhbCIsImlzTW9iaWxlIiwiaXNXZWNoYXQiLCJ2aWV3V2lkdGgiLCJhYnNVcmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImluaXQiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNBbmRyb2lkIiwiYXBwVmVyc2lvbiIsIm1hdGNoIiwiYWRkQ2xhc3MiLCJ1cGRhdGVJbWFnZVdpZHRoIiwicmV3YXJkTG9hZGVyIiwid2ViRm9udExvYWRlciIsInNjcm9sbFRvUG9zIiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJwb3NpdGlvbiIsIlNUUl9UT19UT1AiLCJidXR0b24iLCJhcHBlbmRUbyIsInNjcm9sbCIsImZhZGVJbiIsImZhZGVPdXQiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJoYXNoIiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbk1hcCIsInR3aXR0ZXIiLCJxem9uZSIsIndlaWJvIiwiZmFjZWJvb2siLCJnaXRodWIiLCJkb3ViYW4iLCJnb29nbGUiLCJsdW9sZWkiLCJkcmliYmxlIiwidjJleCIsInpoaWh1Iiwid2lraXBlZGlhIiwiamlhbnNodSIsInlvdWt1IiwieW91dHViZSIsImp1ZWppbiIsIndlaXhpbiIsInNlZ21lbnRmYXVsdCIsIm5hbWUiLCJNYXBLZXkiLCJpbmRleE9mIiwiYWRkSWNvbnMiLCJpIiwiX3NyYyIsImF0dHIiLCJ0bXAiLCJocmVmIiwiX3NlbGZEb21haW4iLCJob3N0bmFtZSIsInByZXBlbmQiLCJfc2VsZkNvbG9yIiwiZmluZCIsImNzcyIsIl9vcmlnaW5hbENvbG9yIiwiaG92ZXIiLCJsb2FkUVIiLCJhbGlwYXkiLCJ3ZWNoYXQiLCJodG1sIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwic2Nyb2xsSGludCIsIiRjb3ZlciIsImNsb3Nlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwicGFnZVlPZmZzZXQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJpbml0VE9DIiwic2VsZWN0b3IiLCJzY29wZSIsIm92ZXJ3cml0ZSIsInByZWZpeCIsInNlYXJjaEZpZWxkIiwiY2xlYXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJkaXNxdXNfc2hvcnRuYW1lIiwiZGlzcXVzX2xvYWRlZCIsIl90aGlzIiwic2xpZGVUb2dnbGUiLCJhamF4IiwiZGF0YVR5cGUiLCJjYWNoZSIsIm9wdGlvbnMiLCJ1cGRhdGUiLCJjb3VudGVyIiwiZWxlbWVudHMiLCJzZXR0aW5ncyIsInNraXBfaW52aXNpYmxlIiwiaXMiLCJhYm92ZXRoZXRvcCIsImxlZnRvZmJlZ2luIiwiYmVsb3d0aGVmb2xkIiwicmlnaHRvZmZvbGQiLCJmYWlsdXJlX2xpbWl0IiwidHJpZ2dlciIsIiRjb250YWluZXIiLCJ0aHJlc2hvbGQiLCJldmVudCIsImVmZmVjdCIsImNvbnRhaW5lciIsImFwcGVhciIsInBsYWNlaG9sZGVyIiwidW5kZWZpbmVkIiwiZmFpbHVyZWxpbWl0IiwiZWZmZWN0c3BlZWQiLCJlZmZlY3Rfc3BlZWQiLCJiaW5kIiwic2VsZiIsIiRzZWxmIiwibG9hZGVkIiwib25lIiwiZWxlbWVudHNfbGVmdCIsImxlbmd0aCIsImNhbGwiLCJ1cGRhdGVkVXJsIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIiwibHVuciIsImNvbmZpZyIsImJ1aWxkZXIiLCJCdWlsZGVyIiwicGlwZWxpbmUiLCJ0cmltbWVyIiwic3RvcFdvcmRGaWx0ZXIiLCJzdGVtbWVyIiwic2VhcmNoUGlwZWxpbmUiLCJidWlsZCIsInZlcnNpb24iLCJ1dGlscyIsIndhcm4iLCJnbG9iYWwiLCJtZXNzYWdlIiwiY29uc29sZSIsImFzU3RyaW5nIiwib2JqIiwidG9TdHJpbmciLCJGaWVsZFJlZiIsImRvY1JlZiIsImZpZWxkTmFtZSIsInN0cmluZ1ZhbHVlIiwiX3N0cmluZ1ZhbHVlIiwiam9pbmVyIiwiZnJvbVN0cmluZyIsInMiLCJuIiwiZmllbGRSZWYiLCJzbGljZSIsInByb3RvdHlwZSIsImlkZiIsInBvc3RpbmciLCJkb2N1bWVudENvdW50IiwiZG9jdW1lbnRzV2l0aFRlcm0iLCJPYmplY3QiLCJrZXlzIiwieCIsIk1hdGgiLCJsb2ciLCJhYnMiLCJUb2tlbiIsInN0ciIsIm1ldGFkYXRhIiwiY2xvbmUiLCJ0b2tlbml6ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJ0IiwidHJpbSIsImxlbiIsInRva2VucyIsInNsaWNlRW5kIiwic2xpY2VTdGFydCIsImNoYXIiLCJjaGFyQXQiLCJzbGljZUxlbmd0aCIsInNlcGFyYXRvciIsInB1c2giLCJpbmRleCIsIlBpcGVsaW5lIiwiX3N0YWNrIiwicmVnaXN0ZXJlZEZ1bmN0aW9ucyIsImNyZWF0ZSIsInJlZ2lzdGVyRnVuY3Rpb24iLCJsYWJlbCIsIndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZCIsImlzUmVnaXN0ZXJlZCIsInNlcmlhbGlzZWQiLCJmb3JFYWNoIiwiZm5OYW1lIiwiRXJyb3IiLCJmbnMiLCJhcmd1bWVudHMiLCJhZnRlciIsImV4aXN0aW5nRm4iLCJuZXdGbiIsInBvcyIsInNwbGljZSIsImJlZm9yZSIsInJ1biIsInN0YWNrTGVuZ3RoIiwiciIsIm1lbW8iLCJ0b2tlbiIsImoiLCJyZXN1bHQiLCJjb25jYXQiLCJyZWR1Y2UiLCJydW5TdHJpbmciLCJyZXNldCIsInRvSlNPTiIsIlZlY3RvciIsIl9tYWduaXR1ZGUiLCJwb3NpdGlvbkZvckluZGV4Iiwic3RhcnQiLCJlbmQiLCJwaXZvdFBvaW50IiwiZmxvb3IiLCJwaXZvdEluZGV4IiwiaW5zZXJ0IiwiaW5zZXJ0SWR4IiwidmFsIiwidXBzZXJ0IiwibWFnbml0dWRlIiwic3VtT2ZTcXVhcmVzIiwiZWxlbWVudHNMZW5ndGgiLCJzcXJ0IiwiZG90Iiwib3RoZXJWZWN0b3IiLCJkb3RQcm9kdWN0IiwiYiIsImFMZW4iLCJiTGVuIiwiYVZhbCIsImJWYWwiLCJzaW1pbGFyaXR5IiwidG9BcnJheSIsIm91dHB1dCIsInN0ZXAybGlzdCIsImF0aW9uYWwiLCJ0aW9uYWwiLCJlbmNpIiwiYW5jaSIsIml6ZXIiLCJibGkiLCJhbGxpIiwiZW50bGkiLCJlbGkiLCJvdXNsaSIsIml6YXRpb24iLCJhdGlvbiIsImF0b3IiLCJhbGlzbSIsIml2ZW5lc3MiLCJmdWxuZXNzIiwib3VzbmVzcyIsImFsaXRpIiwiaXZpdGkiLCJiaWxpdGkiLCJsb2dpIiwic3RlcDNsaXN0IiwiaWNhdGUiLCJhdGl2ZSIsImFsaXplIiwiaWNpdGkiLCJpY2FsIiwiZnVsIiwibmVzcyIsImMiLCJ2IiwiQyIsIlYiLCJtZ3IwIiwibWVxMSIsIm1ncjEiLCJzX3YiLCJyZV9tZ3IwIiwiUmVnRXhwIiwicmVfbWdyMSIsInJlX21lcTEiLCJyZV9zX3YiLCJyZV8xYSIsInJlMl8xYSIsInJlXzFiIiwicmUyXzFiIiwicmVfMWJfMiIsInJlMl8xYl8yIiwicmUzXzFiXzIiLCJyZTRfMWJfMiIsInJlXzFjIiwicmVfMiIsInJlXzMiLCJyZV80IiwicmUyXzQiLCJyZV81IiwicmVfNV8xIiwicmUzXzUiLCJwb3J0ZXJTdGVtbWVyIiwidyIsInN0ZW0iLCJzdWZmaXgiLCJmaXJzdGNoIiwicmUiLCJyZTIiLCJyZTMiLCJyZTQiLCJzdWJzdHIiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJmcCIsImV4ZWMiLCJnZW5lcmF0ZVN0b3BXb3JkRmlsdGVyIiwic3RvcFdvcmRzIiwid29yZHMiLCJzdG9wV29yZCIsIlRva2VuU2V0IiwiZWRnZXMiLCJpZCIsIl9uZXh0SWQiLCJmcm9tQXJyYXkiLCJhcnIiLCJmaW5pc2giLCJyb290IiwiZnJvbUNsYXVzZSIsImNsYXVzZSIsImZyb21GdXp6eVN0cmluZyIsInRlcm0iLCJlZGl0RGlzdGFuY2UiLCJzdGFjayIsIm5vZGUiLCJlZGl0c1JlbWFpbmluZyIsImZyYW1lIiwicG9wIiwibm9FZGl0Tm9kZSIsImRlbGV0aW9uTm9kZSIsInN1YnN0aXR1dGlvbk5vZGUiLCJpbnNlcnRpb25Ob2RlIiwidHJhbnNwb3NlTm9kZSIsImNoYXJBIiwiY2hhckIiLCJ3aWxkY2FyZEZvdW5kIiwiZmluYWwiLCJuZXh0IiwiZWRnZSIsIl9zdHIiLCJsYWJlbHMiLCJzb3J0IiwiaW50ZXJzZWN0IiwicU5vZGUiLCJxRWRnZXMiLCJxTGVuIiwibkVkZ2VzIiwibkxlbiIsInEiLCJxRWRnZSIsIm5FZGdlIiwicHJldmlvdXNXb3JkIiwidW5jaGVja2VkTm9kZXMiLCJtaW5pbWl6ZWROb2RlcyIsIndvcmQiLCJjb21tb25QcmVmaXgiLCJtaW5pbWl6ZSIsImNoaWxkIiwibmV4dE5vZGUiLCJwYXJlbnQiLCJkb3duVG8iLCJjaGlsZEtleSIsIkluZGV4IiwiYXR0cnMiLCJpbnZlcnRlZEluZGV4IiwiZmllbGRWZWN0b3JzIiwidG9rZW5TZXQiLCJmaWVsZHMiLCJzZWFyY2giLCJxdWVyeVN0cmluZyIsInF1ZXJ5IiwicGFyc2VyIiwiUXVlcnlQYXJzZXIiLCJwYXJzZSIsIlF1ZXJ5IiwibWF0Y2hpbmdGaWVsZHMiLCJxdWVyeVZlY3RvcnMiLCJ0ZXJtRmllbGRDYWNoZSIsImNsYXVzZXMiLCJ0ZXJtcyIsInVzZVBpcGVsaW5lIiwibSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZXJtSW5kZXgiLCJ0ZXJtVG9rZW5TZXQiLCJleHBhbmRlZFRlcm1zIiwiZXhwYW5kZWRUZXJtIiwiX2luZGV4IiwiayIsImZpZWxkIiwiZmllbGRQb3N0aW5nIiwibWF0Y2hpbmdEb2N1bWVudFJlZnMiLCJ0ZXJtRmllbGQiLCJib29zdCIsImwiLCJmaWVsZE1hdGNoIiwibWF0Y2hpbmdEb2N1bWVudFJlZiIsIm1hdGNoaW5nRmllbGRSZWYiLCJNYXRjaERhdGEiLCJtYXRjaGluZ0ZpZWxkUmVmcyIsInJlc3VsdHMiLCJtYXRjaGVzIiwiZG9jTWF0Y2giLCJmaWVsZFZlY3RvciIsInNjb3JlIiwibWF0Y2hEYXRhIiwiY29tYmluZSIsInJlZiIsInNlcmlhbGl6ZWRJbmRleCIsInNlcmlhbGl6ZWRWZWN0b3JzIiwic2VyaWFsaXplZEludmVydGVkSW5kZXgiLCJ0b2tlblNldEJ1aWxkZXIiLCJ0dXBsZSIsIl9yZWYiLCJfZmllbGRzIiwiZmllbGRUZXJtRnJlcXVlbmNpZXMiLCJmaWVsZExlbmd0aHMiLCJfYiIsIl9rMSIsIm1ldGFkYXRhV2hpdGVsaXN0IiwibnVtYmVyIiwiazEiLCJkb2MiLCJmaWVsZFRlcm1zIiwibWV0YWRhdGFLZXkiLCJjYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzIiwiZmllbGRSZWZzIiwibnVtYmVyT2ZGaWVsZHMiLCJhY2N1bXVsYXRvciIsImRvY3VtZW50c1dpdGhGaWVsZCIsImF2ZXJhZ2VGaWVsZExlbmd0aCIsImNyZWF0ZUZpZWxkVmVjdG9ycyIsImZpZWxkUmVmc0xlbmd0aCIsInRlcm1JZGZDYWNoZSIsImZpZWxkTGVuZ3RoIiwidGVybUZyZXF1ZW5jaWVzIiwidGVybXNMZW5ndGgiLCJzY29yZVdpdGhQcmVjaXNpb24iLCJ0ZiIsInJvdW5kIiwiY3JlYXRlVG9rZW5TZXQiLCJ1c2UiLCJhcmdzIiwidW5zaGlmdCIsImFwcGx5IiwiY2xvbmVkTWV0YWRhdGEiLCJtZXRhZGF0YUtleXMiLCJrZXkiLCJvdGhlck1hdGNoRGF0YSIsImFsbEZpZWxkcyIsIndpbGRjYXJkIiwiTk9ORSIsIkxFQURJTkciLCJUUkFJTElORyIsIlF1ZXJ5UGFyc2VFcnJvciIsIlF1ZXJ5TGV4ZXIiLCJsZXhlbWVzIiwiZXNjYXBlQ2hhclBvc2l0aW9ucyIsInN0YXRlIiwibGV4VGV4dCIsInNsaWNlU3RyaW5nIiwic3ViU2xpY2VzIiwiam9pbiIsImVtaXQiLCJlc2NhcGVDaGFyYWN0ZXIiLCJFT1MiLCJpZ25vcmUiLCJiYWNrdXAiLCJhY2NlcHREaWdpdFJ1biIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIm1vcmUiLCJGSUVMRCIsIlRFUk0iLCJFRElUX0RJU1RBTkNFIiwiQk9PU1QiLCJsZXhGaWVsZCIsImxleGVyIiwibGV4VGVybSIsImxleEVkaXREaXN0YW5jZSIsImxleEJvb3N0IiwibGV4RU9TIiwidGVybVNlcGFyYXRvciIsImN1cnJlbnRDbGF1c2UiLCJsZXhlbWVJZHgiLCJwYXJzZUZpZWxkT3JUZXJtIiwicGVla0xleGVtZSIsImNvbnN1bWVMZXhlbWUiLCJsZXhlbWUiLCJuZXh0Q2xhdXNlIiwiY29tcGxldGVkQ2xhdXNlIiwicGFyc2VGaWVsZCIsInBhcnNlVGVybSIsImVycm9yTWVzc2FnZSIsInBvc3NpYmxlRmllbGRzIiwiZiIsIm5leHRMZXhlbWUiLCJwYXJzZUVkaXREaXN0YW5jZSIsInBhcnNlQm9vc3QiLCJwYXJzZUludCIsImlzTmFOIiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJMZXZlbnNodGVpbiIsImFycmF5IiwiZ2V0Q2hhciIsImlkeCIsImdldEFycmF5TWVtYmVyIiwic3RyX20iLCJzdHJfbiIsInByZXZpb3VzIiwiY3VycmVudCIsIm1hdHJpeCIsImdldEVsZW0iLCJfbWF0cml4IiwiZGlzdGFuY2UiLCJuX3ZhbCIsIm5faWR4IiwibV92YWwiLCJtX2lkeCIsIm1pbiIsImluc3BlY3QiLCJub19wcmludCIsIm1heCIsImJ1ZmYiLCJzZXAiLCJyb3dzIiwiZ2V0TWF0cml4IiwibyIsInJvdyIsImNlbGxzIiwiY2VsbCIsImdldFN0ZXBzIiwic3RlcHMiLCJ5IiwidSIsImQiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJ2YWx1ZU9mIiwiZ2hvc3RIdW50ZXIiLCJvcHRzIiwiZGVmYXVsdHMiLCJwbHVnaW5NZXRob2RzIiwicmVzdWx0c0RhdGEiLCJvblBhZ2VMb2FkIiwib25LZXlVcCIsInJlc3VsdF90ZW1wbGF0ZSIsImluZm9fdGVtcGxhdGUiLCJkaXNwbGF5U2VhcmNoSW5mbyIsInplcm9SZXN1bHRzSW5mbyIsIm9uQ29tcGxldGUiLCJpbmNsdWRlcGFnZXMiLCJmaWx0ZXJmaWVsZHMiLCJzdWJwYXRoIiwiaXRlbV9wcmVwcm9jZXNzb3IiLCJpbmRleGluZ19zdGFydCIsImluZGV4aW5nX2VuZCIsInByZXR0eURhdGUiLCJkYXRlIiwiRGF0ZSIsIm1vbnRoTmFtZXMiLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldFN1YnBhdGhLZXkiLCJsYXN0VGltZW91dElEIiwic2V0dGxlSURzIiwib2xkQXR0ciIsImdldEF0dHJpYnV0ZSIsIm5ld0F0dHIiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVTZWFyY2hMaXN0IiwibGlzdEl0ZW1zIiwiYXBpRGF0YSIsImlsZW4iLCJzdGVwIiwiZXEiLCJsdW5ycmVmIiwicG9zdERhdGEiLCJibG9nRGF0YSIsImZvcm1hdCIsInJlcGxhY2VXaXRoIiwiZ3JhYkFuZEluZGV4IiwibGF0ZXN0UG9zdCIsInBhcmFtcyIsImxpbWl0IiwiaW5jbHVkZSIsImZvcm1hdHMiLCJmaWx0ZXIiLCJtZSIsImdldCIsImdob3N0IiwiYXBpIiwiZG9uZSIsImRhdGEiLCJpZHhTcmMiLCJwb3N0cyIsImFycmF5SXRlbSIsIml0ZW1EYXRlIiwidXBkYXRlZF9hdCIsImdldFRpbWUiLCJyZWNvcmRlZERhdGUiLCJ0YWdfYXJyIiwidGFncyIsIm1ldGFfZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInBhcnNlZERhdGEiLCJTdHJpbmciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY3VzdG9tX2V4Y2VycHQiLCJwbGFpbnRleHQiLCJwdWJEYXRlIiwicHVibGlzaGVkX2F0IiwidGFnIiwibG9jYWxVcmwiLCJsaW5rIiwiYXNzaWduIiwic3VicGF0aEtleSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJpc0luaXQiLCJ0YXJnZXQiLCJ0aGF0IiwibWlhbSIsImxvYWRBUEkiLCJzdWJtaXQiLCJrZXlkb3duIiwid2hpY2giLCJrZXl1cCIsImdldEl0ZW0iLCJ2YWx1ZSIsImNsZWFyVGltZW91dCIsInRoaW5nc0ZvdW5kIiwidmFsdWVTcGxpdCIsInNwbGl0Iiwic2VhcmNoUmVzdWx0IiwiamxlbiIsIm90aGVyUmVmcyIsImtsZW4iLCJlbXB0eSIsImFwcGVuZCIsImFtb3VudCIsImNoaWxkcmVuIiwiY3VycmVudFJlZnMiLCJuZXdSZWZzIiwibGV2ZW5zaHRlaW4iLCJqUXVlcnkiLCJnZXRMZXZlbCIsImhlYWRlciIsImRlY3MiLCJjcmVhdGVMaXN0IiwiJHdyYXBwZXIiLCJjb3VudCIsImp1bXBCYWNrIiwiJGN1cnJlbnRXcmFwcGVyIiwic2V0QXR0cnMiLCIkc3JjIiwiJHRhcmdldCIsImNvbnRlbnQiLCJ0ZXh0IiwicHJlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYnVpbGRUT0MiLCIkcmV0IiwiJGxhc3RMaSIsInByZXZEZXB0aCIsIl9zZXRBdHRycyIsImVsZW0iLCJjdXJyZW50RGVwdGgiLCJ0YWdOYW1lIiwiJGxpIiwiJGEiLCJkZWZhdWx0T3B0cyIsIlR5cGVFcnJvciIsImN1cnJlbnRIYXNoIiwiYW5jaG9yIiwic2Nyb2xsSW50b1ZpZXciXSwibWFwcGluZ3MiOiJBQXVCQSxRQUFTQSxRQUFPQyxFQUFLQyxFQUFVQyxHQUMzQixHQUFJQyxLQUFTQyxPQUFPQyxjQUNoQkMsRUFBUUgsSUFBU0MsT0FBT0csZUFDeEJDLEVBQVNDLFNBQVNDLGNBQWMsVUFDaENDLEVBQU9MLEVBQVFHLFNBQVNHLGdCQUFrQkgsU0FBU0kscUJBQXFCLFFBQVEsRUFDcEZMLEdBQU9NLEtBQU8sa0JBQ2ROLEVBQU9PLE9BQVEsRUFDWFAsRUFBT1EsV0FDUFIsRUFBT1MsbUJBQXFCLFdBQ0MsVUFBckJULEVBQU9RLFlBQStDLFlBQXJCUixFQUFPUSxhQUN4Q1IsRUFBT1MsbUJBQXFCLEtB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R0FDbkIsR0FBSUMsR0FBZXJCLEVBQVNvQixFQUFLRSxTQUM3QnR2QixFQUFTcXZCLEVBQWVILENBRXhCbHZCLEdBQVMsSUFDVG91QixFQUFXRCxFQUFXYyxFQUFTanZCLElBRy9CQSxFQUFTLElBVVRvdUIsRUFBV0UsRUFBU0YsRUFBb0IsR0FBVHB1QixJQUc5Qm91QixFQUFTempCLFNBQ1Z5akIsRUFBV1ksRUFHZixJQUFJTyxHQUFNeHdCLEVBQUUsU0FDUnl3QixFQUFLendCLEVBQUUsT0FFWG93QixHQUFVcHdCLEVBQUVxd0IsR0FBT0ksRUFBSXhmLEdBRXZCdWYsRUFBSTlCLE9BQU8rQixHQUFJNXNCLFNBQVN3ckIsR0FFeEJhLEVBQVVNLEVBQ1ZMLEVBQVlHLElBR2JMLEVBYVhqd0IsR0FBRUMsR0FBRzZJLFFBQVUsU0FBVWdCLEdBQ3JCLEdBQUk0bUIsSUFDQTNuQixTQUFVLHlCQUNWQyxNQUFPLE9BQ1BDLFdBQVcsRUFDWEMsT0FBUSxNQUdaWSxHQUFVOUosRUFBRUUsT0FBT3d3QixFQUFhNW1CLEVBRWhDLElBQUlmLEdBQVdlLEVBQVFmLFFBRXZCLElBQXdCLGdCQUFiQSxHQUNQLEtBQU0sSUFBSTRuQixXQUFVLDRCQUd4QixLQUFLNW5CLEVBQVM1RyxNQUFNLHVCQUNoQixLQUFNLElBQUl3dUIsV0FBVSxtQ0FHeEIzd0IsR0FBRWdCLE1BQU0wdEIsT0FBT3NCLEVBQVNsbUIsR0FFeEIsSUFBSThtQixHQUFjbnZCLFNBQVM0QyxJQVMzQixPQVBJdXNCLElBQ0F2bkIsV0FBVyxXQUNQLEdBQUl3bkIsR0FBUzV4QixTQUFTVyxlQUFlZ3hCLEVBQVkxaEIsTUFBTSxHQUNuRDJoQixJQUFRQSxFQUFPQyxrQkFDcEIsR0FHQTl3QixFQUFFZ0IiLCJmaWxlIjoiZGV2Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQuZm4uZXh0ZW5kKHtcblxuICAgIGlzT25TY3JlZW5WaXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHtcbiAgICAgICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbExlZnQoKVxuICAgICAgICB9O1xuICAgICAgICB2aWV3cG9ydC5yaWdodCA9IHZpZXdwb3J0LmxlZnQgKyB3aW4ud2lkdGgoKTtcbiAgICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSB0aGlzLm9mZnNldCgpO1xuICAgICAgICBib3VuZHMucmlnaHQgPSBib3VuZHMubGVmdCArIHRoaXMub3V0ZXJXaWR0aCgpO1xuICAgICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICByZXR1cm4gKCEodmlld3BvcnQucmlnaHQgPCBib3VuZHMubGVmdCB8fCB2aWV3cG9ydC5sZWZ0ID4gYm91bmRzLnJpZ2h0IHx8IHZpZXdwb3J0LmJvdHRvbSA8IGJvdW5kcy50b3AgfHwgdmlld3BvcnQudG9wID4gYm91bmRzLmJvdHRvbSkpO1xuICAgIH0sXG5cbn0pO1xuXG5mdW5jdGlvbiBsb2FkSlModXJsLCBjYWxsYmFjaywgZWwpIHtcbiAgICB2YXIgaXNJRSA9ICEhd2luZG93LkFjdGl2ZVhPYmplY3QsXG4gICAgICAgIGlzSUU2ID0gaXNJRSAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0LFxuICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLFxuICAgICAgICBoZWFkID0gaXNJRTYgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlKSB7XG4gICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImxvYWRlZFwiIHx8IHNjcmlwdC5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIGlmIChlbCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFlhc3VrbyDphY3nva7mlofku7ZcbiAqIOWkmuivtOivhOiuuuiwg+eUqOetiVxuICovXG5cbnZhciBHZW5lcmFsID0ge1xuICAgIGlzTW9iaWxlOiBmYWxzZSxcbiAgICBpc1dlY2hhdDogZmFsc2UsXG4gICAgdmlld1dpZHRoOiAkKHdpbmRvdykud2lkdGgoKSxcbiAgICBhYnNVcmw6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgIHZhciBVQSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIGlzQW5kcm9pZCA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvYW5kcm9pZC9naSk7XG4gICAgICAgIHZhciBpc0lQaG9uZSA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvaXBob25lL2dpKTtcbiAgICAgICAgaWYgKFVBLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSBcIm1pY3JvbWVzc2VuZ2VyXCIpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNXZWNoYXQgPSB0cnVlO1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCd3ZWNoYXQtd2VidmlldycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIWlzQW5kcm9pZCkge1xuICAgICAgICAgICAgR2VuZXJhbC5pc01vYmlsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICBHZW5lcmFsLnVwZGF0ZUltYWdlV2lkdGgoKTtcbiAgICAgICAgICAgIEdlbmVyYWwucmV3YXJkTG9hZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBHZW5lcmFsLndlYkZvbnRMb2FkZXIoKTtcbiAgICAgICAgR2VuZXJhbC5zY3JvbGxUb1BvcygpO1xuICAgIH0sXG4gICAgdXBkYXRlSW1hZ2VXaWR0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkcG9zdENvbnRlbnQgPSAkKFwiLnBvc3QtY29udGVudFwiKTtcbiAgICAgICAgLy8gJHBvc3RDb250ZW50LmZpdFZpZHMoKTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbWFnZVdpZHRoKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSAkcG9zdENvbnRlbnQub3V0ZXJXaWR0aCgpLCAvLyBXaWR0aCBvZiB0aGUgY29udGVudFxuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSB0aGlzLm5hdHVyYWxXaWR0aDsgLy8gT3JpZ2luYWwgaW1hZ2UgcmVzb2x1dGlvblxuXG4gICAgICAgICAgICBpZiAoaW1hZ2VXaWR0aCA+PSBjb250ZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnZnVsbC1pbWcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2luZ2xlLXBvc3QtaW5uZXIgaW1nXCIpLm9uKCdsb2FkJywgdXBkYXRlSW1hZ2VXaWR0aCk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2FzcGVyRnVsbEltZygpIHtcbiAgICAgICAgICAgICRpbWcuZWFjaCh1cGRhdGVJbWFnZVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc3BlckZ1bGxJbWcoKTtcbiAgICB9LFxuXG4gICAgLy8gR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC5taW4uY3NzJyAvLyDov5nkuKrmmK8gRXhvIOWtl+S9k++8jOiAg+iZkeS4jeWKoOi9veWugyzmj5Dpq5jml7bpl7RcbiAgICB3ZWJGb250TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgV2ViRm9udENvbmZpZyA9IHtcbiAgICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIGZvbnQnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICBmYW1pbGllczogWydpY29uZm9udCcsICdmb250YXdlc29tZSddLFxuICAgICAgICAgICAgICAgIHVybHM6IFsnaHR0cHM6Ly9pbWcuaGFsZnJvc3QuY29tL2ljb25mb250cy9pY29uZm9udC5jc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcydcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9veWtl+S9k0pTJyk7XG4gICAgICAgICAgICBXZWJGb250LmxvYWQoe1xuICAgICAgICAgICAgICAgIGN1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICBmYW1pbGllczogWydpY29uZm9udCcsICdmb250YXdlc29tZSddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvL+W5s+a7kea7muWKqOWIsOmhtumDqFxuICAgIHNjcm9sbFRvUG9zOiBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICB2YXIgU1RSX1RPX1RPUCA9ICfmiJHopoHpo57liLDmnIDpq5gnLFxuICAgICAgICAgICAgY292ZXJIZWlnaHQgPSBwb3NpdGlvbiB8fCAkKHdpbmRvdykuaGVpZ2h0KCk7IC8v6I635b6X5Zu+54mH6auY5bqmXG4gICAgICAgIHZhciBidXR0b24gPSAkKCc8YSBocmVmPVwiI1wiIGlkPVwidG8tdG9wXCIgdGl0bGU9XCInICsgU1RSX1RPX1RPUCArICdcIj4gPGRpdiBjbGFzcz1cInRvLXRvcC13cmFwXCI+PC9kaXY+PC9hPicpLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gJCh3aW5kb3cpLmhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZmFkZU91dCg1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXG4gICAgICAgICAgICB9LCA2NjYsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmiJHot7MnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKue7meaWh+eroOS4reeahHVybOa3u+WKoGljb25mb2505pa55L6/6K+G5YirKi9cbiAgICB1cmxJY29ubGl6ZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkb21haW4sXG4gICAgICAgICAgICBfb3V0cHV0O1xuICAgICAgICB2YXIgaWNvbkZvbnRUYWcgPSAnaWNvbmZvbnQnO1xuICAgICAgICB2YXIgaWNvbk1hcCA9IHsgLyrntKLlvJUg5Y+v5Zyo6L+Z6YeM5re75Yqg5Yy56YWN6KeE5YiZKi9cbiAgICAgICAgICAgICd0d2l0dGVyJzogJ2ljb25mb250LXR3aXR0ZXIgaWNvbi1pY29uZm9udHR3aXR0ZXInLFxuICAgICAgICAgICAgJ3F6b25lJzogJ2ljb25mb250LXF6b25lIGljb24tcXpvbmUnLFxuICAgICAgICAgICAgJ3dlaWJvJzogJ2ljb25mb250LXdlaWJvIGljb24taWNvbmZvbnR3ZWlibycsXG4gICAgICAgICAgICAnZmFjZWJvb2snOiAnaWNvbmZvbnQtZmFjZWJvb2sgaWNvbi1pY29uZm9udGZhY2Vib29rJyxcbiAgICAgICAgICAgICdnaXRodWInOiAnaWNvbmZvbnQtZ2l0aHViIGljb24tZ2l0aHViJyxcbiAgICAgICAgICAgICdkb3ViYW4nOiAnaWNvbmZvbnQtZG91YmFuIGljb24taWNvbmZvbnRkb3ViYW4nLFxuICAgICAgICAgICAgJ2dvb2dsZSc6ICdpY29uZm9udC1nb29nbGUgaWNvbi1pY29uZm9udGdvb2dsZScsXG4gICAgICAgICAgICAnbHVvbGVpJzogJ2ljb25mb250LWx1b2xlaSBpY29uLWx1b2xlaScsXG4gICAgICAgICAgICAnZHJpYmJsZSc6ICdpY29uZm9udC1kcmliYmxlIGljb24tZHJpYmJibGVjaXJjbGVkJyxcbiAgICAgICAgICAgICd2MmV4JzogJ2ljb25mb250LXYyZXggaWNvbi1pY29uZm9udHYyZXgnLFxuICAgICAgICAgICAgJ3poaWh1JzogJ2ljb25mb250LXpoaWh1IGljb24taWNvbmZvbnR6aGlodScsXG4gICAgICAgICAgICAnd2lraXBlZGlhJzogJ2ljb25mb250LXdpa2lwZWRpYSBpY29uLWljb25mb250d2lraXBlZGlhJyxcbiAgICAgICAgICAgICdqaWFuc2h1JzogJ2ljb25mb250LWppYW5zaHUgaWNvbi1qaWFuc2h1JyxcbiAgICAgICAgICAgICd5b3VrdSc6ICdpY29uZm9udC15b3VrdSBpY29uLWljb25mb250eW91a3UnLFxuICAgICAgICAgICAgJ3lvdXR1YmUnOiAnaWNvbmZvbnQteW91dHViZSBpY29uLXlvdXR1YmUnLFxuICAgICAgICAgICAgJ2p1ZWppbic6J2ljb25mb250LWp1ZWppbiBpY29uLWp1ZWppbicsXG4gICAgICAgICAgICAnd2VpeGluJzonaWNvbmZvbnQtd2VpeGluIGljb24taWNvbmZvbnR3ZWNoYXQnLFxuICAgICAgICAgICAgJ3NlZ21lbnRmYXVsdCc6J2ljb25mb250LXNmIGljb24taWNvbnNmLWNvcHknXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpY29uTWFwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGljb25NYXBbbmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgTWFwS2V5ID0gbmFtZTtcbiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoTWFwS2V5KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbiA9IE1hcEtleTtcbiAgICAgICAgICAgICAgICAgICAgX291dHB1dCA9IGljb25NYXBbTWFwS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX291dHB1dDtcbiAgICB9LFxuICAgIGFkZEljb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLyrnu5nljZrlrqLmlofnq6DlnLDlnYB1cmzmt7vliqBpY2/or4bliKsqL1xuICAgICAgICAkKCcuc2luZ2xlLXBvc3QtaW5uZXIgIGE6bm90KDpoYXMoaW1nKSknKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIHZhciBfc3JjID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgdG1wLmhyZWYgPSBfc3JjO1xuICAgICAgICAgICAgX3NlbGZEb21haW4gPSB0bXAuaG9zdG5hbWU7XG4gICAgICAgICAgICBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coX3NlbGZEb21haW4pO1xuICAgICAgICAgICAgJCh0aGlzKS5wcmVwZW5kKCc8aSBjbGFzcz1cImljb25mb250ICcgKyBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKSArICdcIj48L2k+Jyk7XG4gICAgICAgICAgICB2YXIgX3NlbGZDb2xvciA9ICQodGhpcykuZmluZCgnaScpLmNzcygnY29sb3InKSxcbiAgICAgICAgICAgICAgICBfb3JpZ2luYWxDb2xvciA9ICQodGhpcykuY3NzKCdjb2xvcicpO1xuXG4gICAgICAgICAgICAvKum8oOagh+aCrOa1ruaXtiovXG4gICAgICAgICAgICAkKHRoaXMpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9zZWxmQ29sb3IpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHB1bHNlJyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfb3JpZ2luYWxDb2xvcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy/miZPotY9cbiAgICByZXdhcmRMb2FkZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBsb2FkUVIgPSB7XG4gICAgICAgICAgICBhbGlwYXk6ICcvYXNzZXRzL2ltYWdlcy9xci1hbGlwYXktMjU1LnBuZycsXG4gICAgICAgICAgICB3ZWNoYXQ6ICcvYXNzZXRzL2ltYWdlcy9xci13ZWNoYXQtMjU1LnBuZydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGxvYWRRUlVybDtcbiAgICAgICAgaWYgKCEhR2VuZXJhbC5pc1dlY2hhdCkge1xuICAgICAgICAgICAgJCgnLndlY2hhdC1jb2RlIGInKS5odG1sKCfplb/mjInkuIrmlrnkuoznu7TnoIHmiZPotY/kvZzogIUnKTtcbiAgICAgICAgICAgIC8vICQoJy5xci1jb2RlJykuZmFkZU91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aCrOa1ricpO1xuICAgICAgICAgICAgJCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgODAwKTtcblxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgICBpc1dlYlBTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIGlzSW1hZ2VDb21wcmVzc2VkOiBmYWxzZSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgICB9LFxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcblxuICAgIH0sXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgVGVzdEltYWdlcyA9IHtcbiAgICAgICAgICAgIGRlbW86IFwiVWtsR1Jrb0FBQUJYUlVKUVZsQTRXQW9BQUFBUUFBQUFBQUFBQUFBQVFVeFFTQXNBQUFBQkJ4QVJFWWlJL2djQUFBQldVRGdnR0FBQUFEQUJBSjBCS2dFQUFRQUJBQndscEFBRGNBRCsvZ2JRQUE9PVwiXG4gICAgICAgIH07XG4gICAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnDlk6YnKTtcbiAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGltZy53aWR0aCA+IDApICYmIChpbWcuaGVpZ2h0ID4gMCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJwJyk7XG4gICAgICAgICAgICAvLyBhbGVydCgn5pSv5oyBJylcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiN5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlcy5kZW1vO1xuXG4gICAgfSxcbiAgICBpbWdMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3pu5jorqTlm77niYcnKTtcbiAgICB9LFxuICAgIHdlYlBMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb13ZWJQJyk7XG4gICAgICAgIC8vIGFsZXJ0KEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkKTtcbiAgICAgICAgaWYgKEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflrr3luqbmmK8nICsgR2VuZXJhbC52aWV3V2lkdGgpO1xuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDE1MDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmma7pgJrmlK/mjIEnKVxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGNvbnRlbnRcblx0XHQvLyAkKCcuc2Nyb2xsLWRvd24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0Ly8gXHR2YXIgJGNvdmVyID0gJCh0aGlzKS5jbG9zZXN0KCcuY292ZXInKTtcblx0XHQvLyBcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcblx0XHQvLyBcdFx0c2Nyb2xsVG9wOiAkY292ZXIucG9zaXRpb24oKS50b3AgKyAkY292ZXIuaGVpZ2h0KClcblx0XHQvLyBcdH0sIDgwMCApO1xuXHRcdC8vIFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vIH0pO1xuXG4gICAgLy8gYWRqdXN0Q292ZXIoKTtcbiAgICAvLyB2YXIgbGF6eVJlc2l6ZSA9IGRlYm91bmNlKGFkanVzdENvdmVyLCAyMDAsIGZhbHNlKTtcbiAgICAvLyAkKHdpbmRvdykucmVzaXplKGxhenlSZXNpemUpO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGNvbnRlbnRcbiAgICB2YXIgc2Nyb2xsSGludCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JvbGwtaGludCcpO1xuICAgIGlmIChzY3JvbGxIaW50ICE9PSBudWxsKSB7XG4gICAgICAvLyAgIHNjcm9sbEhpbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vICAgICBpZiAoIXNjcm9sbEhpbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpXG4gICAgICAvLyAgICAgICAgIHJldHVybjtcbiAgICAgIC8vICAgICAgIHdpbmRvdy5zY3JvbGxCeSh7XG4gICAgICAvLyAgICAgICAgIHRvcDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgLy8gICAgICAgICBsZWZ0OiAwLFxuICAgICAgLy8gICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgIC8vICAgICB9KTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyBTY3JvbGwgdG8gY29udGVudFxuXHRcdCQoJy5oZWFkZXItc2Nyb2xsLWhpbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgJGNvdmVyID0gJCh0aGlzKS5jbG9zZXN0KCcuY292ZXInKTtcblx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcblx0XHRcdFx0c2Nyb2xsVG9wOiAkY292ZXIucG9zaXRpb24oKS50b3AgKyAkY292ZXIuaGVpZ2h0KClcblx0XHRcdH0sIDQwMCApO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXG4gICAgICAvLyAkKCcuY292ZXIgLmFycm93LWRvd24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsnc2Nyb2xsVG9wJzogJCgnLmNvdmVyJykuaGVpZ2h0KCl9LCA4MDApO1xuICAgICAgLy8gICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyB9KTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgaWYgKHNjcm9sbFRvcCA+IDApIHtcbiAgICAgICAgICAgICAgc2Nyb2xsSGludC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2Nyb2xsSGludC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgaWYgKHNjcm9sbFRvcCA+IDApIHtcbiAgICAgICAgICAgICAgc2Nyb2xsSGludC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2Nyb2xsSGludC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRqdXN0Q292ZXIoKSB7XG5cdFx0ICAgIHNldEVsZW1lbnRIZWlnaHQoJy5wb3N0LWhlYWRlci5jb3ZlcicpO1xuXHQgIH1cblxuICAgIC8v5Yid5aeL5YyWIHRvYyDmj5Lku7ZcbiAgICAkKCcjdG9jJykuaW5pdFRPQyh7XG4gICAgICAgIHNlbGVjdG9yOiBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIixcbiAgICAgICAgc2NvcGU6IFwiYXJ0aWNsZVwiLFxuICAgICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgICBwcmVmaXg6IFwidG9jXCJcbiAgICB9KTtcblxuICAgIC8v5Yqo5oCB6K6+572u5qC35byPLOS+i+Wmgjrmu5rliqjliLDkuIDlrprnqIvluqbkuYvlkI7pmpDol4/nm67lvZVcbiAgICAvLyB2YXIgbWFyX2xlZnQgPSAkKFwiLnBvc3RcIikud2lkdGgoKSAvIDIgKyAyMDtcbiAgICAvL3ZhciB0b3AgPSAkKFwiI3RvY1wiKS5jc3MoXCJ0b3BcIik7ICDov5nlj6rog73ojrflj5bnsbvkvLwxNTJweOeahOWtl+espuS4sizkuIvpnaLmiY3og73ojrflj5blgLxcbiAgICAvL3ZhciB0b3AgPSAkKFwiI3RvY1wiKS5wb3NpdGlvbigpLnRvcDtcbiAgICAvLyB2YXIgdG9wID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgIC8vICQoXCIjdG9jXCIpLmNzcyhcInRvcFwiLHRvcCAvIDItICh0b3AgLyA0KStcInB4XCIpO1xuICAgIC8vICQoXCIjdG9jIG9sXCIpLmh0bWwoZnVuY3Rpb24oaSxvcmlnVGV4dCl7XG4gICAgLy8gICAgIHJldHVybiBvcmlnVGV4dCArIFwiPGxpPjxhIGlkPSdzY3JvbGxUb3AnIGhyZWY9JyMnPui/lOWbnumhtumDqDwvYT48L2xpPlwiO1xuICAgIC8vIH0pO1xuICAgIC8vICQoXCIjdG9jXCIpLmNzcyh7XCJtYXJnaW4tbGVmdFwiOm1hcl9sZWZ0K1wicHhcIn0pO1xuXG4gICAgLy8gJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xuICAgIC8vICAgICB2YXIgd2luZG93X29mZnNldCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAvLyAgICAgdmFyIG1haW5faGVhZGVyX2hlaWdodCA9ICQoXCIubWFpbi1oZWFkZXJcIikuaGVpZ2h0KCk7XG4gICAgLy8gICAgIHZhciBjb250ZW50X2hlaWdodCA9ICQoXCIuY29udGVudFwiKS5oZWlnaHQoKTtcbiAgICAvLyAgICAgaWYod2luZG93X29mZnNldCA8IG1haW5faGVhZGVyX2hlaWdodCAtIDEwMCkge1xuICAgIC8vICAgICAgICAgJChcIiN0b2NcIikuaGlkZSgpO1xuICAgIC8vICAgICAgICAgLy/kuIvpnaLnmoTmnaHku7bkuI3og73nlKggYT54PmPov5nnp43lvaLlvI8s5Y+q6IO955SoJiYu6Lqr5Li65LiA5Liq5YmN56uv5bCP55m96KGo56S65Lyk5LiN6LW3Li4uXG4gICAgLy8gICAgIH1lbHNlIGlmKHdpbmRvd19vZmZzZXQgPiBtYWluX2hlYWRlcl9oZWlnaHQmJm1haW5faGVhZGVyX2hlaWdodCtjb250ZW50X2hlaWdodCAtIDUwMCA+IHdpbmRvd19vZmZzZXQpIHtcbiAgICAvLyAgICAgICAgICQoXCIjdG9jXCIpLnNob3coKTtcbiAgICAvLyAgICAgfWVsc2V7XG4gICAgLy8gICAgICAgICAkKFwiI3RvY1wiKS5oaWRlKCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcblxuXHQgIC8vIFNldCB0aGUgbmV3IGhlaWdodCBvZiBhbiBlbGVtZW50XG5cdCAgZnVuY3Rpb24gc2V0RWxlbWVudEhlaWdodChlbGVtZW50KXtcblx0XHQgICAgdmFyIHdpbmRvd0hlaWdodCA9ICggdHJ1ZT09PWlzaVBvZCgpICYmIHRydWU9PT1pc1NhZmFyaSgpICkgPyB3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0IDogJCh3aW5kb3cpLmhlaWdodCgpO1xuXHRcdCAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSAkKCcuc2l0ZS1oZWFkZXInKS5vdXRlckhlaWdodCgpO1xuXHRcdCAgICAgICAgdmFyIG5ld0hlaWdodCA9IHdpbmRvd0hlaWdodDtcblx0XHQgICAgICAgICAgaWYgKCAkKGVsZW1lbnQpLmZpbmQoJy5zY3JvbGwtZG93bicpLmlzKCc6aGlkZGVuJykgKSB7XG5cdFx0XHQgICAgICAgICAgICAgJChlbGVtZW50KS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0ICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnLmNvdmVyLWJnJykuY3NzKCd0b3AnLCcnKTtcblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgICBlbHNlIHtcblx0XHRcdCAgICAgICAgICAgICAkKGVsZW1lbnQpLm91dGVySGVpZ2h0KG5ld0hlaWdodCk7XG5cdFx0XHQgICAgICAgICAgICAgICAgJChlbGVtZW50KS5maW5kKCcuY292ZXItYmcnKS5jc3MoJ3RvcCcsb2Zmc2V0SGVpZ2h0KTtcblx0XHQgICAgICAgICAgfVxuXHQgIH1cblxuXHQgIC8vIFRocm90dGxlcyBhbiBhY3Rpb24uXG5cdCAgLy8gVGFrZW4gZnJvbSBVbmRlcnNjb3JlLmpzLlxuXHQgIGZ1bmN0aW9uIGRlYm91bmNlIChmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcblx0XHQgICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHRcdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdCAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuXHRcdFx0ICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcblx0XHRcdCAgICAgICAgIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG5cdFx0XHQgICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICAgICAgICAgICAgdmFyIGxhc3QgPSAobmV3IERhdGUoKSkgLSB0aW1lc3RhbXA7XG5cdFx0XHRcdCAgICAgICAgICAgIGlmIChsYXN0IDwgd2FpdCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHRcdFx0XHQgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuXHRcdFx0XHRcdFx0ICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICB9XG5cdFx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgIH07XG5cdFx0XHQgICAgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0XHRcdCAgICAgICAgICAgIGlmICghdGltZW91dCkge1xuXHRcdFx0XHQgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgICAgICAgICAgaWYgKGNhbGxOb3cpIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHQgICAgcmV0dXJuIHJlc3VsdDtcblx0XHQgICAgICB9O1xuXHQgIH1cblxuXHQgIC8vIENoZWNrIGlmIGRldmljZSBpcyBhbiBpUGhvbmUgb3IgaVBvZFxuXHQgIGZ1bmN0aW9uIGlzaVBvZCgpe1xuXHRcdCAgICByZXR1cm4oLyhpUGhvbmV8aVBvZCkvZykudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICB9XG5cblx0ICAvLyBDaGVjayBpZiBicm93c2VyIGlzIFNhZmFyaVxuXHQgIGZ1bmN0aW9uIGlzU2FmYXJpKCl7XG5cdFx0ICAgIHJldHVybigtMSE9PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSk7XG5cdCAgfVxuXG5cdFx0Ly8gSGlkZGVuIHNlY3Rpb25zXG5cdFx0JCgnLnNpZGViYXItdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHQvLyAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7IOWIh+aNouexu+WIq+WPr+S7peebtOaOpeeUqCB0b2dnbGVDbGFzc1xuICAgICAgaWYgKCAkKCdib2R5JykuaGFzQ2xhc3MoJ3NpZGViYXItb3BlbmVkJykgKSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc2lkZWJhci1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdzY3JvbGwnKTsgLy8g5oGi5aSNIGJvZHnvvIzlhYHorrjkuIvlsYLmu5Hliqhcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnc2lkZWJhci1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTsgLy8g6ZSB5a6aIGJvZHnvvIznpoHmraLkuIvlsYLmu5Hliqhcblx0XHRcdH1cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuXHRcdCQoJy5zZWFyY2gtdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRpZiAoICQoJ2JvZHknKS5oYXNDbGFzcygnc2VhcmNoLW9wZW5lZCcpICkge1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdzY3JvbGwnKTsgLy8g5oGi5aSNIGJvZHnvvIzlhYHorrjkuIvlsYLmu5Hliqhcblx0XHRcdFx0c2VhcmNoRmllbGQuY2xlYXIoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnc2VhcmNoLW9wZW5lZCcpO1xuICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsJ2hpZGRlbicpOyAvLyDplIHlrpogYm9kee+8jOemgeatouS4i+Wxgua7keWKqFxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoJyNzZWFyY2gtZmllbGQnKS5mb2N1cygpO1xuXHRcdFx0XHR9LCAzMDApO1xuXHRcdFx0fVxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdCQoJy5vdmVybGF5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NpZGViYXItb3BlbmVkIHNlYXJjaC1vcGVuZWQnKTtcbiAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHRzZWFyY2hGaWVsZC5jbGVhcigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXG4gICAgLy8gU2hvdyBjb21tZW50c1xuXHRcdGlmICggdHlwZW9mIGRpc3F1c19zaG9ydG5hbWUgIT09ICd1bmRlZmluZWQnICkge1xuXHRcdFx0dmFyIGRpc3F1c19sb2FkZWQgPSBmYWxzZTtcblx0XHRcdCQoJy5jb21tZW50cy10aXRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgX3RoaXMgPSAkKHRoaXMpO1xuXHRcdFx0XHRpZiAoICEgZGlzcXVzX2xvYWRlZCApIHtcblx0XHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0XHRcdFx0XHRcdHVybDogXCIvL1wiICsgZGlzcXVzX3Nob3J0bmFtZSArIFwiLmRpc3F1cy5jb20vZW1iZWQuanNcIixcblx0XHRcdFx0XHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdFx0XHRcdFx0Y2FjaGU6IHRydWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRfdGhpcy5hZGRDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdGRpc3F1c19sb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoJyNkaXNxdXNfdGhyZWFkJykuc2xpZGVUb2dnbGUoKTtcblx0XHRcdFx0XHRpZiAoIF90aGlzLmhhc0NsYXNzKCd0b2dnbGVkLW9uJykgKSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5yZW1vdmVDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5hZGRDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG4gICAgJC5mbi5sYXp5bG9hZCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcztcbiAgICAgICAgdmFyICRjb250YWluZXI7XG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgICAgIGZhaWx1cmVfbGltaXQ6IDAsXG4gICAgICAgICAgICBldmVudDogXCJzY3JvbGxcIixcbiAgICAgICAgICAgIGVmZmVjdDogXCJzaG93XCIsXG4gICAgICAgICAgICBjb250YWluZXI6IHdpbmRvdyxcbiAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiBcIm9yaWdpbmFsXCIsXG4gICAgICAgICAgICBza2lwX2ludmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBhcHBlYXI6IG51bGwsXG4gICAgICAgICAgICBsb2FkOiBudWxsLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCIsXG4gICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICBpc19zY2FsZTogZmFsc2UsXG4gICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2tpcF9pbnZpc2libGUgJiYgISR0aGlzLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJC5hYm92ZXRoZXRvcCh0aGlzLCBzZXR0aW5ncykgfHxcbiAgICAgICAgICAgICAgICAgICAgJC5sZWZ0b2ZiZWdpbih0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogTm90aGluZy4gKi9cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEkLmJlbG93dGhlZm9sZCh0aGlzLCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAgICAgICAgICAgISQucmlnaHRvZmZvbGQodGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIC8qIGlmIHdlIGZvdW5kIGFuIGltYWdlIHdlJ2xsIGxvYWQsIHJlc2V0IHRoZSBjb3VudGVyICovXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50ZXIgPiBzZXR0aW5ncy5mYWlsdXJlX2xpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8qIE1haW50YWluIEJDIGZvciBhIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZmFpbHVyZWxpbWl0KSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsdXJlX2xpbWl0ID0gb3B0aW9ucy5mYWlsdXJlbGltaXQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5lZmZlY3RzcGVlZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZWZmZWN0X3NwZWVkID0gb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogQ2FjaGUgY29udGFpbmVyIGFzIGpRdWVyeSBhcyBvYmplY3QuICovXG4gICAgICAgICRjb250YWluZXIgPSAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSA/ICR3aW5kb3cgOiAkKHNldHRpbmdzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgLyogRmlyZSBvbmUgc2Nyb2xsIGV2ZW50IHBlciBzY3JvbGwuIE5vdCBvbmUgc2Nyb2xsIGV2ZW50IHBlciBpbWFnZS4gKi9cbiAgICAgICAgaWYgKDAgPT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICRjb250YWluZXIuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+a7muWKqOS6hjExMScpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqgnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG5cbiAgICAgICAgICAgIHNlbGYubG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qIElmIG5vIHNyYyBhdHRyaWJ1dGUgZ2l2ZW4gdXNlIGRhdGE6dXJpLiAqL1xuICAgICAgICAgICAgaWYgKCRzZWxmLmF0dHIoXCJzcmNcIikgPT09IHVuZGVmaW5lZCB8fCAkc2VsZi5hdHRyKFwic3JjXCIpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHNldHRpbmdzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogV2hlbiBhcHBlYXIgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UuICovXG4gICAgICAgICAgICAkc2VsZi5vbmUoXCJhcHBlYXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwcGVhci5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxLnNlbGYuYXR0ciA9ICcsJHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJkYXRhLVwiICsgc2V0dGluZ3MuZGF0YV9hdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJkYXRhLW9yaWdpbmFsXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcInNyY1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+a1i+ivlSA9ICcsJHNlbGYuc3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgPSAkc2VsZi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWRVcmwgPSAnLHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WbvueJh+WcsOWdgCcgK3VwZGF0ZWRVcmwuaW5kZXhPZignaW1nLmhhbGZyb3N0LmNvbScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDRE7lnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ2ZpbGUuaXMyNi5jb20nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwuaW5kZXhPZignaW1nLmhhbGZyb3N0LmNvbScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFkdmFuY2VkX2xvYWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJz9pbWFnZVZpZXcyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuaXNfc2NhbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy8wL3cvJyArIHNldHRpbmdzLnNjYWxlX3dpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT09IHRydWUgJiYgc2V0dGluZ3MuaXNfc2NhbGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvMC9mb3JtYXQvd2VicCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLndlYlBfbG9hZCA9PT0gdHJ1ZSAmJiBzZXR0aW5ncy5pc19zY2FsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Zvcm1hdC93ZWJwJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdXBwb3J0IFNhZmFyaSBhbmQgaU9TXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT09IGZhbHNlICYmIHVwZGF0ZWRVcmwuaW5kZXhPZignaHR0cHM6Ly9pbWcuaGFsZnJvc3QuY29tL0Jsb2cvQXJ0aWNsZVRpdGxlSW1hZ2UvYmFja2dyb3VuZC1jb3Zlcl8ucG5nJykgPiAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsID0gJ2h0dHBzOi8vaW1nLmhhbGZyb3N0LmNvbS9CbG9nL0FydGljbGVUaXRsZUltYWdlL2JhY2tncm91bmQtY292ZXJfLnBuZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHVwZGF0ZWRVcmwuaW5kZXhPZignaHR0cHM6Ly9pbWcuaGFsZnJvc3QuY29tL0Jsb2cvQXJ0aWNsZVRpdGxlSW1hZ2UvYmFja2dyb3VuZC1jb3Zlcl8ucG5nJykgPiAtMSAmJiBzZXR0aW5ncy53ZWJQX2xvYWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB1cGRhdGVkVXJsID0gJ2h0dHBzOi8vaW1nLmhhbGZyb3N0LmNvbS9CbG9nL0FydGljbGVUaXRsZUltYWdlL2JhY2tncm91bmQtY292ZXJfLnBuZz9pbWFnZVZpZXcyLzAvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Lit6Ze05omT5Y2wdXBkYXRlZFVybCcsdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKuS4remXtOaJk+WNsCBpbWcuc3JjID0gJywkc2VsZi5hdHRyKFwic3JjXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnKioqKioqKioq5Lit6Ze05omT5Y2wIGltZyA9ICcsJChcIjxpbWcgLz5cIikpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoXCI8aW1nIC8+XCIpLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKmltZy5zcmMgPSAnLCRzZWxmLmF0dHIoXCJzcmNcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoJ1wiICsgdXBkYXRlZFVybCArIFwiJylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKmJhY2tncm91bmQtaW1hZ2UgPSAnLCRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZltzZXR0aW5ncy5lZmZlY3RdKHNldHRpbmdzLmVmZmVjdF9zcGVlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgaW1hZ2UgZnJvbSBhcnJheSBzbyBpdCBpcyBub3QgbG9vcGVkIG5leHQgdGltZS4gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9ICQuZ3JlcChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQubG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJCh0ZW1wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXG4gICAgICAgICAgICAvKiBieSB0cmlnZ2VyaW5nIGFwcGVhci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBDaGVjayBpZiBzb21ldGhpbmcgYXBwZWFycyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLiAqL1xuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogV2l0aCBJT1M1IGZvcmNlIGxvYWRpbmcgaW1hZ2VzIHdoZW4gbmF2aWdhdGluZyB3aXRoIGJhY2sgYnV0dG9uLiAqL1xuICAgICAgICAvKiBOb24gb3B0aW1hbCB3b3JrYXJvdW5kLiAqL1xuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcbiAgICAgICAgICAgICR3aW5kb3cuYmluZChcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBGb3JjZSBpbml0aWFsIGNoZWNrIGlmIGltYWdlcyBzaG91bGQgYXBwZWFyLiAqL1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cbiAgICAvKiBVc2UgYXMgICQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHt0aHJlc2hvbGQgOiAxMDAsIGNvbnRhaW5lciA6IHdpbmRvd30pICovXG5cbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAkd2luZG93LmhlaWdodCgpKSArICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy53aWR0aCgpICsgJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS5oZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xuICAgIH07XG5cbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQubGVmdG9mYmVnaW4oZWxlbWVudCwgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAhJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmFib3ZldGhldG9wKGVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9O1xuXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xuICAgIC8qIFVzZSBhcyAkKFwiaW1nOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIG9yICovXG4gICAgLyogJChcImltZ1wiKS5maWx0ZXIoXCI6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgd2hpY2ggaXMgZmFzdGVyICovXG5cbiAgICAkLmV4dGVuZCgkLmV4cHJbXCI6XCJdLCB7XG4gICAgICAgIFwiYmVsb3ctdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImFib3ZlLXRoZS10b3BcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImluLXZpZXdwb3J0XCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmludmlld3BvcnQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgIFwiYWJvdmUtdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIEdlbmVyYWwuaW5pdCgpO1xuICAgIEltYWdlU21hcnRMb2FkZXIuaW5pdCgpO1xuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICBHZW5lcmFsLmFkZEljb25zKCk7XG4gICAgfVxuXG4gICAgLy8gU2l0ZSBzZWFyY2hcbiAgICAvLyB2YXIgc2VhcmNoRmllbGQgPSAkKCcjc2VhcmNoLWZpZWxkJykuZ2hvc3RIdW50ZXIoe1xuICAgIC8vICAgcmVzdWx0cyA6IFwiI3NlYXJjaC1yZXN1bHRzXCIsXG4gICAgLy8gICBvbktleVVwIDogdHJ1ZSxcbiAgICAvLyAgIG9uUGFnZUxvYWQgOiB0cnVlLFxuICAgIC8vICAgaW5jbHVkZXBhZ2VzIDogdHJ1ZSxcbiAgICAvLyAgIGluZm9fdGVtcGxhdGUgOiAnPGRpdiBjbGFzcz1cInJlc3VsdHMtaW5mb1wiPlBvc3RzIGZvdW5kOiB7e2Ftb3VudH19PC9kaXY+JyxcbiAgICAvLyAgIHJlc3VsdF90ZW1wbGF0ZSA6ICc8ZGl2IGNsYXNzPVwicmVzdWx0LWl0ZW1cIj48YSBocmVmPVwie3tsaW5rfX1cIj48ZGl2IGNsYXNzPVwicmVzdWx0LXRpdGxlXCI+e3t0aXRsZX19PC9kaXY+PGRpdiBjbGFzcz1cInJlc3VsdC1kYXRlXCI+e3twdWJEYXRlfX08L2Rpdj48L2E+PC9kaXY+J1xuICAgIC8vIH0pO1xufSk7XG4iLCIvKipcbiogZ2hvc3RIdW50ZXIgLSAwLjUuMFxuICogQ29weXJpZ2h0IChDKSAyMDE0IEphbWFsIE5ldWZlbGQgKGphbWFsQGkxMXUubWUpXG4gKiBNSVQgTGljZW5zZWRcbiAqIEBsaWNlbnNlXG4qL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gIC8qKlxuICogbHVuciAtIGh0dHA6Ly9sdW5yanMuY29tIC0gQSBiaXQgbGlrZSBTb2xyLCBidXQgbXVjaCBzbWFsbGVyIGFuZCBub3QgYXMgYnJpZ2h0IC0gMi4xLjVcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbjsoZnVuY3Rpb24oKXtcblxuLyoqXG4gKiBBIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjb25maWd1cmluZyBhbmQgY29uc3RydWN0aW5nXG4gKiBhIG5ldyBsdW5yIEluZGV4LlxuICpcbiAqIEEgbHVuci5CdWlsZGVyIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIHRoZSBwaXBlbGluZSBzZXR1cFxuICogd2l0aCBhIHRyaW1tZXIsIHN0b3Agd29yZCBmaWx0ZXIgYW5kIHN0ZW1tZXIuXG4gKlxuICogVGhpcyBidWlsZGVyIG9iamVjdCBpcyB5aWVsZGVkIHRvIHRoZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uXG4gKiB0aGF0IGlzIHBhc3NlZCBhcyBhIHBhcmFtZXRlciwgYWxsb3dpbmcgdGhlIGxpc3Qgb2YgZmllbGRzXG4gKiBhbmQgb3RoZXIgYnVpbGRlciBwYXJhbWV0ZXJzIHRvIGJlIGN1c3RvbWlzZWQuXG4gKlxuICogQWxsIGRvY3VtZW50cyBfbXVzdF8gYmUgYWRkZWQgd2l0aGluIHRoZSBwYXNzZWQgY29uZmlnIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgaWR4ID0gbHVucihmdW5jdGlvbiAoKSB7XG4gKiAgIHRoaXMuZmllbGQoJ3RpdGxlJylcbiAqICAgdGhpcy5maWVsZCgnYm9keScpXG4gKiAgIHRoaXMucmVmKCdpZCcpXG4gKlxuICogICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XG4gKiAgICAgdGhpcy5hZGQoZG9jKVxuICogICB9LCB0aGlzKVxuICogfSlcbiAqXG4gKiBAc2VlIHtAbGluayBsdW5yLkJ1aWxkZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICogQHNlZSB7QGxpbmsgbHVuci50cmltbWVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5zdG9wV29yZEZpbHRlcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuc3RlbW1lcn1cbiAqIEBuYW1lc3BhY2Uge2Z1bmN0aW9ufSBsdW5yXG4gKi9cbnZhciBsdW5yID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICB2YXIgYnVpbGRlciA9IG5ldyBsdW5yLkJ1aWxkZXIoKTtcblxuICBidWlsZGVyLnBpcGVsaW5lLmFkZChcbiAgICBsdW5yLnRyaW1tZXIsXG4gICAgbHVuci5zdG9wV29yZEZpbHRlcixcbiAgICBsdW5yLnN0ZW1tZXJcbiAgKTtcblxuICBidWlsZGVyLnNlYXJjaFBpcGVsaW5lLmFkZChcbiAgICBsdW5yLnN0ZW1tZXJcbiAgKTtcblxuICBjb25maWcuY2FsbChidWlsZGVyLCBidWlsZGVyKTtcbiAgcmV0dXJuIGJ1aWxkZXIuYnVpbGQoKTtcbn07XG5cbmx1bnIudmVyc2lvbiA9IFwiMi4xLjVcIjtcbi8qIVxuICogbHVuci51dGlsc1xuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSBuYW1lc3BhY2UgY29udGFpbmluZyB1dGlscyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGx1bnIgbGlicmFyeVxuICovXG5sdW5yLnV0aWxzID0ge307XG5cbi8qKlxuICogUHJpbnQgYSB3YXJuaW5nIG1lc3NhZ2UgdG8gdGhlIGNvbnNvbGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gYmUgcHJpbnRlZC5cbiAqIEBtZW1iZXJPZiBVdGlsc1xuICovXG5sdW5yLnV0aWxzLndhcm4gPSAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIHJldHVybiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChnbG9iYWwuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xufSkodGhpcyk7XG5cbi8qKlxuICogQ29udmVydCBhbiBvYmplY3QgdG8gYSBzdHJpbmcuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCB0aGUgZnVuY3Rpb24gcmV0dXJuc1xuICogdGhlIGVtcHR5IHN0cmluZywgaW4gYWxsIG90aGVyIGNhc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICogYHRvU3RyaW5nYCBvbiB0aGUgcGFzc2VkIG9iamVjdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge0FueX0gb2JqIFRoZSBvYmplY3QgdG8gY29udmVydCB0byBhIHN0cmluZy5cbiAqIEByZXR1cm4ge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXNzZWQgb2JqZWN0LlxuICogQG1lbWJlck9mIFV0aWxzXG4gKi9cbmx1bnIudXRpbHMuYXNTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gIGlmIChvYmogPT09IHZvaWQgMCB8fCBvYmogPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCk7XG4gIH1cbn07XG5sdW5yLkZpZWxkUmVmID0gZnVuY3Rpb24gKGRvY1JlZiwgZmllbGROYW1lLCBzdHJpbmdWYWx1ZSkge1xuICB0aGlzLmRvY1JlZiA9IGRvY1JlZjtcbiAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gIHRoaXMuX3N0cmluZ1ZhbHVlID0gc3RyaW5nVmFsdWU7XG59O1xuXG5sdW5yLkZpZWxkUmVmLmpvaW5lciA9IFwiL1wiO1xuXG5sdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAocykge1xuICB2YXIgbiA9IHMuaW5kZXhPZihsdW5yLkZpZWxkUmVmLmpvaW5lcik7XG5cbiAgaWYgKG4gPT09IC0xKSB7XG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgZmllbGQgcmVmIHN0cmluZ1wiO1xuICB9XG5cbiAgdmFyIGZpZWxkUmVmID0gcy5zbGljZSgwLCBuKSxcbiAgICAgIGRvY1JlZiA9IHMuc2xpY2UobiArIDEpO1xuXG4gIHJldHVybiBuZXcgbHVuci5GaWVsZFJlZiAoZG9jUmVmLCBmaWVsZFJlZiwgcyk7XG59O1xuXG5sdW5yLkZpZWxkUmVmLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX3N0cmluZ1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9zdHJpbmdWYWx1ZSA9IHRoaXMuZmllbGROYW1lICsgbHVuci5GaWVsZFJlZi5qb2luZXIgKyB0aGlzLmRvY1JlZjtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9zdHJpbmdWYWx1ZTtcbn07XG4vKipcbiAqIEEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBpbnZlcnNlIGRvY3VtZW50IGZyZXF1ZW5jeSBmb3JcbiAqIGEgcG9zdGluZy4gVGhpcyBpcyBzaGFyZWQgYmV0d2VlbiB0aGUgYnVpbGRlciBhbmQgdGhlIGluZGV4XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwb3N0aW5nIC0gVGhlIHBvc3RpbmcgZm9yIGEgZ2l2ZW4gdGVybVxuICogQHBhcmFtIHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBUaGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cy5cbiAqL1xubHVuci5pZGYgPSBmdW5jdGlvbiAocG9zdGluZywgZG9jdW1lbnRDb3VudCkge1xuICB2YXIgZG9jdW1lbnRzV2l0aFRlcm0gPSAwO1xuXG4gIGZvciAodmFyIGZpZWxkTmFtZSBpbiBwb3N0aW5nKSB7XG4gICAgaWYgKGZpZWxkTmFtZSA9PSAnX2luZGV4JykgY29udGludWU7IC8vIElnbm9yZSB0aGUgdGVybSBpbmRleCwgaXRzIG5vdCBhIGZpZWxkXG4gICAgZG9jdW1lbnRzV2l0aFRlcm0gKz0gT2JqZWN0LmtleXMocG9zdGluZ1tmaWVsZE5hbWVdKS5sZW5ndGg7XG4gIH1cblxuICB2YXIgeCA9IChkb2N1bWVudENvdW50IC0gZG9jdW1lbnRzV2l0aFRlcm0gKyAwLjUpIC8gKGRvY3VtZW50c1dpdGhUZXJtICsgMC41KTtcblxuICByZXR1cm4gTWF0aC5sb2coMSArIE1hdGguYWJzKHgpKTtcbn07XG5cbi8qKlxuICogQSB0b2tlbiB3cmFwcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRva2VuXG4gKiBhcyBpdCBpcyBwYXNzZWQgdGhyb3VnaCB0aGUgdGV4dCBwcm9jZXNzaW5nIHBpcGVsaW5lLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IFtzdHI9JyddIC0gVGhlIHN0cmluZyB0b2tlbiBiZWluZyB3cmFwcGVkLlxuICogQHBhcmFtIHtvYmplY3R9IFttZXRhZGF0YT17fV0gLSBNZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xubHVuci5Ub2tlbiA9IGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gIHRoaXMuc3RyID0gc3RyIHx8IFwiXCI7XG4gIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YSB8fCB7fTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdG9rZW4gc3RyaW5nIHRoYXQgaXMgYmVpbmcgd3JhcHBlZCBieSB0aGlzIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuc3RyO1xufTtcblxuLyoqXG4gKiBBIHRva2VuIHVwZGF0ZSBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gdXBkYXRpbmcgb3Igb3B0aW9uYWxseVxuICogd2hlbiBjbG9uaW5nIGEgdG9rZW4uXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhZGF0YSAtIEFsbCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIHRvIHRoZSB3cmFwcGVkIHN0cmluZyB0b2tlbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gKiAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKVxuICogfSlcbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgdG9rZW4gc3RyaW5nLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICB0aGlzLnN0ciA9IGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHRva2VuLiBPcHRpb25hbGx5IGEgZnVuY3Rpb24gY2FuIGJlXG4gKiBhcHBsaWVkIHRvIHRoZSBjbG9uZWQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBbZm5dIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIGNsb25lZCB0b2tlbi5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChmbikge1xuICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzOyB9O1xuICByZXR1cm4gbmV3IGx1bnIuVG9rZW4gKGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKSwgdGhpcy5tZXRhZGF0YSk7XG59O1xuLyohXG4gKiBsdW5yLnRva2VuaXplclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiBmb3Igc3BsaXR0aW5nIGEgc3RyaW5nIGludG8gdG9rZW5zIHJlYWR5IHRvIGJlIGluc2VydGVkIGludG9cbiAqIHRoZSBzZWFyY2ggaW5kZXguIFVzZXMgYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAgdG8gc3BsaXQgc3RyaW5ncywgY2hhbmdlXG4gKiB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSB0byBjaGFuZ2UgaG93IHN0cmluZ3MgYXJlIHNwbGl0IGludG8gdG9rZW5zLlxuICpcbiAqIFRoaXMgdG9rZW5pemVyIHdpbGwgY29udmVydCBpdHMgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgYHRvU3RyaW5nYCBhbmRcbiAqIHRoZW4gd2lsbCBzcGxpdCB0aGlzIHN0cmluZyBvbiB0aGUgY2hhcmFjdGVyIGluIGBsdW5yLnRva2VuaXplci5zZXBhcmF0b3JgLlxuICogQXJyYXlzIHdpbGwgaGF2ZSB0aGVpciBlbGVtZW50cyBjb252ZXJ0ZWQgdG8gc3RyaW5ncyBhbmQgd3JhcHBlZCBpbiBhIGx1bnIuVG9rZW4uXG4gKlxuICogQHN0YXRpY1xuICogQHBhcmFtIHs/KHN0cmluZ3xvYmplY3R8b2JqZWN0W10pfSBvYmogLSBUaGUgb2JqZWN0IHRvIGNvbnZlcnQgaW50byB0b2tlbnNcbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuW119XG4gKi9cbmx1bnIudG9rZW5pemVyID0gZnVuY3Rpb24gKG9iaikge1xuICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gbmV3IGx1bnIuVG9rZW4obHVuci51dGlscy5hc1N0cmluZyh0KS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBzdHIgPSBvYmoudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXG4gICAgICB0b2tlbnMgPSBbXTtcblxuICBmb3IgKHZhciBzbGljZUVuZCA9IDAsIHNsaWNlU3RhcnQgPSAwOyBzbGljZUVuZCA8PSBsZW47IHNsaWNlRW5kKyspIHtcbiAgICB2YXIgY2hhciA9IHN0ci5jaGFyQXQoc2xpY2VFbmQpLFxuICAgICAgICBzbGljZUxlbmd0aCA9IHNsaWNlRW5kIC0gc2xpY2VTdGFydDtcblxuICAgIGlmICgoY2hhci5tYXRjaChsdW5yLnRva2VuaXplci5zZXBhcmF0b3IpIHx8IHNsaWNlRW5kID09IGxlbikpIHtcblxuICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICB0b2tlbnMucHVzaChcbiAgICAgICAgICBuZXcgbHVuci5Ub2tlbiAoc3RyLnNsaWNlKHNsaWNlU3RhcnQsIHNsaWNlRW5kKSwge1xuICAgICAgICAgICAgcG9zaXRpb246IFtzbGljZVN0YXJ0LCBzbGljZUxlbmd0aF0sXG4gICAgICAgICAgICBpbmRleDogdG9rZW5zLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuLyoqXG4gKiBUaGUgc2VwYXJhdG9yIHVzZWQgdG8gc3BsaXQgYSBzdHJpbmcgaW50byB0b2tlbnMuIE92ZXJyaWRlIHRoaXMgcHJvcGVydHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvdXIgb2ZcbiAqIGBsdW5yLnRva2VuaXplcmAgYmVoYXZpb3VyIHdoZW4gdG9rZW5pemluZyBzdHJpbmdzLiBCeSBkZWZhdWx0IHRoaXMgc3BsaXRzIG9uIHdoaXRlc3BhY2UgYW5kIGh5cGhlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNlZSBsdW5yLnRva2VuaXplclxuICovXG5sdW5yLnRva2VuaXplci5zZXBhcmF0b3IgPSAvW1xcc1xcLV0rLztcbi8qIVxuICogbHVuci5QaXBlbGluZVxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci5QaXBlbGluZXMgbWFpbnRhaW4gYW4gb3JkZXJlZCBsaXN0IG9mIGZ1bmN0aW9ucyB0byBiZSBhcHBsaWVkIHRvIGFsbFxuICogdG9rZW5zIGluIGRvY3VtZW50cyBlbnRlcmluZyB0aGUgc2VhcmNoIGluZGV4IGFuZCBxdWVyaWVzIGJlaW5nIHJhbiBhZ2FpbnN0XG4gKiB0aGUgaW5kZXguXG4gKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5JbmRleCBjcmVhdGVkIHdpdGggdGhlIGx1bnIgc2hvcnRjdXQgd2lsbCBjb250YWluIGFcbiAqIHBpcGVsaW5lIHdpdGggYSBzdG9wIHdvcmQgZmlsdGVyIGFuZCBhbiBFbmdsaXNoIGxhbmd1YWdlIHN0ZW1tZXIuIEV4dHJhXG4gKiBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIGJlZm9yZSBvciBhZnRlciBlaXRoZXIgb2YgdGhlc2UgZnVuY3Rpb25zIG9yIHRoZXNlXG4gKiBkZWZhdWx0IGZ1bmN0aW9ucyBjYW4gYmUgcmVtb3ZlZC5cbiAqXG4gKiBXaGVuIHJ1biB0aGUgcGlwZWxpbmUgd2lsbCBjYWxsIGVhY2ggZnVuY3Rpb24gaW4gdHVybiwgcGFzc2luZyBhIHRva2VuLCB0aGVcbiAqIGluZGV4IG9mIHRoYXQgdG9rZW4gaW4gdGhlIG9yaWdpbmFsIGxpc3Qgb2YgYWxsIHRva2VucyBhbmQgZmluYWxseSBhIGxpc3Qgb2ZcbiAqIGFsbCB0aGUgb3JpZ2luYWwgdG9rZW5zLlxuICpcbiAqIFRoZSBvdXRwdXQgb2YgZnVuY3Rpb25zIGluIHRoZSBwaXBlbGluZSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbmV4dCBmdW5jdGlvblxuICogaW4gdGhlIHBpcGVsaW5lLiBUbyBleGNsdWRlIGEgdG9rZW4gZnJvbSBlbnRlcmluZyB0aGUgaW5kZXggdGhlIGZ1bmN0aW9uXG4gKiBzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCwgdGhlIHJlc3Qgb2YgdGhlIHBpcGVsaW5lIHdpbGwgbm90IGJlIGNhbGxlZCB3aXRoXG4gKiB0aGlzIHRva2VuLlxuICpcbiAqIEZvciBzZXJpYWxpc2F0aW9uIG9mIHBpcGVsaW5lcyB0byB3b3JrLCBhbGwgZnVuY3Rpb25zIHVzZWQgaW4gYW4gaW5zdGFuY2Ugb2ZcbiAqIGEgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgd2l0aCBsdW5yLlBpcGVsaW5lLiBSZWdpc3RlcmVkIGZ1bmN0aW9ucyBjYW5cbiAqIHRoZW4gYmUgbG9hZGVkLiBJZiB0cnlpbmcgdG8gbG9hZCBhIHNlcmlhbGlzZWQgcGlwZWxpbmUgdGhhdCB1c2VzIGZ1bmN0aW9uc1xuICogdGhhdCBhcmUgbm90IHJlZ2lzdGVyZWQgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKlxuICogSWYgbm90IHBsYW5uaW5nIG9uIHNlcmlhbGlzaW5nIHRoZSBwaXBlbGluZSB0aGVuIHJlZ2lzdGVyaW5nIHBpcGVsaW5lIGZ1bmN0aW9uc1xuICogaXMgbm90IG5lY2Vzc2FyeS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xubHVuci5QaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXTtcbn07XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8qKlxuICogQSBwaXBlbGluZSBmdW5jdGlvbiBtYXBzIGx1bnIuVG9rZW4gdG8gbHVuci5Ub2tlbi4gQSBsdW5yLlRva2VuIGNvbnRhaW5zIHRoZSB0b2tlblxuICogc3RyaW5nIGFzIHdlbGwgYXMgYWxsIGtub3duIG1ldGFkYXRhLiBBIHBpcGVsaW5lIGZ1bmN0aW9uIGNhbiBtdXRhdGUgdGhlIHRva2VuIHN0cmluZ1xuICogb3IgbXV0YXRlIChvciBhZGQpIG1ldGFkYXRhIGZvciBhIGdpdmVuIHRva2VuLlxuICpcbiAqIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIGluZGljYXRlIHRoYXQgdGhlIHBhc3NlZCB0b2tlbiBzaG91bGQgYmUgZGlzY2FyZGVkIGJ5IHJldHVybmluZ1xuICogbnVsbC4gVGhpcyB0b2tlbiB3aWxsIG5vdCBiZSBwYXNzZWQgdG8gYW55IGRvd25zdHJlYW0gcGlwZWxpbmUgZnVuY3Rpb25zIGFuZCB3aWxsIG5vdCBiZVxuICogYWRkZWQgdG8gdGhlIGluZGV4LlxuICpcbiAqIE11bHRpcGxlIHRva2VucyBjYW4gYmUgcmV0dXJuZWQgYnkgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRva2Vucy4gRWFjaCB0b2tlbiB3aWxsIGJlIHBhc3NlZFxuICogdG8gYW55IGRvd25zdHJlYW0gcGlwZWxpbmUgZnVuY3Rpb25zIGFuZCBhbGwgd2lsbCByZXR1cm5lZCB0b2tlbnMgd2lsbCBiZSBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogQW55IG51bWJlciBvZiBwaXBlbGluZSBmdW5jdGlvbnMgbWF5IGJlIGNoYWluZWQgdG9nZXRoZXIgdXNpbmcgYSBsdW5yLlBpcGVsaW5lLlxuICpcbiAqIEBpbnRlcmZhY2UgbHVuci5QaXBlbGluZUZ1bmN0aW9uXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW59IHRva2VuIC0gQSB0b2tlbiBmcm9tIHRoZSBkb2N1bWVudCBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gaSAtIFRoZSBpbmRleCBvZiB0aGlzIHRva2VuIGluIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHRva2VucyBmb3IgdGhpcyBkb2N1bWVudC9maWVsZC5cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbltdfSB0b2tlbnMgLSBBbGwgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICogQHJldHVybnMgeyg/bHVuci5Ub2tlbnxsdW5yLlRva2VuW10pfVxuICovXG5cbi8qKlxuICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB3aXRoIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBGdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCBpbiB0aGUgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaWYgdGhlIHBpcGVsaW5lXG4gKiBuZWVkcyB0byBiZSBzZXJpYWxpc2VkLCBvciBhIHNlcmlhbGlzZWQgcGlwZWxpbmUgbmVlZHMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFJlZ2lzdGVyaW5nIGEgZnVuY3Rpb24gZG9lcyBub3QgYWRkIGl0IHRvIGEgcGlwZWxpbmUsIGZ1bmN0aW9ucyBtdXN0IHN0aWxsIGJlXG4gKiBhZGRlZCB0byBpbnN0YW5jZXMgb2YgdGhlIHBpcGVsaW5lIGZvciB0aGVtIHRvIGJlIHVzZWQgd2hlbiBydW5uaW5nIGEgcGlwZWxpbmUuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCAtIFRoZSBsYWJlbCB0byByZWdpc3RlciB0aGlzIGZ1bmN0aW9uIHdpdGhcbiAqL1xubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuLCBsYWJlbCkge1xuICBpZiAobGFiZWwgaW4gdGhpcy5yZWdpc3RlcmVkRnVuY3Rpb25zKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdPdmVyd3JpdGluZyBleGlzdGluZyByZWdpc3RlcmVkIGZ1bmN0aW9uOiAnICsgbGFiZWwpO1xuICB9XG5cbiAgZm4ubGFiZWwgPSBsYWJlbDtcbiAgbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuLmxhYmVsXSA9IGZuO1xufTtcblxuLyoqXG4gKiBXYXJucyBpZiB0aGUgZnVuY3Rpb24gaXMgbm90IHJlZ2lzdGVyZWQgYXMgYSBQaXBlbGluZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHByaXZhdGVcbiAqL1xubHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIGlzUmVnaXN0ZXJlZCA9IGZuLmxhYmVsICYmIChmbi5sYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpO1xuXG4gIGlmICghaXNSZWdpc3RlcmVkKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdGdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIHBpcGVsaW5lLiBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyB3aGVuIHNlcmlhbGlzaW5nIHRoZSBpbmRleC5cXG4nLCBmbik7XG4gIH1cbn07XG5cbi8qKlxuICogTG9hZHMgYSBwcmV2aW91c2x5IHNlcmlhbGlzZWQgcGlwZWxpbmUuXG4gKlxuICogQWxsIGZ1bmN0aW9ucyB0byBiZSBsb2FkZWQgbXVzdCBhbHJlYWR5IGJlIHJlZ2lzdGVyZWQgd2l0aCBsdW5yLlBpcGVsaW5lLlxuICogSWYgYW55IGZ1bmN0aW9uIGZyb20gdGhlIHNlcmlhbGlzZWQgZGF0YSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB0aGVuIGFuXG4gKiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXNlZCAtIFRoZSBzZXJpYWxpc2VkIHBpcGVsaW5lIHRvIGxvYWQuXG4gKiBAcmV0dXJucyB7bHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5QaXBlbGluZS5sb2FkID0gZnVuY3Rpb24gKHNlcmlhbGlzZWQpIHtcbiAgdmFyIHBpcGVsaW5lID0gbmV3IGx1bnIuUGlwZWxpbmUoKTtcblxuICBzZXJpYWxpc2VkLmZvckVhY2goZnVuY3Rpb24gKGZuTmFtZSkge1xuICAgIHZhciBmbiA9IGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9uc1tmbk5hbWVdO1xuXG4gICAgaWYgKGZuKSB7XG4gICAgICBwaXBlbGluZS5hZGQoZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBsb2FkIHVucmVnaXN0ZXJlZCBmdW5jdGlvbjogJyArIGZuTmFtZSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGlwZWxpbmU7XG59O1xuXG4vKipcbiAqIEFkZHMgbmV3IGZ1bmN0aW9ucyB0byB0aGUgZW5kIG9mIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb25bXX0gZnVuY3Rpb25zIC0gQW55IG51bWJlciBvZiBmdW5jdGlvbnMgdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZm5zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICBmbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChmbik7XG4gICAgdGhpcy5fc3RhY2sucHVzaChmbik7XG4gIH0sIHRoaXMpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgc2luZ2xlIGZ1bmN0aW9uIGFmdGVyIGEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGVcbiAqIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gbmV3Rm4gLSBUaGUgbmV3IGZ1bmN0aW9uIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFmdGVyID0gZnVuY3Rpb24gKGV4aXN0aW5nRm4sIG5ld0ZuKSB7XG4gIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKG5ld0ZuKTtcblxuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihleGlzdGluZ0ZuKTtcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZXhpc3RpbmdGbicpO1xuICB9XG5cbiAgcG9zID0gcG9zICsgMTtcbiAgdGhpcy5fc3RhY2suc3BsaWNlKHBvcywgMCwgbmV3Rm4pO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgc2luZ2xlIGZ1bmN0aW9uIGJlZm9yZSBhIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlXG4gKiBwaXBlbGluZS5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGV4aXN0aW5nRm4gLSBBIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHBpcGVsaW5lLlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IG5ld0ZuIC0gVGhlIG5ldyBmdW5jdGlvbiB0byBhZGQgdG8gdGhlIHBpcGVsaW5lLlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5iZWZvcmUgPSBmdW5jdGlvbiAoZXhpc3RpbmdGbiwgbmV3Rm4pIHtcbiAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pO1xuXG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGV4aXN0aW5nRm4pO1xuICBpZiAocG9zID09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBleGlzdGluZ0ZuJyk7XG4gIH1cblxuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAwLCBuZXdGbik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBmdW5jdGlvbiBmcm9tIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBmcm9tIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGZuKTtcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDEpO1xufTtcblxuLyoqXG4gKiBSdW5zIHRoZSBjdXJyZW50IGxpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgcGlwZWxpbmUgYWdhaW5zdCB0aGVcbiAqIHBhc3NlZCB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zIFRoZSB0b2tlbnMgdG8gcnVuIHRocm91Z2ggdGhlIHBpcGVsaW5lLlxuICogQHJldHVybnMge0FycmF5fVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAodG9rZW5zKSB7XG4gIHZhciBzdGFja0xlbmd0aCA9IHRoaXMuX3N0YWNrLmxlbmd0aDtcblxuICB2YXIgciA9IGZ1bmN0aW9uIChtZW1vLCB0b2tlbiwgaikge1xuICAgIHZhciByZXN1bHQgPSBmbih0b2tlbiwgaiwgdG9rZW5zKTtcbiAgICBpZiAocmVzdWx0ID09PSB2b2lkIDAgfHwgcmVzdWx0ID09PSAnJykgcmV0dXJuIG1lbW87XG4gICAgcmV0dXJuIG1lbW8uY29uY2F0KHJlc3VsdCk7XG4gIH07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZuID0gdGhpcy5fc3RhY2tbaV07XG4gICAgdG9rZW5zID0gdG9rZW5zLnJlZHVjZShyLCBbXSk7XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHBhc3NpbmcgYSBzdHJpbmcgdGhyb3VnaCBhIHBpcGVsaW5lIGFuZCBnZXR0aW5nXG4gKiBzdHJpbmdzIG91dC4gVGhpcyBtZXRob2QgdGFrZXMgY2FyZSBvZiB3cmFwcGluZyB0aGUgcGFzc2VkIHN0cmluZyBpbiBhXG4gKiB0b2tlbiBhbmQgbWFwcGluZyB0aGUgcmVzdWx0aW5nIHRva2VucyBiYWNrIHRvIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gcGFzcyB0aHJvdWdoIHRoZSBwaXBlbGluZS5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucnVuU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgdG9rZW4gPSBuZXcgbHVuci5Ub2tlbiAoc3RyKTtcblxuICByZXR1cm4gdGhpcy5ydW4oW3Rva2VuXSkubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlc2V0cyB0aGUgcGlwZWxpbmUgYnkgcmVtb3ZpbmcgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gKlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwaXBlbGluZSByZWFkeSBmb3Igc2VyaWFsaXNhdGlvbi5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9zdGFjay5tYXAoZnVuY3Rpb24gKGZuKSB7XG4gICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQoZm4pO1xuICAgIHJldHVybiBmbi5sYWJlbDtcbiAgfSk7XG59O1xuLyohXG4gKiBsdW5yLlZlY3RvclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSB2ZWN0b3IgaXMgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHZlY3RvciBzcGFjZSBvZiBkb2N1bWVudHMgYW5kIHF1ZXJpZXMuIFRoZXNlXG4gKiB2ZWN0b3JzIHN1cHBvcnQgb3BlcmF0aW9ucyB0byBkZXRlcm1pbmUgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0d28gZG9jdW1lbnRzIG9yXG4gKiBhIGRvY3VtZW50IGFuZCBhIHF1ZXJ5LlxuICpcbiAqIE5vcm1hbGx5IG5vIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGZvciBpbml0aWFsaXppbmcgYSB2ZWN0b3IsIGJ1dCBpbiB0aGUgY2FzZSBvZlxuICogbG9hZGluZyBhIHByZXZpb3VzbHkgZHVtcGVkIHZlY3RvciB0aGUgcmF3IGVsZW1lbnRzIGNhbiBiZSBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gKlxuICogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdmVjdG9ycyBhcmUgaW1wbGVtZW50ZWQgd2l0aCBhIGZsYXQgYXJyYXksIHdoZXJlIGFuIGVsZW1lbnRzXG4gKiBpbmRleCBpcyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBpdHMgdmFsdWUuIEUuZy4gW2luZGV4LCB2YWx1ZSwgaW5kZXgsIHZhbHVlXS4gVGhpc1xuICogYWxsb3dzIHRoZSB1bmRlcmx5aW5nIGFycmF5IHRvIGJlIGFzIHNwYXJzZSBhcyBwb3NzaWJsZSBhbmQgc3RpbGwgb2ZmZXIgZGVjZW50XG4gKiBwZXJmb3JtYW5jZSB3aGVuIGJlaW5nIHVzZWQgZm9yIHZlY3RvciBjYWxjdWxhdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge051bWJlcltdfSBbZWxlbWVudHNdIC0gVGhlIGZsYXQgbGlzdCBvZiBlbGVtZW50IGluZGV4IGFuZCBlbGVtZW50IHZhbHVlIHBhaXJzLlxuICovXG5sdW5yLlZlY3RvciA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICB0aGlzLl9tYWduaXR1ZGUgPSAwO1xuICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHMgfHwgW107XG59O1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9zaXRpb24gd2l0aGluIHRoZSB2ZWN0b3IgdG8gaW5zZXJ0IGEgZ2l2ZW4gaW5kZXguXG4gKlxuICogVGhpcyBpcyB1c2VkIGludGVybmFsbHkgYnkgaW5zZXJ0IGFuZCB1cHNlcnQuIElmIHRoZXJlIGFyZSBkdXBsaWNhdGUgaW5kZXhlcyB0aGVuXG4gKiB0aGUgcG9zaXRpb24gaXMgcmV0dXJuZWQgYXMgaWYgdGhlIHZhbHVlIGZvciB0aGF0IGluZGV4IHdlcmUgdG8gYmUgdXBkYXRlZCwgYnV0IGl0XG4gKiBpcyB0aGUgY2FsbGVycyByZXNwb25zaWJpbGl0eSB0byBjaGVjayB3aGV0aGVyIHRoZXJlIGlzIGEgZHVwbGljYXRlIGF0IHRoYXQgaW5kZXhcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5wb3NpdGlvbkZvckluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIC8vIEZvciBhbiBlbXB0eSB2ZWN0b3IgdGhlIHR1cGxlIGNhbiBiZSBpbnNlcnRlZCBhdCB0aGUgYmVnaW5uaW5nXG4gIGlmICh0aGlzLmVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIHN0YXJ0ID0gMCxcbiAgICAgIGVuZCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoIC8gMixcbiAgICAgIHNsaWNlTGVuZ3RoID0gZW5kIC0gc3RhcnQsXG4gICAgICBwaXZvdFBvaW50ID0gTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpLFxuICAgICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdO1xuXG4gIHdoaWxlIChzbGljZUxlbmd0aCA+IDEpIHtcbiAgICBpZiAocGl2b3RJbmRleCA8IGluZGV4KSB7XG4gICAgICBzdGFydCA9IHBpdm90UG9pbnQ7XG4gICAgfVxuXG4gICAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgICAgZW5kID0gcGl2b3RQb2ludDtcbiAgICB9XG5cbiAgICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc2xpY2VMZW5ndGggPSBlbmQgLSBzdGFydDtcbiAgICBwaXZvdFBvaW50ID0gc3RhcnQgKyBNYXRoLmZsb29yKHNsaWNlTGVuZ3RoIC8gMik7XG4gICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdO1xuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPT0gaW5kZXgpIHtcbiAgICByZXR1cm4gcGl2b3RQb2ludCAqIDI7XG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA+IGluZGV4KSB7XG4gICAgcmV0dXJuIHBpdm90UG9pbnQgKiAyO1xuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPCBpbmRleCkge1xuICAgIHJldHVybiAocGl2b3RQb2ludCArIDEpICogMjtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnNlcnRzIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXggd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogRG9lcyBub3QgYWxsb3cgZHVwbGljYXRlcywgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGVudHJ5XG4gKiBmb3IgdGhpcyBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWwgLSBUaGUgdmFsdWUgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgdmVjdG9yLlxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsKSB7XG4gIHRoaXMudXBzZXJ0KGluc2VydElkeCwgdmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgXCJkdXBsaWNhdGUgaW5kZXhcIjtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBleGlzdGluZyBpbmRleCB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWwgLSBUaGUgdmFsdWUgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgdmVjdG9yLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGZvciB1cGRhdGVzLCB0aGUgZXhpc3RpbmcgdmFsdWUgYW5kIHRoZVxuICogcmVxdWVzdGVkIHZhbHVlIGFyZSBwYXNzZWQgYXMgYXJndW1lbnRzXG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS51cHNlcnQgPSBmdW5jdGlvbiAoaW5zZXJ0SWR4LCB2YWwsIGZuKSB7XG4gIHRoaXMuX21hZ25pdHVkZSA9IDA7XG4gIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Gb3JJbmRleChpbnNlcnRJZHgpO1xuXG4gIGlmICh0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uXSA9PSBpbnNlcnRJZHgpIHtcbiAgICB0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uICsgMV0gPSBmbih0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uICsgMV0sIHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5lbGVtZW50cy5zcGxpY2UocG9zaXRpb24sIDAsIGluc2VydElkeCwgdmFsKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBtYWduaXR1ZGUgb2YgdGhpcyB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLm1hZ25pdHVkZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX21hZ25pdHVkZSkgcmV0dXJuIHRoaXMuX21hZ25pdHVkZTtcblxuICB2YXIgc3VtT2ZTcXVhcmVzID0gMCxcbiAgICAgIGVsZW1lbnRzTGVuZ3RoID0gdGhpcy5lbGVtZW50cy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBlbGVtZW50c0xlbmd0aDsgaSArPSAyKSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuZWxlbWVudHNbaV07XG4gICAgc3VtT2ZTcXVhcmVzICs9IHZhbCAqIHZhbDtcbiAgfVxuXG4gIHRoaXMuX21hZ25pdHVkZSA9IE1hdGguc3FydChzdW1PZlNxdWFyZXMpO1xuICByZXR1cm4gdGhpcy5fbWFnbml0dWRlO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHZhciBkb3RQcm9kdWN0ID0gMCxcbiAgICAgIGEgPSB0aGlzLmVsZW1lbnRzLCBiID0gb3RoZXJWZWN0b3IuZWxlbWVudHMsXG4gICAgICBhTGVuID0gYS5sZW5ndGgsIGJMZW4gPSBiLmxlbmd0aCxcbiAgICAgIGFWYWwgPSAwLCBiVmFsID0gMCxcbiAgICAgIGkgPSAwLCBqID0gMDtcblxuICB3aGlsZSAoaSA8IGFMZW4gJiYgaiA8IGJMZW4pIHtcbiAgICBhVmFsID0gYVtpXTsgYlZhbCA9IGJbal07XG4gICAgaWYgKGFWYWwgPCBiVmFsKSB7XG4gICAgICBpICs9IDI7XG4gICAgfSBlbHNlIGlmIChhVmFsID4gYlZhbCkge1xuICAgICAgaiArPSAyO1xuICAgIH0gZWxzZSBpZiAoYVZhbCA9PSBiVmFsKSB7XG4gICAgICBkb3RQcm9kdWN0ICs9IGFbaSArIDFdICogYltqICsgMV07XG4gICAgICBpICs9IDI7XG4gICAgICBqICs9IDI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRvdFByb2R1Y3Q7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvc2luZSBzaW1pbGFyaXR5IGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXJcbiAqIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVmVjdG9yfSBvdGhlclZlY3RvciAtIFRoZSBvdGhlciB2ZWN0b3IgdG8gY2FsY3VsYXRlIHRoZVxuICogc2ltaWxhcml0eSB3aXRoLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnNpbWlsYXJpdHkgPSBmdW5jdGlvbiAob3RoZXJWZWN0b3IpIHtcbiAgcmV0dXJuIHRoaXMuZG90KG90aGVyVmVjdG9yKSAvICh0aGlzLm1hZ25pdHVkZSgpICogb3RoZXJWZWN0b3IubWFnbml0dWRlKCkpO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgdmVjdG9yIHRvIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3V0cHV0ID0gbmV3IEFycmF5ICh0aGlzLmVsZW1lbnRzLmxlbmd0aCAvIDIpO1xuXG4gIGZvciAodmFyIGkgPSAxLCBqID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpICs9IDIsIGorKykge1xuICAgIG91dHB1dFtqXSA9IHRoaXMuZWxlbWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLyoqXG4gKiBBIEpTT04gc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5lbGVtZW50cztcbn07XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyohXG4gKiBsdW5yLnN0ZW1tZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEluY2x1ZGVzIGNvZGUgZnJvbSAtIGh0dHA6Ly90YXJ0YXJ1cy5vcmcvfm1hcnRpbi9Qb3J0ZXJTdGVtbWVyL2pzLnR4dFxuICovXG5cbi8qKlxuICogbHVuci5zdGVtbWVyIGlzIGFuIGVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lciwgdGhpcyBpcyBhIEphdmFTY3JpcHRcbiAqIGltcGxlbWVudGF0aW9uIG9mIHRoZSBQb3J0ZXJTdGVtbWVyIHRha2VuIGZyb20gaHR0cDovL3RhcnRhcnVzLm9yZy9+bWFydGluXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBUaGUgc3RyaW5nIHRvIHN0ZW1cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5zdGVtbWVyID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBzdGVwMmxpc3QgPSB7XG4gICAgICBcImF0aW9uYWxcIiA6IFwiYXRlXCIsXG4gICAgICBcInRpb25hbFwiIDogXCJ0aW9uXCIsXG4gICAgICBcImVuY2lcIiA6IFwiZW5jZVwiLFxuICAgICAgXCJhbmNpXCIgOiBcImFuY2VcIixcbiAgICAgIFwiaXplclwiIDogXCJpemVcIixcbiAgICAgIFwiYmxpXCIgOiBcImJsZVwiLFxuICAgICAgXCJhbGxpXCIgOiBcImFsXCIsXG4gICAgICBcImVudGxpXCIgOiBcImVudFwiLFxuICAgICAgXCJlbGlcIiA6IFwiZVwiLFxuICAgICAgXCJvdXNsaVwiIDogXCJvdXNcIixcbiAgICAgIFwiaXphdGlvblwiIDogXCJpemVcIixcbiAgICAgIFwiYXRpb25cIiA6IFwiYXRlXCIsXG4gICAgICBcImF0b3JcIiA6IFwiYXRlXCIsXG4gICAgICBcImFsaXNtXCIgOiBcImFsXCIsXG4gICAgICBcIml2ZW5lc3NcIiA6IFwiaXZlXCIsXG4gICAgICBcImZ1bG5lc3NcIiA6IFwiZnVsXCIsXG4gICAgICBcIm91c25lc3NcIiA6IFwib3VzXCIsXG4gICAgICBcImFsaXRpXCIgOiBcImFsXCIsXG4gICAgICBcIml2aXRpXCIgOiBcIml2ZVwiLFxuICAgICAgXCJiaWxpdGlcIiA6IFwiYmxlXCIsXG4gICAgICBcImxvZ2lcIiA6IFwibG9nXCJcbiAgICB9LFxuXG4gICAgc3RlcDNsaXN0ID0ge1xuICAgICAgXCJpY2F0ZVwiIDogXCJpY1wiLFxuICAgICAgXCJhdGl2ZVwiIDogXCJcIixcbiAgICAgIFwiYWxpemVcIiA6IFwiYWxcIixcbiAgICAgIFwiaWNpdGlcIiA6IFwiaWNcIixcbiAgICAgIFwiaWNhbFwiIDogXCJpY1wiLFxuICAgICAgXCJmdWxcIiA6IFwiXCIsXG4gICAgICBcIm5lc3NcIiA6IFwiXCJcbiAgICB9LFxuXG4gICAgYyA9IFwiW15hZWlvdV1cIiwgICAgICAgICAgLy8gY29uc29uYW50XG4gICAgdiA9IFwiW2FlaW91eV1cIiwgICAgICAgICAgLy8gdm93ZWxcbiAgICBDID0gYyArIFwiW15hZWlvdXldKlwiLCAgICAvLyBjb25zb25hbnQgc2VxdWVuY2VcbiAgICBWID0gdiArIFwiW2FlaW91XSpcIiwgICAgICAvLyB2b3dlbCBzZXF1ZW5jZVxuXG4gICAgbWdyMCA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQywgICAgICAgICAgICAgICAvLyBbQ11WQy4uLiBpcyBtPjBcbiAgICBtZXExID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDICsgXCIoXCIgKyBWICsgXCIpPyRcIiwgIC8vIFtDXVZDW1ZdIGlzIG09MVxuICAgIG1ncjEgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMgKyBWICsgQywgICAgICAgLy8gW0NdVkNWQy4uLiBpcyBtPjFcbiAgICBzX3YgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgdjsgICAgICAgICAgICAgICAgICAgLy8gdm93ZWwgaW4gc3RlbVxuXG4gIHZhciByZV9tZ3IwID0gbmV3IFJlZ0V4cChtZ3IwKTtcbiAgdmFyIHJlX21ncjEgPSBuZXcgUmVnRXhwKG1ncjEpO1xuICB2YXIgcmVfbWVxMSA9IG5ldyBSZWdFeHAobWVxMSk7XG4gIHZhciByZV9zX3YgPSBuZXcgUmVnRXhwKHNfdik7XG5cbiAgdmFyIHJlXzFhID0gL14oLis/KShzc3xpKWVzJC87XG4gIHZhciByZTJfMWEgPSAvXiguKz8pKFtec10pcyQvO1xuICB2YXIgcmVfMWIgPSAvXiguKz8pZWVkJC87XG4gIHZhciByZTJfMWIgPSAvXiguKz8pKGVkfGluZykkLztcbiAgdmFyIHJlXzFiXzIgPSAvLiQvO1xuICB2YXIgcmUyXzFiXzIgPSAvKGF0fGJsfGl6KSQvO1xuICB2YXIgcmUzXzFiXzIgPSBuZXcgUmVnRXhwKFwiKFteYWVpb3V5bHN6XSlcXFxcMSRcIik7XG4gIHZhciByZTRfMWJfMiA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDICsgdiArIFwiW15hZWlvdXd4eV0kXCIpO1xuXG4gIHZhciByZV8xYyA9IC9eKC4rP1teYWVpb3VdKXkkLztcbiAgdmFyIHJlXzIgPSAvXiguKz8pKGF0aW9uYWx8dGlvbmFsfGVuY2l8YW5jaXxpemVyfGJsaXxhbGxpfGVudGxpfGVsaXxvdXNsaXxpemF0aW9ufGF0aW9ufGF0b3J8YWxpc218aXZlbmVzc3xmdWxuZXNzfG91c25lc3N8YWxpdGl8aXZpdGl8YmlsaXRpfGxvZ2kpJC87XG5cbiAgdmFyIHJlXzMgPSAvXiguKz8pKGljYXRlfGF0aXZlfGFsaXplfGljaXRpfGljYWx8ZnVsfG5lc3MpJC87XG5cbiAgdmFyIHJlXzQgPSAvXiguKz8pKGFsfGFuY2V8ZW5jZXxlcnxpY3xhYmxlfGlibGV8YW50fGVtZW50fG1lbnR8ZW50fG91fGlzbXxhdGV8aXRpfG91c3xpdmV8aXplKSQvO1xuICB2YXIgcmUyXzQgPSAvXiguKz8pKHN8dCkoaW9uKSQvO1xuXG4gIHZhciByZV81ID0gL14oLis/KWUkLztcbiAgdmFyIHJlXzVfMSA9IC9sbCQvO1xuICB2YXIgcmUzXzUgPSBuZXcgUmVnRXhwKFwiXlwiICsgQyArIHYgKyBcIlteYWVpb3V3eHldJFwiKTtcblxuICB2YXIgcG9ydGVyU3RlbW1lciA9IGZ1bmN0aW9uIHBvcnRlclN0ZW1tZXIodykge1xuICAgIHZhciBzdGVtLFxuICAgICAgc3VmZml4LFxuICAgICAgZmlyc3RjaCxcbiAgICAgIHJlLFxuICAgICAgcmUyLFxuICAgICAgcmUzLFxuICAgICAgcmU0O1xuXG4gICAgaWYgKHcubGVuZ3RoIDwgMykgeyByZXR1cm4gdzsgfVxuXG4gICAgZmlyc3RjaCA9IHcuc3Vic3RyKDAsMSk7XG4gICAgaWYgKGZpcnN0Y2ggPT0gXCJ5XCIpIHtcbiAgICAgIHcgPSBmaXJzdGNoLnRvVXBwZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDFhXG4gICAgcmUgPSByZV8xYTtcbiAgICByZTIgPSByZTJfMWE7XG5cbiAgICBpZiAocmUudGVzdCh3KSkgeyB3ID0gdy5yZXBsYWNlKHJlLFwiJDEkMlwiKTsgfVxuICAgIGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7IHcgPSB3LnJlcGxhY2UocmUyLFwiJDEkMlwiKTsgfVxuXG4gICAgdmFyIGZwO1xuICAgIC8vIFN0ZXAgMWJcbiAgICByZSA9IHJlXzFiO1xuICAgIHJlMiA9IHJlMl8xYjtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3QoZnBbMV0pKSB7XG4gICAgICAgIHJlID0gcmVfMWJfMjtcbiAgICAgICAgdyA9IHcucmVwbGFjZShyZSxcIlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlMi5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUyID0gcmVfc192O1xuICAgICAgaWYgKHJlMi50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgICByZTIgPSByZTJfMWJfMjtcbiAgICAgICAgcmUzID0gcmUzXzFiXzI7XG4gICAgICAgIHJlNCA9IHJlNF8xYl8yO1xuICAgICAgICBpZiAocmUyLnRlc3QodykpIHsgdyA9IHcgKyBcImVcIjsgfVxuICAgICAgICBlbHNlIGlmIChyZTMudGVzdCh3KSkgeyByZSA9IHJlXzFiXzI7IHcgPSB3LnJlcGxhY2UocmUsXCJcIik7IH1cbiAgICAgICAgZWxzZSBpZiAocmU0LnRlc3QodykpIHsgdyA9IHcgKyBcImVcIjsgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgMWMgLSByZXBsYWNlIHN1ZmZpeCB5IG9yIFkgYnkgaSBpZiBwcmVjZWRlZCBieSBhIG5vbi12b3dlbCB3aGljaCBpcyBub3QgdGhlIGZpcnN0IGxldHRlciBvZiB0aGUgd29yZCAoc28gY3J5IC0+IGNyaSwgYnkgLT4gYnksIHNheSAtPiBzYXkpXG4gICAgcmUgPSByZV8xYztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgdyA9IHN0ZW0gKyBcImlcIjtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDJcbiAgICByZSA9IHJlXzI7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW0gKyBzdGVwMmxpc3Rbc3VmZml4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDNcbiAgICByZSA9IHJlXzM7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW0gKyBzdGVwM2xpc3Rbc3VmZml4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDRcbiAgICByZSA9IHJlXzQ7XG4gICAgcmUyID0gcmUyXzQ7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlID0gcmVfbWdyMTtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV0gKyBmcFsyXTtcbiAgICAgIHJlMiA9IHJlX21ncjE7XG4gICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCA1XG4gICAgcmUgPSByZV81O1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICByZSA9IHJlX21ncjE7XG4gICAgICByZTIgPSByZV9tZXExO1xuICAgICAgcmUzID0gcmUzXzU7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSB8fCAocmUyLnRlc3Qoc3RlbSkgJiYgIShyZTMudGVzdChzdGVtKSkpKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlID0gcmVfNV8xO1xuICAgIHJlMiA9IHJlX21ncjE7XG4gICAgaWYgKHJlLnRlc3QodykgJiYgcmUyLnRlc3QodykpIHtcbiAgICAgIHJlID0gcmVfMWJfMjtcbiAgICAgIHcgPSB3LnJlcGxhY2UocmUsXCJcIik7XG4gICAgfVxuXG4gICAgLy8gYW5kIHR1cm4gaW5pdGlhbCBZIGJhY2sgdG8geVxuXG4gICAgaWYgKGZpcnN0Y2ggPT0gXCJ5XCIpIHtcbiAgICAgIHcgPSBmaXJzdGNoLnRvTG93ZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdztcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuLnVwZGF0ZShwb3J0ZXJTdGVtbWVyKTtcbiAgfTtcbn0pKCk7XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0ZW1tZXIsICdzdGVtbWVyJyk7XG4vKiFcbiAqIGx1bnIuc3RvcFdvcmRGaWx0ZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciBidWlsZHMgYSBzdG9wV29yZEZpbHRlciBmdW5jdGlvbiBmcm9tIHRoZSBwcm92aWRlZFxuICogbGlzdCBvZiBzdG9wIHdvcmRzLlxuICpcbiAqIFRoZSBidWlsdCBpbiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGJ1aWx0IHVzaW5nIHRoaXMgZ2VuZXJhdG9yIGFuZCBjYW4gYmUgdXNlZFxuICogdG8gZ2VuZXJhdGUgY3VzdG9tIHN0b3BXb3JkRmlsdGVycyBmb3IgYXBwbGljYXRpb25zIG9yIG5vbiBFbmdsaXNoIGxhbmd1YWdlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbiBUaGUgdG9rZW4gdG8gcGFzcyB0aHJvdWdoIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm5zIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAc2VlIGx1bnIuUGlwZWxpbmVcbiAqIEBzZWUgbHVuci5zdG9wV29yZEZpbHRlclxuICovXG5sdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIgPSBmdW5jdGlvbiAoc3RvcFdvcmRzKSB7XG4gIHZhciB3b3JkcyA9IHN0b3BXb3Jkcy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHN0b3BXb3JkKSB7XG4gICAgbWVtb1tzdG9wV29yZF0gPSBzdG9wV29yZDtcbiAgICByZXR1cm4gbWVtbztcbiAgfSwge30pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBpZiAodG9rZW4gJiYgd29yZHNbdG9rZW4udG9TdHJpbmcoKV0gIT09IHRva2VuLnRvU3RyaW5nKCkpIHJldHVybiB0b2tlbjtcbiAgfTtcbn07XG5cbi8qKlxuICogbHVuci5zdG9wV29yZEZpbHRlciBpcyBhbiBFbmdsaXNoIGxhbmd1YWdlIHN0b3Agd29yZCBsaXN0IGZpbHRlciwgYW55IHdvcmRzXG4gKiBjb250YWluZWQgaW4gdGhlIGxpc3Qgd2lsbCBub3QgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gdGhlIFBpcGVsaW5lLiBJZiB0aGUgdG9rZW4gZG9lcyBub3QgcGFzcyB0aGVcbiAqIGZpbHRlciB0aGVuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAcGFyYW1zIHtsdW5yLlRva2VufSB0b2tlbiAtIEEgdG9rZW4gdG8gY2hlY2sgZm9yIGJlaW5nIGEgc3RvcCB3b3JkLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICovXG5sdW5yLnN0b3BXb3JkRmlsdGVyID0gbHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyKFtcbiAgJ2EnLFxuICAnYWJsZScsXG4gICdhYm91dCcsXG4gICdhY3Jvc3MnLFxuICAnYWZ0ZXInLFxuICAnYWxsJyxcbiAgJ2FsbW9zdCcsXG4gICdhbHNvJyxcbiAgJ2FtJyxcbiAgJ2Ftb25nJyxcbiAgJ2FuJyxcbiAgJ2FuZCcsXG4gICdhbnknLFxuICAnYXJlJyxcbiAgJ2FzJyxcbiAgJ2F0JyxcbiAgJ2JlJyxcbiAgJ2JlY2F1c2UnLFxuICAnYmVlbicsXG4gICdidXQnLFxuICAnYnknLFxuICAnY2FuJyxcbiAgJ2Nhbm5vdCcsXG4gICdjb3VsZCcsXG4gICdkZWFyJyxcbiAgJ2RpZCcsXG4gICdkbycsXG4gICdkb2VzJyxcbiAgJ2VpdGhlcicsXG4gICdlbHNlJyxcbiAgJ2V2ZXInLFxuICAnZXZlcnknLFxuICAnZm9yJyxcbiAgJ2Zyb20nLFxuICAnZ2V0JyxcbiAgJ2dvdCcsXG4gICdoYWQnLFxuICAnaGFzJyxcbiAgJ2hhdmUnLFxuICAnaGUnLFxuICAnaGVyJyxcbiAgJ2hlcnMnLFxuICAnaGltJyxcbiAgJ2hpcycsXG4gICdob3cnLFxuICAnaG93ZXZlcicsXG4gICdpJyxcbiAgJ2lmJyxcbiAgJ2luJyxcbiAgJ2ludG8nLFxuICAnaXMnLFxuICAnaXQnLFxuICAnaXRzJyxcbiAgJ2p1c3QnLFxuICAnbGVhc3QnLFxuICAnbGV0JyxcbiAgJ2xpa2UnLFxuICAnbGlrZWx5JyxcbiAgJ21heScsXG4gICdtZScsXG4gICdtaWdodCcsXG4gICdtb3N0JyxcbiAgJ211c3QnLFxuICAnbXknLFxuICAnbmVpdGhlcicsXG4gICdubycsXG4gICdub3InLFxuICAnbm90JyxcbiAgJ29mJyxcbiAgJ29mZicsXG4gICdvZnRlbicsXG4gICdvbicsXG4gICdvbmx5JyxcbiAgJ29yJyxcbiAgJ290aGVyJyxcbiAgJ291cicsXG4gICdvd24nLFxuICAncmF0aGVyJyxcbiAgJ3NhaWQnLFxuICAnc2F5JyxcbiAgJ3NheXMnLFxuICAnc2hlJyxcbiAgJ3Nob3VsZCcsXG4gICdzaW5jZScsXG4gICdzbycsXG4gICdzb21lJyxcbiAgJ3RoYW4nLFxuICAndGhhdCcsXG4gICd0aGUnLFxuICAndGhlaXInLFxuICAndGhlbScsXG4gICd0aGVuJyxcbiAgJ3RoZXJlJyxcbiAgJ3RoZXNlJyxcbiAgJ3RoZXknLFxuICAndGhpcycsXG4gICd0aXMnLFxuICAndG8nLFxuICAndG9vJyxcbiAgJ3R3YXMnLFxuICAndXMnLFxuICAnd2FudHMnLFxuICAnd2FzJyxcbiAgJ3dlJyxcbiAgJ3dlcmUnLFxuICAnd2hhdCcsXG4gICd3aGVuJyxcbiAgJ3doZXJlJyxcbiAgJ3doaWNoJyxcbiAgJ3doaWxlJyxcbiAgJ3dobycsXG4gICd3aG9tJyxcbiAgJ3doeScsXG4gICd3aWxsJyxcbiAgJ3dpdGgnLFxuICAnd291bGQnLFxuICAneWV0JyxcbiAgJ3lvdScsXG4gICd5b3VyJ1xuXSk7XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0b3BXb3JkRmlsdGVyLCAnc3RvcFdvcmRGaWx0ZXInKTtcbi8qIVxuICogbHVuci50cmltbWVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLnRyaW1tZXIgaXMgYSBwaXBlbGluZSBmdW5jdGlvbiBmb3IgdHJpbW1pbmcgbm9uIHdvcmRcbiAqIGNoYXJhY3RlcnMgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgdG9rZW5zIGJlZm9yZSB0aGV5XG4gKiBlbnRlciB0aGUgaW5kZXguXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBtYXkgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24gbGF0aW5cbiAqIGNoYXJhY3RlcnMgYW5kIHNob3VsZCBlaXRoZXIgYmUgcmVtb3ZlZCBvciBhZGFwdGVkIGZvciB1c2VcbiAqIHdpdGggbGFuZ3VhZ2VzIHdpdGggbm9uLWxhdGluIGNoYXJhY3RlcnMuXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gVGhlIHRva2VuIHRvIHBhc3MgdGhyb3VnaCB0aGUgZmlsdGVyXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICovXG5sdW5yLnRyaW1tZXIgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgcmV0dXJuIHRva2VuLnVwZGF0ZShmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL15cXFcrLywgJycpLnJlcGxhY2UoL1xcVyskLywgJycpO1xuICB9KTtcbn07XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnRyaW1tZXIsICd0cmltbWVyJyk7XG4vKiFcbiAqIGx1bnIuVG9rZW5TZXRcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgdG9rZW4gc2V0IGlzIHVzZWQgdG8gc3RvcmUgdGhlIHVuaXF1ZSBsaXN0IG9mIGFsbCB0b2tlbnNcbiAqIHdpdGhpbiBhbiBpbmRleC4gVG9rZW4gc2V0cyBhcmUgYWxzbyB1c2VkIHRvIHJlcHJlc2VudCBhblxuICogaW5jb21pbmcgcXVlcnkgdG8gdGhlIGluZGV4LCB0aGlzIHF1ZXJ5IHRva2VuIHNldCBhbmQgaW5kZXhcbiAqIHRva2VuIHNldCBhcmUgdGhlbiBpbnRlcnNlY3RlZCB0byBmaW5kIHdoaWNoIHRva2VucyB0byBsb29rXG4gKiB1cCBpbiB0aGUgaW52ZXJ0ZWQgaW5kZXguXG4gKlxuICogQSB0b2tlbiBzZXQgY2FuIGhvbGQgbXVsdGlwbGUgdG9rZW5zLCBhcyBpbiB0aGUgY2FzZSBvZiB0aGVcbiAqIGluZGV4IHRva2VuIHNldCwgb3IgaXQgY2FuIGhvbGQgYSBzaW5nbGUgdG9rZW4gYXMgaW4gdGhlXG4gKiBjYXNlIG9mIGEgc2ltcGxlIHF1ZXJ5IHRva2VuIHNldC5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgdG9rZW4gc2V0cyBhcmUgdXNlZCB0byBwZXJmb3JtIHdpbGRjYXJkIG1hdGNoaW5nLlxuICogTGVhZGluZywgY29udGFpbmVkIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMgYXJlIHN1cHBvcnRlZCwgYW5kXG4gKiBmcm9tIHRoaXMgZWRpdCBkaXN0YW5jZSBtYXRjaGluZyBjYW4gYWxzbyBiZSBwcm92aWRlZC5cbiAqXG4gKiBUb2tlbiBzZXRzIGFyZSBpbXBsZW1lbnRlZCBhcyBhIG1pbmltYWwgZmluaXRlIHN0YXRlIGF1dG9tYXRhLFxuICogd2hlcmUgYm90aCBjb21tb24gcHJlZml4ZXMgYW5kIHN1ZmZpeGVzIGFyZSBzaGFyZWQgYmV0d2VlbiB0b2tlbnMuXG4gKiBUaGlzIGhlbHBzIHRvIHJlZHVjZSB0aGUgc3BhY2UgdXNlZCBmb3Igc3RvcmluZyB0aGUgdG9rZW4gc2V0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5sdW5yLlRva2VuU2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmZpbmFsID0gZmFsc2U7XG4gIHRoaXMuZWRnZXMgPSB7fTtcbiAgdGhpcy5pZCA9IGx1bnIuVG9rZW5TZXQuX25leHRJZDtcbiAgbHVuci5Ub2tlblNldC5fbmV4dElkICs9IDE7XG59O1xuXG4vKipcbiAqIEtlZXBzIHRyYWNrIG9mIHRoZSBuZXh0LCBhdXRvIGluY3JlbWVudCwgaWRlbnRpZmllciB0byBhc3NpZ25cbiAqIHRvIGEgbmV3IHRva2VuU2V0LlxuICpcbiAqIFRva2VuU2V0cyByZXF1aXJlIGEgdW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgY29ycmVjdGx5IG1pbmltaXNlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLlRva2VuU2V0Ll9uZXh0SWQgPSAxO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBUb2tlblNldCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzb3J0ZWQgYXJyYXkgb2Ygd29yZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmdbXX0gYXJyIC0gQSBzb3J0ZWQgYXJyYXkgb2Ygc3RyaW5ncyB0byBjcmVhdGUgdGhlIHNldCBmcm9tLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKiBAdGhyb3dzIFdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGlucHV0IGFycmF5IGlzIG5vdCBzb3J0ZWQuXG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgYnVpbGRlciA9IG5ldyBsdW5yLlRva2VuU2V0LkJ1aWxkZXIoKTtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnVpbGRlci5pbnNlcnQoYXJyW2ldKTtcbiAgfVxuXG4gIGJ1aWxkZXIuZmluaXNoKCk7XG4gIHJldHVybiBidWlsZGVyLnJvb3Q7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgZnJvbSBhIHF1ZXJ5IGNsYXVzZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IGNsYXVzZSAtIEEgc2luZ2xlIGNsYXVzZSBmcm9tIGx1bnIuUXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhdXNlLnRlcm0gLSBUaGUgcXVlcnkgY2xhdXNlIHRlcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gW2NsYXVzZS5lZGl0RGlzdGFuY2VdIC0gVGhlIG9wdGlvbmFsIGVkaXQgZGlzdGFuY2UgZm9yIHRoZSB0ZXJtLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgaWYgKCdlZGl0RGlzdGFuY2UnIGluIGNsYXVzZSkge1xuICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyhjbGF1c2UudGVybSwgY2xhdXNlLmVkaXREaXN0YW5jZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyhjbGF1c2UudGVybSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCByZXByZXNlbnRpbmcgYSBzaW5nbGUgc3RyaW5nIHdpdGggYSBzcGVjaWZpZWRcbiAqIGVkaXQgZGlzdGFuY2UuXG4gKlxuICogSW5zZXJ0aW9ucywgZGVsZXRpb25zLCBzdWJzdGl0dXRpb25zIGFuZCB0cmFuc3Bvc2l0aW9ucyBhcmUgZWFjaFxuICogdHJlYXRlZCBhcyBhbiBlZGl0IGRpc3RhbmNlIG9mIDEuXG4gKlxuICogSW5jcmVhc2luZyB0aGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHdpbGwgaGF2ZSBhIGRyYW1hdGljIGltcGFjdFxuICogb24gdGhlIHBlcmZvcm1hbmNlIG9mIGJvdGggY3JlYXRpbmcgYW5kIGludGVyc2VjdGluZyB0aGVzZSBUb2tlblNldHMuXG4gKiBJdCBpcyBhZHZpc2VkIHRvIGtlZXAgdGhlIGVkaXQgZGlzdGFuY2UgbGVzcyB0aGFuIDMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gY3JlYXRlIHRoZSB0b2tlbiBzZXQgZnJvbS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlZGl0RGlzdGFuY2UgLSBUaGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHRvIG1hdGNoLlxuICogQHJldHVybnMge2x1bnIuVmVjdG9yfVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyA9IGZ1bmN0aW9uIChzdHIsIGVkaXREaXN0YW5jZSkge1xuICB2YXIgcm9vdCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBub2RlOiByb290LFxuICAgIGVkaXRzUmVtYWluaW5nOiBlZGl0RGlzdGFuY2UsXG4gICAgc3RyOiBzdHJcbiAgfV07XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIHZhciBmcmFtZSA9IHN0YWNrLnBvcCgpO1xuXG4gICAgdmFyIGNoYXI7XG4gICAgLy8gbm8gZWRpdFxuICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID4gMCkge1xuICAgICAgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMCk7XG5cbiAgICAgIHZhciBub0VkaXROb2RlO1xuICAgICAgaWYgKGNoYXIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBub0VkaXROb2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vRWRpdE5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdID0gbm9FZGl0Tm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICBub0VkaXROb2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IG5vRWRpdE5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlbGV0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSBkZWxldGlvbiBpZiB3ZSBoYXZlIGVub3VnaCBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgaWYgdGhlcmUgYXJlIGNoYXJhY3RlcnMgbGVmdCB0byBkZWxldGUgaW4gdGhlIHN0cmluZ1xuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNoYXIgPSBmcmFtZS5zdHIuY2hhckF0KDEpO1xuXG4gICAgICB2YXIgZGVsZXRpb25Ob2RlO1xuICAgICAgaWYgKGNoYXIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBkZWxldGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IGRlbGV0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPD0gMikge1xuICAgICAgICBkZWxldGlvbk5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogZGVsZXRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGVsZXRpb25cbiAgICAvLyBqdXN0IHJlbW92aW5nIHRoZSBsYXN0IGNoYXJhY3RlciBmcm9tIHRoZSBzdHJcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgZnJhbWUubm9kZS5maW5hbCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHN1YnN0aXR1dGlvbk5vZGU7XG4gICAgLy8gc3Vic3RpdHV0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSBzdWJzdGl0dXRpb24gaWYgd2UgaGF2ZSBlbm91Z2ggZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gc3Vic3RpdHV0ZVxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+PSAxKSB7XG4gICAgICBpZiAoXCIqXCIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tcIipcIl0gPSBzdWJzdGl0dXRpb25Ob2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbk5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogc3Vic3RpdHV0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbnNlcnRpb25Ob2RlO1xuICAgIC8vIGluc2VydGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGluc2VydGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCkge1xuICAgICAgaWYgKFwiKlwiIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gaW5zZXJ0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBpbnNlcnRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdHJhbnNwb3NpdGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgdHJhbnNwb3NpdGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIHRoZXJlIGFyZSBlbm91Z2ggY2hhcmFjdGVycyB0byB0cmFuc3Bvc2VcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgY2hhckEgPSBmcmFtZS5zdHIuY2hhckF0KDApLFxuICAgICAgICAgIGNoYXJCID0gZnJhbWUuc3RyLmNoYXJBdCgxKSxcbiAgICAgICAgICB0cmFuc3Bvc2VOb2RlO1xuXG4gICAgICBpZiAoY2hhckIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyQl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyQl0gPSB0cmFuc3Bvc2VOb2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogdHJhbnNwb3NlTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogY2hhckEgKyBmcmFtZS5zdHIuc2xpY2UoMilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJvb3Q7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBUb2tlblNldCBmcm9tIGEgc3RyaW5nLlxuICpcbiAqIFRoZSBzdHJpbmcgbWF5IGNvbnRhaW4gb25lIG9yIG1vcmUgd2lsZGNhcmQgY2hhcmFjdGVycyAoKilcbiAqIHRoYXQgd2lsbCBhbGxvdyB3aWxkY2FyZCBtYXRjaGluZyB3aGVuIGludGVyc2VjdGluZyB3aXRoXG4gKiBhbm90aGVyIFRva2VuU2V0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBhIFRva2VuU2V0IGZyb20uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgbm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCksXG4gICAgICByb290ID0gbm9kZSxcbiAgICAgIHdpbGRjYXJkRm91bmQgPSBmYWxzZTtcblxuICAvKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGFsbCBjaGFyYWN0ZXJzIHdpdGhpbiB0aGUgcGFzc2VkIHN0cmluZ1xuICAgKiBhcHBlbmRpbmcgYSBub2RlIGZvciBlYWNoIGNoYXJhY3Rlci5cbiAgICpcbiAgICogQXMgc29vbiBhcyBhIHdpbGRjYXJkIGNoYXJhY3RlciBpcyBmb3VuZCB0aGVuIGEgc2VsZlxuICAgKiByZWZlcmVuY2luZyBlZGdlIGlzIGludHJvZHVjZWQgdG8gY29udGludWFsbHkgbWF0Y2hcbiAgICogYW55IG51bWJlciBvZiBhbnkgY2hhcmFjdGVycy5cbiAgICovXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgY2hhciA9IHN0cltpXSxcbiAgICAgICAgZmluYWwgPSAoaSA9PSBsZW4gLSAxKTtcblxuICAgIGlmIChjaGFyID09IFwiKlwiKSB7XG4gICAgICB3aWxkY2FyZEZvdW5kID0gdHJ1ZTtcbiAgICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBub2RlO1xuICAgICAgbm9kZS5maW5hbCA9IGZpbmFsO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgIG5leHQuZmluYWwgPSBmaW5hbDtcblxuICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHQ7XG4gICAgICBub2RlID0gbmV4dDtcblxuICAgICAgLy8gVE9ETzogaXMgdGhpcyBuZWVkZWQgYW55bW9yZT9cbiAgICAgIGlmICh3aWxkY2FyZEZvdW5kKSB7XG4gICAgICAgIG5vZGUuZWRnZXNbXCIqXCJdID0gcm9vdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm9vdDtcbn07XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBUb2tlblNldCBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHdvcmRzID0gW107XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBwcmVmaXg6IFwiXCIsXG4gICAgbm9kZTogdGhpc1xuICB9XTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgdmFyIGZyYW1lID0gc3RhY2sucG9wKCksXG4gICAgICAgIGVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIGxlbiA9IGVkZ2VzLmxlbmd0aDtcblxuICAgIGlmIChmcmFtZS5ub2RlLmZpbmFsKSB7XG4gICAgICB3b3Jkcy5wdXNoKGZyYW1lLnByZWZpeCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXTtcblxuICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgIHByZWZpeDogZnJhbWUucHJlZml4LmNvbmNhdChlZGdlKSxcbiAgICAgICAgbm9kZTogZnJhbWUubm9kZS5lZGdlc1tlZGdlXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdvcmRzO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBUb2tlblNldC5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGFsbG93IFRva2VuU2V0cyB0byBiZSB1c2VkIGFzIGtleXNcbiAqIGluIG9iamVjdHMsIGxhcmdlbHkgdG8gYWlkIHRoZSBjb25zdHJ1Y3Rpb24gYW5kIG1pbmltaXNhdGlvblxuICogb2YgYSBUb2tlblNldC4gQXMgc3VjaCBpdCBpcyBub3QgZGVzaWduZWQgdG8gYmUgYSBodW1hblxuICogZnJpZW5kbHkgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRva2VuU2V0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAvLyBOT1RFOiBVc2luZyBPYmplY3Qua2V5cyBoZXJlIGFzIHRoaXMuZWRnZXMgaXMgdmVyeSBsaWtlbHlcbiAgLy8gdG8gZW50ZXIgJ2hhc2gtbW9kZScgd2l0aCBtYW55IGtleXMgYmVpbmcgYWRkZWRcbiAgLy9cbiAgLy8gYXZvaWRpbmcgYSBmb3ItaW4gbG9vcCBoZXJlIGFzIGl0IGxlYWRzIHRvIHRoZSBmdW5jdGlvblxuICAvLyBiZWluZyBkZS1vcHRpbWlzZWQgKGF0IGxlYXN0IGluIFY4KS4gRnJvbSBzb21lIHNpbXBsZVxuICAvLyBiZW5jaG1hcmtzIHRoZSBwZXJmb3JtYW5jZSBpcyBjb21wYXJhYmxlLCBidXQgYWxsb3dpbmdcbiAgLy8gVjggdG8gb3B0aW1pemUgbWF5IG1lYW4gZWFzeSBwZXJmb3JtYW5jZSB3aW5zIGluIHRoZSBmdXR1cmUuXG5cbiAgaWYgKHRoaXMuX3N0cikge1xuICAgIHJldHVybiB0aGlzLl9zdHI7XG4gIH1cblxuICB2YXIgc3RyID0gdGhpcy5maW5hbCA/ICcxJyA6ICcwJyxcbiAgICAgIGxhYmVscyA9IE9iamVjdC5rZXlzKHRoaXMuZWRnZXMpLnNvcnQoKSxcbiAgICAgIGxlbiA9IGxhYmVscy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBsYWJlbCA9IGxhYmVsc1tpXSxcbiAgICAgICAgbm9kZSA9IHRoaXMuZWRnZXNbbGFiZWxdO1xuXG4gICAgc3RyID0gc3RyICsgbGFiZWwgKyBub2RlLmlkO1xuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBUb2tlblNldCB0aGF0IGlzIHRoZSBpbnRlcnNlY3Rpb24gb2ZcbiAqIHRoaXMgVG9rZW5TZXQgYW5kIHRoZSBwYXNzZWQgVG9rZW5TZXQuXG4gKlxuICogVGhpcyBpbnRlcnNlY3Rpb24gd2lsbCB0YWtlIGludG8gYWNjb3VudCBhbnkgd2lsZGNhcmRzXG4gKiBjb250YWluZWQgd2l0aGluIHRoZSBUb2tlblNldC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5TZXR9IGIgLSBBbiBvdGhlciBUb2tlblNldCB0byBpbnRlcnNlY3Qgd2l0aC5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbiAoYikge1xuICB2YXIgb3V0cHV0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgdmFyIGZyYW1lO1xuXG4gIHZhciBzdGFjayA9IFt7XG4gICAgcU5vZGU6IGIsXG4gICAgb3V0cHV0OiBvdXRwdXQsXG4gICAgbm9kZTogdGhpc1xuICB9XTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgZnJhbWUgPSBzdGFjay5wb3AoKTtcblxuICAgIC8vIE5PVEU6IEFzIHdpdGggdGhlICN0b1N0cmluZyBtZXRob2QsIHdlIGFyZSB1c2luZ1xuICAgIC8vIE9iamVjdC5rZXlzIGFuZCBhIGZvciBsb29wIGluc3RlYWQgb2YgYSBmb3ItaW4gbG9vcFxuICAgIC8vIGFzIGJvdGggb2YgdGhlc2Ugb2JqZWN0cyBlbnRlciAnaGFzaCcgbW9kZSwgY2F1c2luZ1xuICAgIC8vIHRoZSBmdW5jdGlvbiB0byBiZSBkZS1vcHRpbWlzZWQgaW4gVjhcbiAgICB2YXIgcUVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUucU5vZGUuZWRnZXMpLFxuICAgICAgICBxTGVuID0gcUVkZ2VzLmxlbmd0aCxcbiAgICAgICAgbkVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIG5MZW4gPSBuRWRnZXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgcSA9IDA7IHEgPCBxTGVuOyBxKyspIHtcbiAgICAgIHZhciBxRWRnZSA9IHFFZGdlc1txXTtcblxuICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBuTGVuOyBuKyspIHtcbiAgICAgICAgdmFyIG5FZGdlID0gbkVkZ2VzW25dO1xuXG4gICAgICAgIGlmIChuRWRnZSA9PSBxRWRnZSB8fCBxRWRnZSA9PSAnKicpIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbbkVkZ2VdLFxuICAgICAgICAgICAgICBxTm9kZSA9IGZyYW1lLnFOb2RlLmVkZ2VzW3FFZGdlXSxcbiAgICAgICAgICAgICAgZmluYWwgPSBub2RlLmZpbmFsICYmIHFOb2RlLmZpbmFsLFxuICAgICAgICAgICAgICBuZXh0O1xuXG4gICAgICAgICAgaWYgKG5FZGdlIGluIGZyYW1lLm91dHB1dC5lZGdlcykge1xuICAgICAgICAgICAgLy8gYW4gZWRnZSBhbHJlYWR5IGV4aXN0cyBmb3IgdGhpcyBjaGFyYWN0ZXJcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gY3JlYXRlIGEgbmV3IG5vZGUsIGp1c3Qgc2V0IHRoZSBmaW5hbGl0eVxuICAgICAgICAgICAgLy8gYml0IHVubGVzcyB0aGlzIG5vZGUgaXMgYWxyZWFkeSBmaW5hbFxuICAgICAgICAgICAgbmV4dCA9IGZyYW1lLm91dHB1dC5lZGdlc1tuRWRnZV07XG4gICAgICAgICAgICBuZXh0LmZpbmFsID0gbmV4dC5maW5hbCB8fCBmaW5hbDtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBlZGdlIGV4aXN0cyB5ZXQsIG11c3QgY3JlYXRlIG9uZVxuICAgICAgICAgICAgLy8gc2V0IHRoZSBmaW5hbGl0eSBiaXQgYW5kIGluc2VydCBpdFxuICAgICAgICAgICAgLy8gaW50byB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgICAgIG5leHQuZmluYWwgPSBmaW5hbDtcbiAgICAgICAgICAgIGZyYW1lLm91dHB1dC5lZGdlc1tuRWRnZV0gPSBuZXh0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgICAgcU5vZGU6IHFOb2RlLFxuICAgICAgICAgICAgb3V0cHV0OiBuZXh0LFxuICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucHJldmlvdXNXb3JkID0gXCJcIjtcbiAgdGhpcy5yb290ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgdGhpcy51bmNoZWNrZWROb2RlcyA9IFtdO1xuICB0aGlzLm1pbmltaXplZE5vZGVzID0ge307XG59O1xuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4gIHZhciBub2RlLFxuICAgICAgY29tbW9uUHJlZml4ID0gMDtcblxuICBpZiAod29yZCA8IHRoaXMucHJldmlvdXNXb3JkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yIChcIk91dCBvZiBvcmRlciB3b3JkIGluc2VydGlvblwiKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZC5sZW5ndGggJiYgaSA8IHRoaXMucHJldmlvdXNXb3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHdvcmRbaV0gIT0gdGhpcy5wcmV2aW91c1dvcmRbaV0pIGJyZWFrO1xuICAgIGNvbW1vblByZWZpeCsrO1xuICB9XG5cbiAgdGhpcy5taW5pbWl6ZShjb21tb25QcmVmaXgpO1xuXG4gIGlmICh0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIG5vZGUgPSB0aGlzLnJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgbm9kZSA9IHRoaXMudW5jaGVja2VkTm9kZXNbdGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggLSAxXS5jaGlsZDtcbiAgfVxuXG4gIGZvciAodmFyIGogPSBjb21tb25QcmVmaXg7IGogPCB3b3JkLmxlbmd0aDsgaisrKSB7XG4gICAgdmFyIG5leHROb2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKSxcbiAgICAgICAgY2hhciA9IHdvcmRbal07XG5cbiAgICBub2RlLmVkZ2VzW2NoYXJdID0gbmV4dE5vZGU7XG5cbiAgICB0aGlzLnVuY2hlY2tlZE5vZGVzLnB1c2goe1xuICAgICAgcGFyZW50OiBub2RlLFxuICAgICAgY2hhcjogY2hhcixcbiAgICAgIGNoaWxkOiBuZXh0Tm9kZVxuICAgIH0pO1xuXG4gICAgbm9kZSA9IG5leHROb2RlO1xuICB9XG5cbiAgbm9kZS5maW5hbCA9IHRydWU7XG4gIHRoaXMucHJldmlvdXNXb3JkID0gd29yZDtcbn07XG5cbmx1bnIuVG9rZW5TZXQuQnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm1pbmltaXplKDApO1xufTtcblxubHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5taW5pbWl6ZSA9IGZ1bmN0aW9uIChkb3duVG8pIHtcbiAgZm9yICh2YXIgaSA9IHRoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoIC0gMTsgaSA+PSBkb3duVG87IGktLSkge1xuICAgIHZhciBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1tpXSxcbiAgICAgICAgY2hpbGRLZXkgPSBub2RlLmNoaWxkLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoY2hpbGRLZXkgaW4gdGhpcy5taW5pbWl6ZWROb2Rlcykge1xuICAgICAgbm9kZS5wYXJlbnQuZWRnZXNbbm9kZS5jaGFyXSA9IHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYWNoZSB0aGUga2V5IGZvciB0aGlzIG5vZGUgc2luY2VcbiAgICAgIC8vIHdlIGtub3cgaXQgY2FuJ3QgY2hhbmdlIGFueW1vcmVcbiAgICAgIG5vZGUuY2hpbGQuX3N0ciA9IGNoaWxkS2V5O1xuXG4gICAgICB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XSA9IG5vZGUuY2hpbGQ7XG4gICAgfVxuXG4gICAgdGhpcy51bmNoZWNrZWROb2Rlcy5wb3AoKTtcbiAgfVxufTtcbi8qIVxuICogbHVuci5JbmRleFxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQW4gaW5kZXggY29udGFpbnMgdGhlIGJ1aWx0IGluZGV4IG9mIGFsbCBkb2N1bWVudHMgYW5kIHByb3ZpZGVzIGEgcXVlcnkgaW50ZXJmYWNlXG4gKiB0byB0aGUgaW5kZXguXG4gKlxuICogVXN1YWxseSBpbnN0YW5jZXMgb2YgbHVuci5JbmRleCB3aWxsIG5vdCBiZSBjcmVhdGVkIHVzaW5nIHRoaXMgY29uc3RydWN0b3IsIGluc3RlYWRcbiAqIGx1bnIuQnVpbGRlciBzaG91bGQgYmUgdXNlZCB0byBjb25zdHJ1Y3QgbmV3IGluZGV4ZXMsIG9yIGx1bnIuSW5kZXgubG9hZCBzaG91bGQgYmVcbiAqIHVzZWQgdG8gbG9hZCBwcmV2aW91c2x5IGJ1aWx0IGFuZCBzZXJpYWxpemVkIGluZGV4ZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMgLSBUaGUgYXR0cmlidXRlcyBvZiB0aGUgYnVpbHQgc2VhcmNoIGluZGV4LlxuICogQHBhcmFtIHtPYmplY3R9IGF0dHJzLmludmVydGVkSW5kZXggLSBBbiBpbmRleCBvZiB0ZXJtL2ZpZWxkIHRvIGRvY3VtZW50IHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbHVuci5WZWN0b3I+fSBhdHRycy5kb2N1bWVudFZlY3RvcnMgLSBEb2N1bWVudCB2ZWN0b3JzIGtleWVkIGJ5IGRvY3VtZW50IHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYXR0cnMudG9rZW5TZXQgLSBBbiBzZXQgb2YgYWxsIGNvcnB1cyB0b2tlbnMuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRycy5maWVsZHMgLSBUaGUgbmFtZXMgb2YgaW5kZXhlZCBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmV9IGF0dHJzLnBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHRvIHVzZSBmb3Igc2VhcmNoIHRlcm1zLlxuICovXG5sdW5yLkluZGV4ID0gZnVuY3Rpb24gKGF0dHJzKSB7XG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IGF0dHJzLmludmVydGVkSW5kZXg7XG4gIHRoaXMuZmllbGRWZWN0b3JzID0gYXR0cnMuZmllbGRWZWN0b3JzO1xuICB0aGlzLnRva2VuU2V0ID0gYXR0cnMudG9rZW5TZXQ7XG4gIHRoaXMuZmllbGRzID0gYXR0cnMuZmllbGRzO1xuICB0aGlzLnBpcGVsaW5lID0gYXR0cnMucGlwZWxpbmU7XG59O1xuXG4vKipcbiAqIEEgcmVzdWx0IGNvbnRhaW5zIGRldGFpbHMgb2YgYSBkb2N1bWVudCBtYXRjaGluZyBhIHNlYXJjaCBxdWVyeS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IGx1bnIuSW5kZXh+UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcmVmIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdGhpcyByZXN1bHQgcmVwcmVzZW50cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzY29yZSAtIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgaG93IHNpbWlsYXIgdGhpcyBkb2N1bWVudCBpcyB0byB0aGUgcXVlcnkuXG4gKiBAcHJvcGVydHkge2x1bnIuTWF0Y2hEYXRhfSBtYXRjaERhdGEgLSBDb250YWlucyBtZXRhZGF0YSBhYm91dCB0aGlzIG1hdGNoIGluY2x1ZGluZyB3aGljaCB0ZXJtKHMpIGNhdXNlZCB0aGUgbWF0Y2guXG4gKi9cblxuLyoqXG4gKiBBbHRob3VnaCBsdW5yIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGNyZWF0ZSBxdWVyaWVzIHVzaW5nIGx1bnIuUXVlcnksIGl0IGFsc28gcHJvdmlkZXMgYSBzaW1wbGVcbiAqIHF1ZXJ5IGxhbmd1YWdlIHdoaWNoIGl0c2VsZiBpcyBwYXJzZWQgaW50byBhbiBpbnN0YW5jZSBvZiBsdW5yLlF1ZXJ5LlxuICpcbiAqIEZvciBwcm9ncmFtbWF0aWNhbGx5IGJ1aWxkaW5nIHF1ZXJpZXMgaXQgaXMgYWR2aXNlZCB0byBkaXJlY3RseSB1c2UgbHVuci5RdWVyeSwgdGhlIHF1ZXJ5IGxhbmd1YWdlXG4gKiBpcyBiZXN0IHVzZWQgZm9yIGh1bWFuIGVudGVyZWQgdGV4dCByYXRoZXIgdGhhbiBwcm9ncmFtIGdlbmVyYXRlZCB0ZXh0LlxuICpcbiAqIEF0IGl0cyBzaW1wbGVzdCBxdWVyaWVzIGNhbiBqdXN0IGJlIGEgc2luZ2xlIHRlcm0sIGUuZy4gYGhlbGxvYCwgbXVsdGlwbGUgdGVybXMgYXJlIGFsc28gc3VwcG9ydGVkXG4gKiBhbmQgd2lsbCBiZSBjb21iaW5lZCB3aXRoIE9SLCBlLmcgYGhlbGxvIHdvcmxkYCB3aWxsIG1hdGNoIGRvY3VtZW50cyB0aGF0IGNvbnRhaW4gZWl0aGVyICdoZWxsbydcbiAqIG9yICd3b3JsZCcsIHRob3VnaCB0aG9zZSB0aGF0IGNvbnRhaW4gYm90aCB3aWxsIHJhbmsgaGlnaGVyIGluIHRoZSByZXN1bHRzLlxuICpcbiAqIFdpbGRjYXJkcyBjYW4gYmUgaW5jbHVkZWQgaW4gdGVybXMgdG8gbWF0Y2ggb25lIG9yIG1vcmUgdW5zcGVjaWZpZWQgY2hhcmFjdGVycywgdGhlc2Ugd2lsZGNhcmRzIGNhblxuICogYmUgaW5zZXJ0ZWQgYW55d2hlcmUgd2l0aGluIHRoZSB0ZXJtLCBhbmQgbW9yZSB0aGFuIG9uZSB3aWxkY2FyZCBjYW4gZXhpc3QgaW4gYSBzaW5nbGUgdGVybS4gQWRkaW5nXG4gKiB3aWxkY2FyZHMgd2lsbCBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHdpbGwgYmUgZm91bmQgYnV0IGNhbiBhbHNvIGhhdmUgYSBuZWdhdGl2ZVxuICogaW1wYWN0IG9uIHF1ZXJ5IHBlcmZvcm1hbmNlLCBlc3BlY2lhbGx5IHdpdGggd2lsZGNhcmRzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSB0ZXJtLlxuICpcbiAqIFRlcm1zIGNhbiBiZSByZXN0cmljdGVkIHRvIHNwZWNpZmljIGZpZWxkcywgZS5nLiBgdGl0bGU6aGVsbG9gLCBvbmx5IGRvY3VtZW50cyB3aXRoIHRoZSB0ZXJtXG4gKiBoZWxsbyBpbiB0aGUgdGl0bGUgZmllbGQgd2lsbCBtYXRjaCB0aGlzIHF1ZXJ5LiBVc2luZyBhIGZpZWxkIG5vdCBwcmVzZW50IGluIHRoZSBpbmRleCB3aWxsIGxlYWRcbiAqIHRvIGFuIGVycm9yIGJlaW5nIHRocm93bi5cbiAqXG4gKiBNb2RpZmllcnMgY2FuIGFsc28gYmUgYWRkZWQgdG8gdGVybXMsIGx1bnIgc3VwcG9ydHMgZWRpdCBkaXN0YW5jZSBhbmQgYm9vc3QgbW9kaWZpZXJzIG9uIHRlcm1zLiBBIHRlcm1cbiAqIGJvb3N0IHdpbGwgbWFrZSBkb2N1bWVudHMgbWF0Y2hpbmcgdGhhdCB0ZXJtIHNjb3JlIGhpZ2hlciwgZS5nLiBgZm9vXjVgLiBFZGl0IGRpc3RhbmNlIGlzIGFsc28gc3VwcG9ydGVkXG4gKiB0byBwcm92aWRlIGZ1enp5IG1hdGNoaW5nLCBlLmcuICdoZWxsb34yJyB3aWxsIG1hdGNoIGRvY3VtZW50cyB3aXRoIGhlbGxvIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyLlxuICogQXZvaWQgbGFyZ2UgdmFsdWVzIGZvciBlZGl0IGRpc3RhbmNlIHRvIGltcHJvdmUgcXVlcnkgcGVyZm9ybWFuY2UuXG4gKlxuICogVG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgYmFja3NsYXNoIGNoYXJhY3RlciAnXFwnIGNhbiBiZSB1c2VkLCB0aGlzIGFsbG93cyBzZWFyY2hlcyB0byBpbmNsdWRlXG4gKiBjaGFyYWN0ZXJzIHRoYXQgd291bGQgbm9ybWFsbHkgYmUgY29uc2lkZXJlZCBtb2RpZmllcnMsIGUuZy4gYGZvb1xcfjJgIHdpbGwgc2VhcmNoIGZvciBhIHRlcm0gXCJmb29+MlwiIGluc3RlYWRcbiAqIG9mIGF0dGVtcHRpbmcgdG8gYXBwbHkgYSBib29zdCBvZiAyIHRvIHRoZSBzZWFyY2ggdGVybSBcImZvb1wiLlxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd9IGx1bnIuSW5kZXh+UXVlcnlTdHJpbmdcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlNpbXBsZSBzaW5nbGUgdGVybSBxdWVyeTwvY2FwdGlvbj5cbiAqIGhlbGxvXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NdWx0aXBsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICogaGVsbG8gd29ybGRcbiAqIEBleGFtcGxlIDxjYXB0aW9uPnRlcm0gc2NvcGVkIHRvIGEgZmllbGQ8L2NhcHRpb24+XG4gKiB0aXRsZTpoZWxsb1xuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSB3aXRoIGEgYm9vc3Qgb2YgMTA8L2NhcHRpb24+XG4gKiBoZWxsb14xMFxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMjwvY2FwdGlvbj5cbiAqIGhlbGxvfjJcbiAqL1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgc2VhcmNoIGFnYWluc3QgdGhlIGluZGV4IHVzaW5nIGx1bnIgcXVlcnkgc3ludGF4LlxuICpcbiAqIFJlc3VsdHMgd2lsbCBiZSByZXR1cm5lZCBzb3J0ZWQgYnkgdGhlaXIgc2NvcmUsIHRoZSBtb3N0IHJlbGV2YW50IHJlc3VsdHNcbiAqIHdpbGwgYmUgcmV0dXJuZWQgZmlyc3QuXG4gKlxuICogRm9yIG1vcmUgcHJvZ3JhbW1hdGljIHF1ZXJ5aW5nIHVzZSBsdW5yLkluZGV4I3F1ZXJ5LlxuICpcbiAqIEBwYXJhbSB7bHVuci5JbmRleH5RdWVyeVN0cmluZ30gcXVlcnlTdHJpbmcgLSBBIHN0cmluZyBjb250YWluaW5nIGEgbHVuciBxdWVyeS5cbiAqIEB0aHJvd3Mge2x1bnIuUXVlcnlQYXJzZUVycm9yfSBJZiB0aGUgcGFzc2VkIHF1ZXJ5IHN0cmluZyBjYW5ub3QgYmUgcGFyc2VkLlxuICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChxdWVyeVN0cmluZykge1xuICByZXR1cm4gdGhpcy5xdWVyeShmdW5jdGlvbiAocXVlcnkpIHtcbiAgICB2YXIgcGFyc2VyID0gbmV3IGx1bnIuUXVlcnlQYXJzZXIocXVlcnlTdHJpbmcsIHF1ZXJ5KTtcbiAgICBwYXJzZXIucGFyc2UoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEEgcXVlcnkgYnVpbGRlciBjYWxsYmFjayBwcm92aWRlcyBhIHF1ZXJ5IG9iamVjdCB0byBiZSB1c2VkIHRvIGV4cHJlc3NcbiAqIHRoZSBxdWVyeSB0byBwZXJmb3JtIG9uIHRoZSBpbmRleC5cbiAqXG4gKiBAY2FsbGJhY2sgbHVuci5JbmRleH5xdWVyeUJ1aWxkZXJcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX0gcXVlcnkgLSBUaGUgcXVlcnkgb2JqZWN0IHRvIGJ1aWxkIHVwLlxuICogQHRoaXMgbHVuci5RdWVyeVxuICovXG5cbi8qKlxuICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBpbmRleCB1c2luZyB0aGUgeWllbGRlZCBsdW5yLlF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBJZiBwZXJmb3JtaW5nIHByb2dyYW1tYXRpYyBxdWVyaWVzIGFnYWluc3QgdGhlIGluZGV4LCB0aGlzIG1ldGhvZCBpcyBwcmVmZXJyZWRcbiAqIG92ZXIgbHVuci5JbmRleCNzZWFyY2ggc28gYXMgdG8gYXZvaWQgdGhlIGFkZGl0aW9uYWwgcXVlcnkgcGFyc2luZyBvdmVyaGVhZC5cbiAqXG4gKiBBIHF1ZXJ5IG9iamVjdCBpcyB5aWVsZGVkIHRvIHRoZSBzdXBwbGllZCBmdW5jdGlvbiB3aGljaCBzaG91bGQgYmUgdXNlZCB0b1xuICogZXhwcmVzcyB0aGUgcXVlcnkgdG8gYmUgcnVuIGFnYWluc3QgdGhlIGluZGV4LlxuICpcbiAqIE5vdGUgdGhhdCBhbHRob3VnaCB0aGlzIGZ1bmN0aW9uIHRha2VzIGEgY2FsbGJhY2sgcGFyYW1ldGVyIGl0IGlzIF9ub3RfIGFuXG4gKiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLCB0aGUgY2FsbGJhY2sgaXMganVzdCB5aWVsZGVkIGEgcXVlcnkgb2JqZWN0IHRvIGJlXG4gKiBjdXN0b21pemVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5JbmRleH5xdWVyeUJ1aWxkZXJ9IGZuIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gYnVpbGQgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGZuKSB7XG4gIC8vIGZvciBlYWNoIHF1ZXJ5IGNsYXVzZVxuICAvLyAqIHByb2Nlc3MgdGVybXNcbiAgLy8gKiBleHBhbmQgdGVybXMgZnJvbSB0b2tlbiBzZXRcbiAgLy8gKiBmaW5kIG1hdGNoaW5nIGRvY3VtZW50cyBhbmQgbWV0YWRhdGFcbiAgLy8gKiBnZXQgZG9jdW1lbnQgdmVjdG9yc1xuICAvLyAqIHNjb3JlIGRvY3VtZW50c1xuXG4gIHZhciBxdWVyeSA9IG5ldyBsdW5yLlF1ZXJ5KHRoaXMuZmllbGRzKSxcbiAgICAgIG1hdGNoaW5nRmllbGRzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHF1ZXJ5VmVjdG9ycyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICB0ZXJtRmllbGRDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm4uY2FsbChxdWVyeSwgcXVlcnkpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVlcnkuY2xhdXNlcy5sZW5ndGg7IGkrKykge1xuICAgIC8qXG4gICAgICogVW5sZXNzIHRoZSBwaXBlbGluZSBoYXMgYmVlbiBkaXNhYmxlZCBmb3IgdGhpcyB0ZXJtLCB3aGljaCBpc1xuICAgICAqIHRoZSBjYXNlIGZvciB0ZXJtcyB3aXRoIHdpbGRjYXJkcywgd2UgbmVlZCB0byBwYXNzIHRoZSBjbGF1c2VcbiAgICAgKiB0ZXJtIHRocm91Z2ggdGhlIHNlYXJjaCBwaXBlbGluZS4gQSBwaXBlbGluZSByZXR1cm5zIGFuIGFycmF5XG4gICAgICogb2YgcHJvY2Vzc2VkIHRlcm1zLiBQaXBlbGluZSBmdW5jdGlvbnMgbWF5IGV4cGFuZCB0aGUgcGFzc2VkXG4gICAgICogdGVybSwgd2hpY2ggbWVhbnMgd2UgbWF5IGVuZCB1cCBwZXJmb3JtaW5nIG11bHRpcGxlIGluZGV4IGxvb2t1cHNcbiAgICAgKiBmb3IgYSBzaW5nbGUgcXVlcnkgdGVybS5cbiAgICAgKi9cbiAgICB2YXIgY2xhdXNlID0gcXVlcnkuY2xhdXNlc1tpXSxcbiAgICAgICAgdGVybXMgPSBudWxsO1xuXG4gICAgaWYgKGNsYXVzZS51c2VQaXBlbGluZSkge1xuICAgICAgdGVybXMgPSB0aGlzLnBpcGVsaW5lLnJ1blN0cmluZyhjbGF1c2UudGVybSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlcm1zID0gW2NsYXVzZS50ZXJtXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IHRlcm1zLmxlbmd0aDsgbSsrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW21dO1xuXG4gICAgICAvKlxuICAgICAgICogRWFjaCB0ZXJtIHJldHVybmVkIGZyb20gdGhlIHBpcGVsaW5lIG5lZWRzIHRvIHVzZSB0aGUgc2FtZSBxdWVyeVxuICAgICAgICogY2xhdXNlIG9iamVjdCwgZS5nLiB0aGUgc2FtZSBib29zdCBhbmQgb3IgZWRpdCBkaXN0YW5jZS4gVGhlXG4gICAgICAgKiBzaW1wbGVzdCB3YXkgdG8gZG8gdGhpcyBpcyB0byByZS11c2UgdGhlIGNsYXVzZSBvYmplY3QgYnV0IG11dGF0ZVxuICAgICAgICogaXRzIHRlcm0gcHJvcGVydHkuXG4gICAgICAgKi9cblxuICAgICAgY2xhdXNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjbGF1c2UpKTtcbiAgICAgIGNsYXVzZS50ZXJtID0gdGVybTtcblxuICAgICAgLypcbiAgICAgICAqIEZyb20gdGhlIHRlcm0gaW4gdGhlIGNsYXVzZSB3ZSBjcmVhdGUgYSB0b2tlbiBzZXQgd2hpY2ggd2lsbCB0aGVuXG4gICAgICAgKiBiZSB1c2VkIHRvIGludGVyc2VjdCB0aGUgaW5kZXhlcyB0b2tlbiBzZXQgdG8gZ2V0IGEgbGlzdCBvZiB0ZXJtc1xuICAgICAgICogdG8gbG9va3VwIGluIHRoZSBpbnZlcnRlZCBpbmRleFxuICAgICAgICovXG4gICAgICB2YXIgdGVybVRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQ2xhdXNlKGNsYXVzZSksXG4gICAgICAgICAgZXhwYW5kZWRUZXJtcyA9IHRoaXMudG9rZW5TZXQuaW50ZXJzZWN0KHRlcm1Ub2tlblNldCkudG9BcnJheSgpO1xuXG4gICAgICB2YXIgdGVybUluZGV4O1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHBhbmRlZFRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEZvciBlYWNoIHRlcm0gZ2V0IHRoZSBwb3N0aW5nIGFuZCB0ZXJtSW5kZXgsIHRoaXMgaXMgcmVxdWlyZWQgZm9yXG4gICAgICAgICAqIGJ1aWxkaW5nIHRoZSBxdWVyeSB2ZWN0b3IuXG4gICAgICAgICAqL1xuICAgICAgICAgIHZhciBleHBhbmRlZFRlcm0gPSBleHBhbmRlZFRlcm1zW2pdO1xuICAgICAgICAgIHZhciBwb3N0aW5nID0gdGhpcy5pbnZlcnRlZEluZGV4W2V4cGFuZGVkVGVybV07XG4gICAgICAgICAgaWYgKHBvc3RpbmcpIHtcbiAgICAgICAgICAgICAgdGVybUluZGV4ID0gcG9zdGluZy5faW5kZXg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNsYXVzZS5maWVsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIEZvciBlYWNoIGZpZWxkIHRoYXQgdGhpcyBxdWVyeSB0ZXJtIGlzIHNjb3BlZCBieSAoYnkgZGVmYXVsdFxuICAgICAgICAgICAqIGFsbCBmaWVsZHMgYXJlIGluIHNjb3BlKSB3ZSBuZWVkIHRvIGdldCBhbGwgdGhlIGRvY3VtZW50IHJlZnNcbiAgICAgICAgICAgKiB0aGF0IGhhdmUgdGhpcyB0ZXJtIGluIHRoYXQgZmllbGQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUaGUgcG9zdGluZyBpcyB0aGUgZW50cnkgaW4gdGhlIGludmVydGVkSW5kZXggZm9yIHRoZSBtYXRjaGluZ1xuICAgICAgICAgICAqIHRlcm0gZnJvbSBhYm92ZS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB2YXIgZmllbGQgPSBjbGF1c2UuZmllbGRzW2tdLFxuICAgICAgICAgICAgICBmaWVsZFBvc3RpbmcgPSBwb3N0aW5nW2ZpZWxkXSxcbiAgICAgICAgICAgICAgbWF0Y2hpbmdEb2N1bWVudFJlZnMgPSBPYmplY3Qua2V5cyhmaWVsZFBvc3RpbmcpLFxuICAgICAgICAgICAgICB0ZXJtRmllbGQgPSBleHBhbmRlZFRlcm0gKyBcIi9cIiArIGZpZWxkO1xuXG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBUbyBzdXBwb3J0IGZpZWxkIGxldmVsIGJvb3N0cyBhIHF1ZXJ5IHZlY3RvciBpcyBjcmVhdGVkIHBlclxuICAgICAgICAgICAqIGZpZWxkLiBUaGlzIHZlY3RvciBpcyBwb3B1bGF0ZWQgdXNpbmcgdGhlIHRlcm1JbmRleCBmb3VuZCBmb3JcbiAgICAgICAgICAgKiB0aGUgdGVybSBhbmQgYSB1bml0IHZhbHVlIHdpdGggdGhlIGFwcHJvcHJpYXRlIGJvb3N0IGFwcGxpZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBJZiB0aGUgcXVlcnkgdmVjdG9yIGZvciB0aGlzIGZpZWxkIGRvZXMgbm90IGV4aXN0IHlldCBpdCBuZWVkc1xuICAgICAgICAgICAqIHRvIGJlIGNyZWF0ZWQuXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHF1ZXJ5VmVjdG9yc1tmaWVsZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXSA9IG5ldyBsdW5yLlZlY3RvcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8qXG4gICAgICAgICAgICogVXNpbmcgdXBzZXJ0IGJlY2F1c2UgdGhlcmUgY291bGQgYWxyZWFkeSBiZSBhbiBlbnRyeSBpbiB0aGUgdmVjdG9yXG4gICAgICAgICAgICogZm9yIHRoZSB0ZXJtIHdlIGFyZSB3b3JraW5nIHdpdGguIEluIHRoYXQgY2FzZSB3ZSBqdXN0IGFkZCB0aGUgc2NvcmVzXG4gICAgICAgICAgICogdG9nZXRoZXIuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXS51cHNlcnQodGVybUluZGV4LCAxICogY2xhdXNlLmJvb3N0LCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSArIGI7IH0pO1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSWYgd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgdGVybSwgZmllbGQgY29tYm8gdGhlbiB3ZSd2ZSBhbHJlYWR5IGNvbGxlY3RlZFxuICAgICAgICAgICAqIHRoZSBtYXRjaGluZyBkb2N1bWVudHMgYW5kIG1ldGFkYXRhLCBubyBuZWVkIHRvIGdvIHRocm91Z2ggYWxsIHRoYXQgYWdhaW5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGVybUZpZWxkQ2FjaGVbdGVybUZpZWxkXSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBtYXRjaGluZ0RvY3VtZW50UmVmcy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIEFsbCBtZXRhZGF0YSBmb3IgdGhpcyB0ZXJtL2ZpZWxkL2RvY3VtZW50IHRyaXBsZVxuICAgICAgICAgICAgICogYXJlIHRoZW4gZXh0cmFjdGVkIGFuZCBjb2xsZWN0ZWQgaW50byBhbiBpbnN0YW5jZVxuICAgICAgICAgICAgICogb2YgbHVuci5NYXRjaERhdGEgcmVhZHkgdG8gYmUgcmV0dXJuZWQgaW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgKiByZXN1bHRzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBtYXRjaGluZ0RvY3VtZW50UmVmID0gbWF0Y2hpbmdEb2N1bWVudFJlZnNbbF0sXG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdGaWVsZFJlZiA9IG5ldyBsdW5yLkZpZWxkUmVmIChtYXRjaGluZ0RvY3VtZW50UmVmLCBmaWVsZCksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBmaWVsZFBvc3RpbmdbbWF0Y2hpbmdEb2N1bWVudFJlZl0sXG4gICAgICAgICAgICAgICAgZmllbGRNYXRjaDtcblxuICAgICAgICAgICAgaWYgKChmaWVsZE1hdGNoID0gbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0pID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0gPSBuZXcgbHVuci5NYXRjaERhdGEgKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpZWxkTWF0Y2guYWRkKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRlcm1GaWVsZENhY2hlW3Rlcm1GaWVsZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG1hdGNoaW5nRmllbGRSZWZzID0gT2JqZWN0LmtleXMobWF0Y2hpbmdGaWVsZHMpLFxuICAgICAgcmVzdWx0cyA9IFtdLFxuICAgICAgbWF0Y2hlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm9yICggaSA9IDA7IGkgPCBtYXRjaGluZ0ZpZWxkUmVmcy5sZW5ndGg7IGkrKykge1xuICAgIC8qXG4gICAgICogQ3VycmVudGx5IHdlIGhhdmUgZG9jdW1lbnQgZmllbGRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5LCBidXQgd2VcbiAgICAgKiBuZWVkIHRvIHJldHVybiBkb2N1bWVudHMuIFRoZSBtYXRjaERhdGEgYW5kIHNjb3JlcyBhcmUgY29tYmluZWRcbiAgICAgKiBmcm9tIG11bHRpcGxlIGZpZWxkcyBiZWxvbmdpbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBTY29yZXMgYXJlIGNhbGN1bGF0ZWQgYnkgZmllbGQsIHVzaW5nIHRoZSBxdWVyeSB2ZWN0b3JzIGNyZWF0ZWRcbiAgICAgKiBhYm92ZSwgYW5kIGNvbWJpbmVkIGludG8gYSBmaW5hbCBkb2N1bWVudCBzY29yZSB1c2luZyBhZGRpdGlvbi5cbiAgICAgKi9cbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcobWF0Y2hpbmdGaWVsZFJlZnNbaV0pLFxuICAgICAgICBkb2NSZWYgPSBmaWVsZFJlZi5kb2NSZWYsXG4gICAgICAgIGZpZWxkVmVjdG9yID0gdGhpcy5maWVsZFZlY3RvcnNbZmllbGRSZWZdLFxuICAgICAgICBzY29yZSA9IHF1ZXJ5VmVjdG9yc1tmaWVsZFJlZi5maWVsZE5hbWVdLnNpbWlsYXJpdHkoZmllbGRWZWN0b3IpLFxuICAgICAgICBkb2NNYXRjaDtcblxuICAgIGlmICgoZG9jTWF0Y2ggPSBtYXRjaGVzW2RvY1JlZl0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRvY01hdGNoLnNjb3JlICs9IHNjb3JlO1xuICAgICAgZG9jTWF0Y2gubWF0Y2hEYXRhLmNvbWJpbmUobWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1hdGNoID0ge1xuICAgICAgICByZWY6IGRvY1JlZixcbiAgICAgICAgc2NvcmU6IHNjb3JlLFxuICAgICAgICBtYXRjaERhdGE6IG1hdGNoaW5nRmllbGRzW2ZpZWxkUmVmXVxuICAgICAgfTtcbiAgICAgIG1hdGNoZXNbZG9jUmVmXSA9IG1hdGNoO1xuICAgICAgcmVzdWx0cy5wdXNoKG1hdGNoKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBTb3J0IHRoZSByZXN1bHRzIG9iamVjdHMgYnkgc2NvcmUsIGhpZ2hlc3QgZmlyc3QuXG4gICAqL1xuICByZXR1cm4gcmVzdWx0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICB9KTtcbn07XG5cbi8qKlxuICogUHJlcGFyZXMgdGhlIGluZGV4IGZvciBKU09OIHNlcmlhbGl6YXRpb24uXG4gKlxuICogVGhlIHNjaGVtYSBmb3IgdGhpcyBKU09OIGJsb2Igd2lsbCBiZSBkZXNjcmliZWQgaW4gYVxuICogc2VwYXJhdGUgSlNPTiBzY2hlbWEgZmlsZS5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5sdW5yLkluZGV4LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpbnZlcnRlZEluZGV4ID0gT2JqZWN0LmtleXModGhpcy5pbnZlcnRlZEluZGV4KVxuICAgIC5zb3J0KClcbiAgICAubWFwKGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICByZXR1cm4gW3Rlcm0sIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXV07XG4gICAgfSwgdGhpcyk7XG5cbiAgdmFyIGZpZWxkVmVjdG9ycyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRWZWN0b3JzKVxuICAgIC5tYXAoZnVuY3Rpb24gKHJlZikge1xuICAgICAgcmV0dXJuIFtyZWYsIHRoaXMuZmllbGRWZWN0b3JzW3JlZl0udG9KU09OKCldO1xuICAgIH0sIHRoaXMpO1xuXG4gIHJldHVybiB7XG4gICAgdmVyc2lvbjogbHVuci52ZXJzaW9uLFxuICAgIGZpZWxkczogdGhpcy5maWVsZHMsXG4gICAgZmllbGRWZWN0b3JzOiBmaWVsZFZlY3RvcnMsXG4gICAgaW52ZXJ0ZWRJbmRleDogaW52ZXJ0ZWRJbmRleCxcbiAgICBwaXBlbGluZTogdGhpcy5waXBlbGluZS50b0pTT04oKVxuICB9O1xufTtcblxuLyoqXG4gKiBMb2FkcyBhIHByZXZpb3VzbHkgc2VyaWFsaXplZCBsdW5yLkluZGV4XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlcmlhbGl6ZWRJbmRleCAtIEEgcHJldmlvdXNseSBzZXJpYWxpemVkIGx1bnIuSW5kZXhcbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4fVxuICovXG5sdW5yLkluZGV4LmxvYWQgPSBmdW5jdGlvbiAoc2VyaWFsaXplZEluZGV4KSB7XG4gIHZhciBhdHRycyA9IHt9LFxuICAgICAgZmllbGRWZWN0b3JzID0ge30sXG4gICAgICBzZXJpYWxpemVkVmVjdG9ycyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZFZlY3RvcnMsXG4gICAgICBpbnZlcnRlZEluZGV4ID0ge30sXG4gICAgICBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleCA9IHNlcmlhbGl6ZWRJbmRleC5pbnZlcnRlZEluZGV4LFxuICAgICAgdG9rZW5TZXRCdWlsZGVyID0gbmV3IGx1bnIuVG9rZW5TZXQuQnVpbGRlcigpLFxuICAgICAgcGlwZWxpbmUgPSBsdW5yLlBpcGVsaW5lLmxvYWQoc2VyaWFsaXplZEluZGV4LnBpcGVsaW5lKTtcblxuICBpZiAoc2VyaWFsaXplZEluZGV4LnZlcnNpb24gIT0gbHVuci52ZXJzaW9uKSB7XG4gICAgbHVuci51dGlscy53YXJuKFwiVmVyc2lvbiBtaXNtYXRjaCB3aGVuIGxvYWRpbmcgc2VyaWFsaXNlZCBpbmRleC4gQ3VycmVudCB2ZXJzaW9uIG9mIGx1bnIgJ1wiICsgbHVuci52ZXJzaW9uICsgXCInIGRvZXMgbm90IG1hdGNoIHNlcmlhbGl6ZWQgaW5kZXggJ1wiICsgc2VyaWFsaXplZEluZGV4LnZlcnNpb24gKyBcIidcIik7XG4gIH1cblxuICB2YXIgdHVwbGU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2VyaWFsaXplZFZlY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICB0dXBsZSA9IHNlcmlhbGl6ZWRWZWN0b3JzW2ldO1xuICAgIHJlZiA9IHR1cGxlWzBdO1xuICAgIGVsZW1lbnRzID0gdHVwbGVbMV07XG5cbiAgICBmaWVsZFZlY3RvcnNbcmVmXSA9IG5ldyBsdW5yLlZlY3RvcihlbGVtZW50cyk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgc2VyaWFsaXplZEludmVydGVkSW5kZXgubGVuZ3RoOyBpKyspIHtcbiAgICB0dXBsZSA9IHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4W2ldO1xuICAgIHRlcm0gPSB0dXBsZVswXTtcbiAgICBwb3N0aW5nID0gdHVwbGVbMV07XG5cbiAgICB0b2tlblNldEJ1aWxkZXIuaW5zZXJ0KHRlcm0pO1xuICAgIGludmVydGVkSW5kZXhbdGVybV0gPSBwb3N0aW5nO1xuICB9XG5cbiAgdG9rZW5TZXRCdWlsZGVyLmZpbmlzaCgpO1xuXG4gIGF0dHJzLmZpZWxkcyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZHM7XG5cbiAgYXR0cnMuZmllbGRWZWN0b3JzID0gZmllbGRWZWN0b3JzO1xuICBhdHRycy5pbnZlcnRlZEluZGV4ID0gaW52ZXJ0ZWRJbmRleDtcbiAgYXR0cnMudG9rZW5TZXQgPSB0b2tlblNldEJ1aWxkZXIucm9vdDtcbiAgYXR0cnMucGlwZWxpbmUgPSBwaXBlbGluZTtcblxuICByZXR1cm4gbmV3IGx1bnIuSW5kZXgoYXR0cnMpO1xufTtcbi8qIVxuICogbHVuci5CdWlsZGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLkJ1aWxkZXIgcGVyZm9ybXMgaW5kZXhpbmcgb24gYSBzZXQgb2YgZG9jdW1lbnRzIGFuZFxuICogcmV0dXJucyBpbnN0YW5jZXMgb2YgbHVuci5JbmRleCByZWFkeSBmb3IgcXVlcnlpbmcuXG4gKlxuICogQWxsIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGluZGV4IGlzIGRvbmUgdmlhIHRoZSBidWlsZGVyLCB0aGVcbiAqIGZpZWxkcyB0byBpbmRleCwgdGhlIGRvY3VtZW50IHJlZmVyZW5jZSwgdGhlIHRleHQgcHJvY2Vzc2luZ1xuICogcGlwZWxpbmUgYW5kIGRvY3VtZW50IHNjb3JpbmcgcGFyYW1ldGVycyBhcmUgYWxsIHNldCBvbiB0aGVcbiAqIGJ1aWxkZXIgYmVmb3JlIGluZGV4aW5nLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByb3BlcnR5IHtzdHJpbmd9IF9yZWYgLSBJbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHJlZmVyZW5jZSBmaWVsZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IF9maWVsZHMgLSBJbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IGZpZWxkcyB0byBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBpbnZlcnRlZEluZGV4IC0gVGhlIGludmVydGVkIGluZGV4IG1hcHMgdGVybXMgdG8gZG9jdW1lbnQgZmllbGRzLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGRvY3VtZW50VGVybUZyZXF1ZW5jaWVzIC0gS2VlcHMgdHJhY2sgb2YgZG9jdW1lbnQgdGVybSBmcmVxdWVuY2llcy5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBkb2N1bWVudExlbmd0aHMgLSBLZWVwcyB0cmFjayBvZiB0aGUgbGVuZ3RoIG9mIGRvY3VtZW50cyBhZGRlZCB0byB0aGUgaW5kZXguXG4gKiBAcHJvcGVydHkge2x1bnIudG9rZW5pemVyfSB0b2tlbml6ZXIgLSBGdW5jdGlvbiBmb3Igc3BsaXR0aW5nIHN0cmluZ3MgaW50byB0b2tlbnMgZm9yIGluZGV4aW5nLlxuICogQHByb3BlcnR5IHtsdW5yLlBpcGVsaW5lfSBwaXBlbGluZSAtIFRoZSBwaXBlbGluZSBwZXJmb3JtcyB0ZXh0IHByb2Nlc3Npbmcgb24gdG9rZW5zIGJlZm9yZSBpbmRleGluZy5cbiAqIEBwcm9wZXJ0eSB7bHVuci5QaXBlbGluZX0gc2VhcmNoUGlwZWxpbmUgLSBBIHBpcGVsaW5lIGZvciBwcm9jZXNzaW5nIHNlYXJjaCB0ZXJtcyBiZWZvcmUgcXVlcnlpbmcgdGhlIGluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBLZWVwcyB0cmFjayBvZiB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyBpbmRleGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IF9iIC0gQSBwYXJhbWV0ZXIgdG8gY29udHJvbCBmaWVsZCBsZW5ndGggbm9ybWFsaXphdGlvbiwgc2V0dGluZyB0aGlzIHRvIDAgZGlzYWJsZWQgbm9ybWFsaXphdGlvbiwgMSBmdWxseSBub3JtYWxpemVzIGZpZWxkIGxlbmd0aHMsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDAuNzUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gX2sxIC0gQSBwYXJhbWV0ZXIgdG8gY29udHJvbCBob3cgcXVpY2tseSBhbiBpbmNyZWFzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm0gZnJlcXVlbmN5IHNhdHVyYXRpb24sIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDEuMi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXJtSW5kZXggLSBBIGNvdW50ZXIgaW5jcmVtZW50ZWQgZm9yIGVhY2ggdW5pcXVlIHRlcm0sIHVzZWQgdG8gaWRlbnRpZnkgYSB0ZXJtcyBwb3NpdGlvbiBpbiB0aGUgdmVjdG9yIHNwYWNlLlxuICogQHByb3BlcnR5IHthcnJheX0gbWV0YWRhdGFXaGl0ZWxpc3QgLSBBIGxpc3Qgb2YgbWV0YWRhdGEga2V5cyB0aGF0IGhhdmUgYmVlbiB3aGl0ZWxpc3RlZCBmb3IgZW50cnkgaW4gdGhlIGluZGV4LlxuICovXG5sdW5yLkJ1aWxkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3JlZiA9IFwiaWRcIjtcbiAgdGhpcy5fZmllbGRzID0gW107XG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMgPSB7fTtcbiAgdGhpcy5maWVsZExlbmd0aHMgPSB7fTtcbiAgdGhpcy50b2tlbml6ZXIgPSBsdW5yLnRva2VuaXplcjtcbiAgdGhpcy5waXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG4gIHRoaXMuc2VhcmNoUGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZSgpO1xuICB0aGlzLmRvY3VtZW50Q291bnQgPSAwO1xuICB0aGlzLl9iID0gMC43NTtcbiAgdGhpcy5fazEgPSAxLjI7XG4gIHRoaXMudGVybUluZGV4ID0gMDtcbiAgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdCA9IFtdO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBkb2N1bWVudCBmaWVsZCB1c2VkIGFzIHRoZSBkb2N1bWVudCByZWZlcmVuY2UuIEV2ZXJ5IGRvY3VtZW50IG11c3QgaGF2ZSB0aGlzIGZpZWxkLlxuICogVGhlIHR5cGUgb2YgdGhpcyBmaWVsZCBpbiB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIGEgc3RyaW5nLCBpZiBpdCBpcyBub3QgYSBzdHJpbmcgaXQgd2lsbCBiZVxuICogY29lcmNlZCBpbnRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgdG9TdHJpbmcuXG4gKlxuICogVGhlIGRlZmF1bHQgcmVmIGlzICdpZCcuXG4gKlxuICogVGhlIHJlZiBzaG91bGQgX25vdF8gYmUgY2hhbmdlZCBkdXJpbmcgaW5kZXhpbmcsIGl0IHNob3VsZCBiZSBzZXQgYmVmb3JlIGFueSBkb2N1bWVudHMgYXJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguIENoYW5naW5nIGl0IGR1cmluZyBpbmRleGluZyBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbnQgcmVzdWx0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmIC0gVGhlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZSBmaWVsZCBpbiB0aGUgZG9jdW1lbnQuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKHJlZikge1xuICB0aGlzLl9yZWYgPSByZWY7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBmaWVsZCB0byB0aGUgbGlzdCBvZiBkb2N1bWVudCBmaWVsZHMgdGhhdCB3aWxsIGJlIGluZGV4ZWQuIEV2ZXJ5IGRvY3VtZW50IGJlaW5nXG4gKiBpbmRleGVkIHNob3VsZCBoYXZlIHRoaXMgZmllbGQuIE51bGwgdmFsdWVzIGZvciB0aGlzIGZpZWxkIGluIGluZGV4ZWQgZG9jdW1lbnRzIHdpbGxcbiAqIG5vdCBjYXVzZSBlcnJvcnMgYnV0IHdpbGwgbGltaXQgdGhlIGNoYW5jZSBvZiB0aGF0IGRvY3VtZW50IGJlaW5nIHJldHJpZXZlZCBieSBzZWFyY2hlcy5cbiAqXG4gKiBBbGwgZmllbGRzIHNob3VsZCBiZSBhZGRlZCBiZWZvcmUgYWRkaW5nIGRvY3VtZW50cyB0byB0aGUgaW5kZXguIEFkZGluZyBmaWVsZHMgYWZ0ZXJcbiAqIGEgZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZCB3aWxsIGhhdmUgbm8gZWZmZWN0IG9uIGFscmVhZHkgaW5kZXhlZCBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgYSBmaWVsZCB0byBpbmRleCBpbiBhbGwgZG9jdW1lbnRzLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHRoaXMuX2ZpZWxkcy5wdXNoKGZpZWxkKTtcbn07XG5cbi8qKlxuICogQSBwYXJhbWV0ZXIgdG8gdHVuZSB0aGUgYW1vdW50IG9mIGZpZWxkIGxlbmd0aCBub3JtYWxpc2F0aW9uIHRoYXQgaXMgYXBwbGllZCB3aGVuXG4gKiBjYWxjdWxhdGluZyByZWxldmFuY2Ugc2NvcmVzLiBBIHZhbHVlIG9mIDAgd2lsbCBjb21wbGV0ZWx5IGRpc2FibGUgYW55IG5vcm1hbGlzYXRpb25cbiAqIGFuZCBhIHZhbHVlIG9mIDEgd2lsbCBmdWxseSBub3JtYWxpc2UgZmllbGQgbGVuZ3Rocy4gVGhlIGRlZmF1bHQgaXMgMC43NS4gVmFsdWVzIG9mIGJcbiAqIHdpbGwgYmUgY2xhbXBlZCB0byB0aGUgcmFuZ2UgMCAtIDEuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5iID0gZnVuY3Rpb24gKG51bWJlcikge1xuICBpZiAobnVtYmVyIDwgMCkge1xuICAgIHRoaXMuX2IgPSAwO1xuICB9IGVsc2UgaWYgKG51bWJlciA+IDEpIHtcbiAgICB0aGlzLl9iID0gMTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9iID0gbnVtYmVyO1xuICB9XG59O1xuXG4vKipcbiAqIEEgcGFyYW1ldGVyIHRoYXQgY29udHJvbHMgdGhlIHNwZWVkIGF0IHdoaWNoIGEgcmlzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm1cbiAqIGZyZXF1ZW5jeSBzYXR1cmF0aW9uLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAxLjIuIFNldHRpbmcgdGhpcyB0byBhIGhpZ2hlciB2YWx1ZSB3aWxsIGdpdmVcbiAqIHNsb3dlciBzYXR1cmF0aW9uIGxldmVscywgYSBsb3dlciB2YWx1ZSB3aWxsIHJlc3VsdCBpbiBxdWlja2VyIHNhdHVyYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5rMSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgdGhpcy5fazEgPSBudW1iZXI7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBkb2N1bWVudCB0byB0aGUgaW5kZXguXG4gKlxuICogQmVmb3JlIGFkZGluZyBmaWVsZHMgdG8gdGhlIGluZGV4IHRoZSBpbmRleCBzaG91bGQgaGF2ZSBiZWVuIGZ1bGx5IHNldHVwLCB3aXRoIHRoZSBkb2N1bWVudFxuICogcmVmIGFuZCBhbGwgZmllbGRzIHRvIGluZGV4IGFscmVhZHkgaGF2aW5nIGJlZW4gc3BlY2lmaWVkLlxuICpcbiAqIFRoZSBkb2N1bWVudCBtdXN0IGhhdmUgYSBmaWVsZCBuYW1lIGFzIHNwZWNpZmllZCBieSB0aGUgcmVmIChieSBkZWZhdWx0IHRoaXMgaXMgJ2lkJykgYW5kXG4gKiBpdCBzaG91bGQgaGF2ZSBhbGwgZmllbGRzIGRlZmluZWQgZm9yIGluZGV4aW5nLCB0aG91Z2ggbnVsbCBvciB1bmRlZmluZWQgdmFsdWVzIHdpbGwgbm90XG4gKiBjYXVzZSBlcnJvcnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRvYyAtIFRoZSBkb2N1bWVudCB0byBhZGQgdG8gdGhlIGluZGV4LlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkb2MpIHtcbiAgdmFyIGRvY1JlZiA9IGRvY1t0aGlzLl9yZWZdO1xuXG4gIHRoaXMuZG9jdW1lbnRDb3VudCArPSAxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZpZWxkTmFtZSA9IHRoaXMuX2ZpZWxkc1tpXSxcbiAgICAgICAgZmllbGQgPSBkb2NbZmllbGROYW1lXSxcbiAgICAgICAgdG9rZW5zID0gdGhpcy50b2tlbml6ZXIoZmllbGQpLFxuICAgICAgICB0ZXJtcyA9IHRoaXMucGlwZWxpbmUucnVuKHRva2VucyksXG4gICAgICAgIGZpZWxkUmVmID0gbmV3IGx1bnIuRmllbGRSZWYgKGRvY1JlZiwgZmllbGROYW1lKSxcbiAgICAgICAgZmllbGRUZXJtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzW2ZpZWxkUmVmXSA9IGZpZWxkVGVybXM7XG4gICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdID0gMDtcblxuICAgIC8vIHN0b3JlIHRoZSBsZW5ndGggb2YgdGhpcyBmaWVsZCBmb3IgdGhpcyBkb2N1bWVudFxuICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSArPSB0ZXJtcy5sZW5ndGg7XG5cbiAgICAvLyBjYWxjdWxhdGUgdGVybSBmcmVxdWVuY2llcyBmb3IgdGhpcyBmaWVsZFxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbal07XG5cbiAgICAgIGlmIChmaWVsZFRlcm1zW3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmllbGRUZXJtc1t0ZXJtXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGZpZWxkVGVybXNbdGVybV0gKz0gMTtcblxuICAgICAgLy8gYWRkIHRvIGludmVydGVkIGluZGV4XG4gICAgICAvLyBjcmVhdGUgYW4gaW5pdGlhbCBwb3N0aW5nIGlmIG9uZSBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHBvc3RpbmcgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBwb3N0aW5nLl9pbmRleCA9IHRoaXMudGVybUluZGV4O1xuICAgICAgICB0aGlzLnRlcm1JbmRleCArPSAxO1xuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgcG9zdGluZ1t0aGlzLl9maWVsZHNba11dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3Rpbmc7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCBhbiBlbnRyeSBmb3IgdGhpcyB0ZXJtL2ZpZWxkTmFtZS9kb2NSZWYgdG8gdGhlIGludmVydGVkSW5kZXhcbiAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHN0b3JlIGFsbCB3aGl0ZWxpc3RlZCBtZXRhZGF0YSBhYm91dCB0aGlzIHRva2VuIGluIHRoZVxuICAgICAgLy8gaW52ZXJ0ZWQgaW5kZXhcbiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdC5sZW5ndGg7IGwrKykge1xuICAgICAgICB2YXIgbWV0YWRhdGFLZXkgPSB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0W2xdLFxuICAgICAgICAgICAgbWV0YWRhdGEgPSB0ZXJtLm1ldGFkYXRhW21ldGFkYXRhS2V5XTtcblxuICAgICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl1bbWV0YWRhdGFLZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XS5wdXNoKG1ldGFkYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhdmVyYWdlIGRvY3VtZW50IGxlbmd0aCBmb3IgdGhpcyBpbmRleFxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY2FsY3VsYXRlQXZlcmFnZUZpZWxkTGVuZ3RocyA9IGZ1bmN0aW9uICgpIHtcblxuICB2YXIgZmllbGRSZWZzID0gT2JqZWN0LmtleXModGhpcy5maWVsZExlbmd0aHMpLFxuICAgICAgbnVtYmVyT2ZGaWVsZHMgPSBmaWVsZFJlZnMubGVuZ3RoLFxuICAgICAgYWNjdW11bGF0b3IgPSB7fSxcbiAgICAgIGRvY3VtZW50c1dpdGhGaWVsZCA9IHt9O1xuXG4gIHZhciBmaWVsZDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZkZpZWxkczsgaSsrKSB7XG4gICAgdmFyIGZpZWxkUmVmID0gbHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nKGZpZWxkUmVmc1tpXSk7XG4gICAgZmllbGQgPSBmaWVsZFJlZi5maWVsZE5hbWU7XG5cbiAgICBpZiAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSB8fCAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSA9IDApKSB7XG4gICAgICBkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdICs9IDE7XG4gICAgfVxuXG5cbiAgICBpZiAoYWNjdW11bGF0b3JbZmllbGRdIHx8IChhY2N1bXVsYXRvcltmaWVsZF0gPSAwKSkge1xuICAgICAgYWNjdW11bGF0b3JbZmllbGRdICs9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZmllbGQgPSB0aGlzLl9maWVsZHNbaV07XG4gICAgYWNjdW11bGF0b3JbZmllbGRdID0gYWNjdW11bGF0b3JbZmllbGRdIC8gZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXTtcbiAgfVxuXG4gIHRoaXMuYXZlcmFnZUZpZWxkTGVuZ3RoID0gYWNjdW11bGF0b3I7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyBhIHZlY3RvciBzcGFjZSBtb2RlbCBvZiBldmVyeSBkb2N1bWVudCB1c2luZyBsdW5yLlZlY3RvclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlRmllbGRWZWN0b3JzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZmllbGRWZWN0b3JzID0ge30sXG4gICAgICBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgIGZpZWxkUmVmc0xlbmd0aCA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICB0ZXJtSWRmQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGRSZWZzTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcoZmllbGRSZWZzW2ldKSxcbiAgICAgICAgZmllbGQgPSBmaWVsZFJlZi5maWVsZE5hbWUsXG4gICAgICAgIGZpZWxkTGVuZ3RoID0gdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdLFxuICAgICAgICBmaWVsZFZlY3RvciA9IG5ldyBsdW5yLlZlY3RvcigpLFxuICAgICAgICB0ZXJtRnJlcXVlbmNpZXMgPSB0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzW2ZpZWxkUmVmXSxcbiAgICAgICAgdGVybXMgPSBPYmplY3Qua2V5cyh0ZXJtRnJlcXVlbmNpZXMpLFxuICAgICAgICB0ZXJtc0xlbmd0aCA9IHRlcm1zLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXNMZW5ndGg7IGorKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXSxcbiAgICAgICAgICB0ZiA9IHRlcm1GcmVxdWVuY2llc1t0ZXJtXSxcbiAgICAgICAgICB0ZXJtSW5kZXggPSB0aGlzLmludmVydGVkSW5kZXhbdGVybV0uX2luZGV4LFxuICAgICAgICAgIGlkZiwgc2NvcmUsIHNjb3JlV2l0aFByZWNpc2lvbjtcblxuICAgICAgaWYgKHRlcm1JZGZDYWNoZVt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlkZiA9IGx1bnIuaWRmKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSwgdGhpcy5kb2N1bWVudENvdW50KTtcbiAgICAgICAgdGVybUlkZkNhY2hlW3Rlcm1dID0gaWRmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWRmID0gdGVybUlkZkNhY2hlW3Rlcm1dO1xuICAgICAgfVxuXG4gICAgICBzY29yZSA9IGlkZiAqICgodGhpcy5fazEgKyAxKSAqIHRmKSAvICh0aGlzLl9rMSAqICgxIC0gdGhpcy5fYiArIHRoaXMuX2IgKiAoZmllbGRMZW5ndGggLyB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aFtmaWVsZF0pKSArIHRmKTtcbiAgICAgIHNjb3JlV2l0aFByZWNpc2lvbiA9IE1hdGgucm91bmQoc2NvcmUgKiAxMDAwKSAvIDEwMDA7XG4gICAgICAvLyBDb252ZXJ0cyAxLjIzNDU2Nzg5IHRvIDEuMjM0LlxuICAgICAgLy8gUmVkdWNpbmcgdGhlIHByZWNpc2lvbiBzbyB0aGF0IHRoZSB2ZWN0b3JzIHRha2UgdXAgbGVzc1xuICAgICAgLy8gc3BhY2Ugd2hlbiBzZXJpYWxpc2VkLiBEb2luZyBpdCBub3cgc28gdGhhdCB0aGV5IGJlaGF2ZVxuICAgICAgLy8gdGhlIHNhbWUgYmVmb3JlIGFuZCBhZnRlciBzZXJpYWxpc2F0aW9uLiBBbHNvLCB0aGlzIGlzXG4gICAgICAvLyB0aGUgZmFzdGVzdCBhcHByb2FjaCB0byByZWR1Y2luZyBhIG51bWJlcidzIHByZWNpc2lvbiBpblxuICAgICAgLy8gSmF2YVNjcmlwdC5cblxuICAgICAgZmllbGRWZWN0b3IuaW5zZXJ0KHRlcm1JbmRleCwgc2NvcmVXaXRoUHJlY2lzaW9uKTtcbiAgICB9XG5cbiAgICBmaWVsZFZlY3RvcnNbZmllbGRSZWZdID0gZmllbGRWZWN0b3I7XG4gIH1cblxuICB0aGlzLmZpZWxkVmVjdG9ycyA9IGZpZWxkVmVjdG9ycztcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCBvZiBhbGwgdG9rZW5zIGluIHRoZSBpbmRleCB1c2luZyBsdW5yLlRva2VuU2V0XG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVUb2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50b2tlblNldCA9IGx1bnIuVG9rZW5TZXQuZnJvbUFycmF5KFxuICAgIE9iamVjdC5rZXlzKHRoaXMuaW52ZXJ0ZWRJbmRleCkuc29ydCgpXG4gICk7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyB0aGUgaW5kZXgsIGNyZWF0aW5nIGFuIGluc3RhbmNlIG9mIGx1bnIuSW5kZXguXG4gKlxuICogVGhpcyBjb21wbGV0ZXMgdGhlIGluZGV4aW5nIHByb2Nlc3MgYW5kIHNob3VsZCBvbmx5IGJlIGNhbGxlZFxuICogb25jZSBhbGwgZG9jdW1lbnRzIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogQHJldHVybnMge2x1bnIuSW5kZXh9XG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY2FsY3VsYXRlQXZlcmFnZUZpZWxkTGVuZ3RocygpO1xuICB0aGlzLmNyZWF0ZUZpZWxkVmVjdG9ycygpO1xuICB0aGlzLmNyZWF0ZVRva2VuU2V0KCk7XG5cbiAgcmV0dXJuIG5ldyBsdW5yLkluZGV4KHtcbiAgICBpbnZlcnRlZEluZGV4OiB0aGlzLmludmVydGVkSW5kZXgsXG4gICAgZmllbGRWZWN0b3JzOiB0aGlzLmZpZWxkVmVjdG9ycyxcbiAgICB0b2tlblNldDogdGhpcy50b2tlblNldCxcbiAgICBmaWVsZHM6IHRoaXMuX2ZpZWxkcyxcbiAgICBwaXBlbGluZTogdGhpcy5zZWFyY2hQaXBlbGluZVxuICB9KTtcbn07XG5cbi8qKlxuICogQXBwbGllcyBhIHBsdWdpbiB0byB0aGUgaW5kZXggYnVpbGRlci5cbiAqXG4gKiBBIHBsdWdpbiBpcyBhIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGNvbnRleHQuXG4gKiBQbHVnaW5zIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWlzZSBvciBleHRlbmQgdGhlIGJlaGF2aW91ciBvZiB0aGUgaW5kZXhcbiAqIGluIHNvbWUgd2F5LiBBIHBsdWdpbiBpcyBqdXN0IGEgZnVuY3Rpb24sIHRoYXQgZW5jYXBzdWxhdGVkIHRoZSBjdXN0b21cbiAqIGJlaGF2aW91ciB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHdoZW4gYnVpbGRpbmcgdGhlIGluZGV4LlxuICpcbiAqIFRoZSBwbHVnaW4gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgYXJndW1lbnQsIGFkZGl0aW9uYWxcbiAqIGFyZ3VtZW50cyBjYW4gYWxzbyBiZSBwYXNzZWQgd2hlbiBjYWxsaW5nIHVzZS4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkXG4gKiB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBsdWdpbiBUaGUgcGx1Z2luIHRvIGFwcGx5LlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgZm4uYXBwbHkodGhpcywgYXJncyk7XG59O1xuLyoqXG4gKiBDb250YWlucyBhbmQgY29sbGVjdHMgbWV0YWRhdGEgYWJvdXQgYSBtYXRjaGluZyBkb2N1bWVudC5cbiAqIEEgc2luZ2xlIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIGlzIHJldHVybmVkIGFzIHBhcnQgb2YgZXZlcnlcbiAqIGx1bnIuSW5kZXh+UmVzdWx0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtZXRhZGF0YSAtIEEgY2xvbmVkIGNvbGxlY3Rpb24gb2YgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9jdW1lbnQuXG4gKiBAc2VlIHtAbGluayBsdW5yLkluZGV4flJlc3VsdH1cbiAqL1xubHVuci5NYXRjaERhdGEgPSBmdW5jdGlvbiAodGVybSwgZmllbGQsIG1ldGFkYXRhKSB7XG4gIHZhciBjbG9uZWRNZXRhZGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBtZXRhZGF0YUtleXMgPSBPYmplY3Qua2V5cyhtZXRhZGF0YSk7XG5cbiAgLy8gQ2xvbmluZyB0aGUgbWV0YWRhdGEgdG8gcHJldmVudCB0aGUgb3JpZ2luYWxcbiAgLy8gYmVpbmcgbXV0YXRlZCBkdXJpbmcgbWF0Y2ggZGF0YSBjb21iaW5hdGlvbi5cbiAgLy8gTWV0YWRhdGEgaXMga2VwdCBpbiBhbiBhcnJheSB3aXRoaW4gdGhlIGludmVydGVkXG4gIC8vIGluZGV4IHNvIGNsb25pbmcgdGhlIGRhdGEgY2FuIGJlIGRvbmUgd2l0aFxuICAvLyBBcnJheSNzbGljZVxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBtZXRhZGF0YUtleXNbaV07XG4gICAgY2xvbmVkTWV0YWRhdGFba2V5XSA9IG1ldGFkYXRhW2tleV0uc2xpY2UoKTtcbiAgfVxuXG4gIHRoaXMubWV0YWRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBjbG9uZWRNZXRhZGF0YTtcbn07XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2lsbCBiZSBjcmVhdGVkIGZvciBldmVyeSB0ZXJtIHRoYXQgbWF0Y2hlcyBhXG4gKiBkb2N1bWVudC4gSG93ZXZlciBvbmx5IG9uZSBpbnN0YW5jZSBpcyByZXF1aXJlZCBpbiBhIGx1bnIuSW5kZXh+UmVzdWx0LiBUaGlzXG4gKiBtZXRob2QgY29tYmluZXMgbWV0YWRhdGEgZnJvbSBhbm90aGVyIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpdGggdGhpc1xuICogb2JqZWN0cyBtZXRhZGF0YS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuTWF0Y2hEYXRhfSBvdGhlck1hdGNoRGF0YSAtIEFub3RoZXIgaW5zdGFuY2Ugb2YgbWF0Y2ggZGF0YSB0byBtZXJnZSB3aXRoIHRoaXMgb25lLlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKG90aGVyTWF0Y2hEYXRhKSB7XG4gIHZhciB0ZXJtcyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRlcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRlcm0gPSB0ZXJtc1tpXSxcbiAgICAgICAgZmllbGRzID0gT2JqZWN0LmtleXMob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV0pO1xuXG4gICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tqXSxcbiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdKTtcblxuICAgICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNba107XG5cbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSBvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XS5jb25jYXQob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQWRkIG1ldGFkYXRhIGZvciBhIHRlcm0vZmllbGQgcGFpciB0byB0aGlzIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqL1xubHVuci5NYXRjaERhdGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgaWYgKCEodGVybSBpbiB0aGlzLm1ldGFkYXRhKSkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gbWV0YWRhdGE7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEoZmllbGQgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXSkpIHtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IG1ldGFkYXRhO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBtZXRhZGF0YUtleXMgPSBPYmplY3Qua2V5cyhtZXRhZGF0YSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldO1xuXG4gICAgaWYgKGtleSBpbiB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0uY29uY2F0KG1ldGFkYXRhW2tleV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gbWV0YWRhdGFba2V5XTtcbiAgICB9XG4gIH1cbn07XG4vKipcbiAqIEEgbHVuci5RdWVyeSBwcm92aWRlcyBhIHByb2dyYW1tYXRpYyB3YXkgb2YgZGVmaW5pbmcgcXVlcmllcyB0byBiZSBwZXJmb3JtZWRcbiAqIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gKlxuICogUHJlZmVyIGNvbnN0cnVjdGluZyBhIGx1bnIuUXVlcnkgdXNpbmcgdGhlIHtAbGluayBsdW5yLkluZGV4I3F1ZXJ5fSBtZXRob2RcbiAqIHNvIHRoZSBxdWVyeSBvYmplY3QgaXMgcHJlLWluaXRpYWxpemVkIHdpdGggdGhlIHJpZ2h0IGluZGV4IGZpZWxkcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcm9wZXJ0eSB7bHVuci5RdWVyeX5DbGF1c2VbXX0gY2xhdXNlcyAtIEFuIGFycmF5IG9mIHF1ZXJ5IGNsYXVzZXMuXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBhbGxGaWVsZHMgLSBBbiBhcnJheSBvZiBhbGwgYXZhaWxhYmxlIGZpZWxkcyBpbiBhIGx1bnIuSW5kZXguXG4gKi9cbmx1bnIuUXVlcnkgPSBmdW5jdGlvbiAoYWxsRmllbGRzKSB7XG4gIHRoaXMuY2xhdXNlcyA9IFtdO1xuICB0aGlzLmFsbEZpZWxkcyA9IGFsbEZpZWxkcztcbn07XG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBpbmRpY2F0aW5nIHdoYXQga2luZCBvZiBhdXRvbWF0aWMgd2lsZGNhcmQgaW5zZXJ0aW9uIHdpbGwgYmUgdXNlZCB3aGVuIGNvbnN0cnVjdGluZyBhIHF1ZXJ5IGNsYXVzZS5cbiAqXG4gKiBUaGlzIGFsbG93cyB3aWxkY2FyZHMgdG8gYmUgYWRkZWQgdG8gdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgdGVybSB3aXRob3V0IGhhdmluZyB0byBtYW51YWxseSBkbyBhbnkgc3RyaW5nXG4gKiBjb25jYXRlbmF0aW9uLlxuICpcbiAqIFRoZSB3aWxkY2FyZCBjb25zdGFudHMgY2FuIGJlIGJpdHdpc2UgY29tYmluZWQgdG8gc2VsZWN0IGJvdGggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2lsZGNhcmRzLlxuICpcbiAqIEBjb25zdGFudFxuICogQGRlZmF1bHRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5OT05FIC0gVGhlIHRlcm0gd2lsbCBoYXZlIG5vIHdpbGRjYXJkcyBpbnNlcnRlZCwgdGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvdXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5MRUFESU5HIC0gUHJlcGVuZCB0aGUgdGVybSB3aXRoIGEgd2lsZGNhcmQsIHVubGVzcyBhIGxlYWRpbmcgd2lsZGNhcmQgYWxyZWFkeSBleGlzdHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5UUkFJTElORyAtIEFwcGVuZCBhIHdpbGRjYXJkIHRvIHRoZSB0ZXJtLCB1bmxlc3MgYSB0cmFpbGluZyB3aWxkY2FyZCBhbHJlYWR5IGV4aXN0c1xuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I3Rlcm1cbiAqIEBleGFtcGxlIDxjYXB0aW9uPnF1ZXJ5IHRlcm0gd2l0aCB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHsgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcgfSlcbiAqIEBleGFtcGxlIDxjYXB0aW9uPnF1ZXJ5IHRlcm0gd2l0aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHtcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyB8IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKi9cblxubHVuci5RdWVyeS53aWxkY2FyZCA9IFwiKlwiO1xubHVuci5RdWVyeS53aWxkY2FyZC5OT05FID0gMDtcbmx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyA9IDE7XG5sdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HID0gMjtcblxuLyoqXG4gKiBBIHNpbmdsZSBjbGF1c2UgaW4gYSB7QGxpbmsgbHVuci5RdWVyeX0gY29udGFpbnMgYSB0ZXJtIGFuZCBkZXRhaWxzIG9uIGhvdyB0b1xuICogbWF0Y2ggdGhhdCB0ZXJtIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gbHVuci5RdWVyeX5DbGF1c2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGZpZWxkcyAtIFRoZSBmaWVsZHMgaW4gYW4gaW5kZXggdGhpcyBjbGF1c2Ugc2hvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYm9vc3Q9MV0gLSBBbnkgYm9vc3QgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIG1hdGNoaW5nIHRoaXMgY2xhdXNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtlZGl0RGlzdGFuY2VdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgaGF2ZSBmdXp6eSBtYXRjaGluZyBhcHBsaWVkLCBhbmQgaG93IGZ1enp5IHRoZSBtYXRjaCBzaG91bGQgYmUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VQaXBlbGluZV0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3aWxkY2FyZD0wXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgd2lsZGNhcmRzIGFwcGVuZGVkIG9yIHByZXBlbmRlZC5cbiAqL1xuXG4vKipcbiAqIEFkZHMgYSB7QGxpbmsgbHVuci5RdWVyeX5DbGF1c2V9IHRvIHRoaXMgcXVlcnkuXG4gKlxuICogVW5sZXNzIHRoZSBjbGF1c2UgY29udGFpbnMgdGhlIGZpZWxkcyB0byBiZSBtYXRjaGVkIGFsbCBmaWVsZHMgd2lsbCBiZSBtYXRjaGVkLiBJbiBhZGRpdGlvblxuICogYSBkZWZhdWx0IGJvb3N0IG9mIDEgaXMgYXBwbGllZCB0byB0aGUgY2xhdXNlLlxuICpcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX5DbGF1c2V9IGNsYXVzZSAtIFRoZSBjbGF1c2UgdG8gYWRkIHRvIHRoaXMgcXVlcnkuXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAqL1xubHVuci5RdWVyeS5wcm90b3R5cGUuY2xhdXNlID0gZnVuY3Rpb24gKGNsYXVzZSkge1xuICBpZiAoISgnZmllbGRzJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmZpZWxkcyA9IHRoaXMuYWxsRmllbGRzO1xuICB9XG5cbiAgaWYgKCEoJ2Jvb3N0JyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmJvb3N0ID0gMTtcbiAgfVxuXG4gIGlmICghKCd1c2VQaXBlbGluZScgaW4gY2xhdXNlKSkge1xuICAgIGNsYXVzZS51c2VQaXBlbGluZSA9IHRydWU7XG4gIH1cblxuICBpZiAoISgnd2lsZGNhcmQnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2Uud2lsZGNhcmQgPSBsdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkU7XG4gIH1cblxuICBpZiAoKGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORykgJiYgKGNsYXVzZS50ZXJtLmNoYXJBdCgwKSAhPSBsdW5yLlF1ZXJ5LndpbGRjYXJkKSkge1xuICAgIGNsYXVzZS50ZXJtID0gXCIqXCIgKyBjbGF1c2UudGVybTtcbiAgfVxuXG4gIGlmICgoY2xhdXNlLndpbGRjYXJkICYgbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORykgJiYgKGNsYXVzZS50ZXJtLnNsaWNlKC0xKSAhPSBsdW5yLlF1ZXJ5LndpbGRjYXJkKSkge1xuICAgIGNsYXVzZS50ZXJtID0gXCJcIiArIGNsYXVzZS50ZXJtICsgXCIqXCI7XG4gIH1cblxuICB0aGlzLmNsYXVzZXMucHVzaChjbGF1c2UpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgdGVybSB0byB0aGUgY3VycmVudCBxdWVyeSwgdW5kZXIgdGhlIGNvdmVycyB0aGlzIHdpbGwgY3JlYXRlIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfVxuICogdG8gdGhlIGxpc3Qgb2YgY2xhdXNlcyB0aGF0IG1ha2UgdXAgdGhpcyBxdWVyeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVybSAtIFRoZSB0ZXJtIHRvIGFkZCB0byB0aGUgcXVlcnkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHF1ZXJ5IGNsYXVzZS5cbiAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeTwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oXCJmb29cIilcbiAqIEBleGFtcGxlIDxjYXB0aW9uPmFkZGluZyBhIHNpbmdsZSB0ZXJtIHRvIGEgcXVlcnkgYW5kIHNwZWNpZnlpbmcgc2VhcmNoIGZpZWxkcywgdGVybSBib29zdCBhbmQgYXV0b21hdGljIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybShcImZvb1wiLCB7XG4gKiAgIGZpZWxkczogW1widGl0bGVcIl0sXG4gKiAgIGJvb3N0OiAxMCxcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKi9cbmx1bnIuUXVlcnkucHJvdG90eXBlLnRlcm0gPSBmdW5jdGlvbiAodGVybSwgb3B0aW9ucykge1xuICB2YXIgY2xhdXNlID0gb3B0aW9ucyB8fCB7fTtcbiAgY2xhdXNlLnRlcm0gPSB0ZXJtO1xuXG4gIHRoaXMuY2xhdXNlKGNsYXVzZSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xubHVuci5RdWVyeVBhcnNlRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgc3RhcnQsIGVuZCkge1xuICB0aGlzLm5hbWUgPSBcIlF1ZXJ5UGFyc2VFcnJvclwiO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gIHRoaXMuZW5kID0gZW5kO1xufTtcblxubHVuci5RdWVyeVBhcnNlRXJyb3IucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5sdW5yLlF1ZXJ5TGV4ZXIgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHRoaXMubGV4ZW1lcyA9IFtdO1xuICB0aGlzLnN0ciA9IHN0cjtcbiAgdGhpcy5sZW5ndGggPSBzdHIubGVuZ3RoO1xuICB0aGlzLnBvcyA9IDA7XG4gIHRoaXMuc3RhcnQgPSAwO1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMgPSBbXTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcblxuICB3aGlsZSAoc3RhdGUpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLnNsaWNlU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3ViU2xpY2VzID0gW10sXG4gICAgICBzbGljZVN0YXJ0ID0gdGhpcy5zdGFydCxcbiAgICAgIHNsaWNlRW5kID0gdGhpcy5wb3M7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBzbGljZUVuZCA9IHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9uc1tpXTtcbiAgICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCkpO1xuICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gIH1cblxuICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCB0aGlzLnBvcykpO1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoID0gMDtcblxuICByZXR1cm4gc3ViU2xpY2VzLmpvaW4oJycpO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdGhpcy5sZXhlbWVzLnB1c2goe1xuICAgIHR5cGU6IHR5cGUsXG4gICAgc3RyOiB0aGlzLnNsaWNlU3RyaW5nKCksXG4gICAgc3RhcnQ6IHRoaXMuc3RhcnQsXG4gICAgZW5kOiB0aGlzLnBvc1xuICB9KTtcblxuICB0aGlzLnN0YXJ0ID0gdGhpcy5wb3M7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVzY2FwZUNoYXJhY3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLnB1c2godGhpcy5wb3MgLSAxKTtcbiAgdGhpcy5wb3MgKz0gMTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5FT1M7XG4gIH1cblxuICB2YXIgY2hhciA9IHRoaXMuc3RyLmNoYXJBdCh0aGlzLnBvcyk7XG4gIHRoaXMucG9zICs9IDE7XG4gIHJldHVybiBjaGFyO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucG9zIC0gdGhpcy5zdGFydDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuaWdub3JlID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5zdGFydCA9PSB0aGlzLnBvcykge1xuICAgIHRoaXMucG9zICs9IDE7XG4gIH1cblxuICB0aGlzLnN0YXJ0ID0gdGhpcy5wb3M7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wb3MgLT0gMTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYWNjZXB0RGlnaXRSdW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjaGFyLCBjaGFyQ29kZTtcblxuICBkbyB7XG4gICAgY2hhciA9IHRoaXMubmV4dCgpO1xuICAgIGNoYXJDb2RlID0gY2hhci5jaGFyQ29kZUF0KDApO1xuICB9IHdoaWxlIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpO1xuXG4gIGlmIChjaGFyICE9IGx1bnIuUXVlcnlMZXhlci5FT1MpIHtcbiAgICB0aGlzLmJhY2t1cCgpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLm1vcmUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnBvcyA8IHRoaXMubGVuZ3RoO1xufTtcblxubHVuci5RdWVyeUxleGVyLkVPUyA9ICdFT1MnO1xubHVuci5RdWVyeUxleGVyLkZJRUxEID0gJ0ZJRUxEJztcbmx1bnIuUXVlcnlMZXhlci5URVJNID0gJ1RFUk0nO1xubHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0UgPSAnRURJVF9ESVNUQU5DRSc7XG5sdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QgPSAnQk9PU1QnO1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RmllbGQgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuYmFja3VwKCk7XG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkZJRUxEKTtcbiAgbGV4ZXIuaWdub3JlKCk7XG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhUZXJtID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMSkge1xuICAgIGxleGVyLmJhY2t1cCgpO1xuICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICB9XG5cbiAgbGV4ZXIuaWdub3JlKCk7XG5cbiAgaWYgKGxleGVyLm1vcmUoKSkge1xuICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbiAgfVxufTtcblxubHVuci5RdWVyeUxleGVyLmxleEVkaXREaXN0YW5jZSA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5pZ25vcmUoKTtcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRSk7XG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhCb29zdCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5pZ25vcmUoKTtcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QpO1xuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RU9TID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICB9XG59O1xuXG4vLyBUaGlzIG1hdGNoZXMgdGhlIHNlcGFyYXRvciB1c2VkIHdoZW4gdG9rZW5pc2luZyBmaWVsZHNcbi8vIHdpdGhpbiBhIGRvY3VtZW50LiBUaGVzZSBzaG91bGQgbWF0Y2ggb3RoZXJ3aXNlIGl0IGlzXG4vLyBub3QgcG9zc2libGUgdG8gc2VhcmNoIGZvciBzb21lIHRva2VucyB3aXRoaW4gYSBkb2N1bWVudC5cbi8vXG4vLyBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIHVzZXIgdG8gY2hhbmdlIHRoZSBzZXBhcmF0b3Igb24gdGhlXG4vLyB0b2tlbml6ZXIgc28gaXQgX21pZ2h0XyBjbGFzaCB3aXRoIGFueSBvdGhlciBvZiB0aGUgc3BlY2lhbFxuLy8gY2hhcmFjdGVycyBhbHJlYWR5IHVzZWQgd2l0aGluIHRoZSBzZWFyY2ggc3RyaW5nLCBlLmcuIDouXG4vL1xuLy8gVGhpcyBtZWFucyB0aGF0IGl0IGlzIHBvc3NpYmxlIHRvIGNoYW5nZSB0aGUgc2VwYXJhdG9yIGluXG4vLyBzdWNoIGEgd2F5IHRoYXQgbWFrZXMgc29tZSB3b3JkcyB1bnNlYXJjaGFibGUgdXNpbmcgYSBzZWFyY2hcbi8vIHN0cmluZy5cbmx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yID0gbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yO1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHZhciBjaGFyID0gbGV4ZXIubmV4dCgpO1xuXG4gICAgaWYgKGNoYXIgPT0gbHVuci5RdWVyeUxleGVyLkVPUykge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhFT1M7XG4gICAgfVxuXG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlciBpcyAnXFwnXG4gICAgaWYgKGNoYXIuY2hhckNvZGVBdCgwKSA9PSA5Mikge1xuICAgICAgbGV4ZXIuZXNjYXBlQ2hhcmFjdGVyKCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIjpcIikge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhGaWVsZDtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIn5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEVkaXREaXN0YW5jZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIl5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEJvb3N0O1xuICAgIH1cblxuICAgIGlmIChjaGFyLm1hdGNoKGx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yKSkge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXJtO1xuICAgIH1cbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlciA9IGZ1bmN0aW9uIChzdHIsIHF1ZXJ5KSB7XG4gIHRoaXMubGV4ZXIgPSBuZXcgbHVuci5RdWVyeUxleGVyIChzdHIpO1xuICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9O1xuICB0aGlzLmxleGVtZUlkeCA9IDA7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZXhlci5ydW4oKTtcbiAgdGhpcy5sZXhlbWVzID0gdGhpcy5sZXhlci5sZXhlbWVzO1xuXG4gIHZhciBzdGF0ZSA9IGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZE9yVGVybTtcblxuICB3aGlsZSAoc3RhdGUpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMucXVlcnk7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5wZWVrTGV4ZW1lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5sZXhlbWVzW3RoaXMubGV4ZW1lSWR4XTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLmNvbnN1bWVMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZXhlbWUgPSB0aGlzLnBlZWtMZXhlbWUoKTtcbiAgdGhpcy5sZXhlbWVJZHggKz0gMTtcbiAgcmV0dXJuIGxleGVtZTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLm5leHRDbGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb21wbGV0ZWRDbGF1c2UgPSB0aGlzLmN1cnJlbnRDbGF1c2U7XG4gIHRoaXMucXVlcnkuY2xhdXNlKGNvbXBsZXRlZENsYXVzZSk7XG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9O1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkT3JUZXJtID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGxleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGVkIGVpdGhlciBhIGZpZWxkIG9yIGEgdGVybSwgZm91bmQgXCIgKyBsZXhlbWUudHlwZTtcblxuICAgICAgaWYgKGxleGVtZS5zdHIubGVuZ3RoID49IDEpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9IFwiIHdpdGggdmFsdWUgJ1wiICsgbGV4ZW1lLnN0ciArIFwiJ1wiO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZXJyb3JNZXNzYWdlO1xuICBpZiAocGFyc2VyLnF1ZXJ5LmFsbEZpZWxkcy5pbmRleE9mKGxleGVtZS5zdHIpID09IC0xKSB7XG4gICAgdmFyIHBvc3NpYmxlRmllbGRzID0gcGFyc2VyLnF1ZXJ5LmFsbEZpZWxkcy5tYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIFwiJ1wiICsgZiArIFwiJ1wiOyB9KS5qb2luKCcsICcpO1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcInVucmVjb2duaXNlZCBmaWVsZCAnXCIgKyBsZXhlbWUuc3RyICsgXCInLCBwb3NzaWJsZSBmaWVsZHM6IFwiICsgcG9zc2libGVGaWVsZHM7XG5cbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmZpZWxkcyA9IFtsZXhlbWUuc3RyXTtcblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0aW5nIHRlcm0sIGZvdW5kIG5vdGhpbmdcIjtcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudGVybSA9IGxleGVtZS5zdHIudG9Mb3dlckNhc2UoKTtcblxuICBpZiAobGV4ZW1lLnN0ci5pbmRleE9mKFwiKlwiKSAhPSAtMSkge1xuICAgIHBhcnNlci5jdXJyZW50Q2xhdXNlLnVzZVBpcGVsaW5lID0gZmFsc2U7XG4gIH1cblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQm9vc3Q7XG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZWRpdERpc3RhbmNlID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApO1xuXG4gIHZhciBlcnJvck1lc3NhZ2U7XG4gIGlmIChpc05hTihlZGl0RGlzdGFuY2UpKSB7XG4gICAgZXJyb3JNZXNzYWdlID0gXCJlZGl0IGRpc3RhbmNlIG11c3QgYmUgbnVtZXJpY1wiO1xuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuZWRpdERpc3RhbmNlID0gZWRpdERpc3RhbmNlO1xuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0ID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICB2YXIgZXJyb3JNZXNzYWdlO1xuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYm9vc3QgPSBwYXJzZUludChsZXhlbWUuc3RyLCAxMCk7XG5cbiAgaWYgKGlzTmFOKGJvb3N0KSkge1xuICAgIGVycm9yTWVzc2FnZSA9IFwiYm9vc3QgbXVzdCBiZSBudW1lcmljXCI7XG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5ib29zdCA9IGJvb3N0O1xuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufVxuXG4gIC8qKlxuICAgKiBleHBvcnQgdGhlIG1vZHVsZSB2aWEgQU1ELCBDb21tb25KUyBvciBhcyBhIGJyb3dzZXIgZ2xvYmFsXG4gICAqIEV4cG9ydCBjb2RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzXG4gICAqL1xuICA7KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgZGVmaW5lKGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICogb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAqIGxpa2UgTm9kZS5cbiAgICAgICAqL1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICByb290Lmx1bnIgPSBmYWN0b3J5KCk7XG4gICAgfVxuICB9KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBKdXN0IHJldHVybiBhIHZhbHVlIHRvIGRlZmluZSB0aGUgbW9kdWxlIGV4cG9ydC5cbiAgICAgKiBUaGlzIGV4YW1wbGUgcmV0dXJucyBhbiBvYmplY3QsIGJ1dCB0aGUgbW9kdWxlXG4gICAgICogY2FuIHJldHVybiBhIGZ1bmN0aW9uIGFzIHRoZSBleHBvcnRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICByZXR1cm4gbHVucjtcbiAgfSkpO1xufSkoKTtcblxuXG4gIC8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vcHNldWRvbnltMTE3L0xldmVuc2h0ZWluXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSl7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnkocm9vdCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJvb3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QuTGV2ZW5zaHRlaW4gPSBmYWN0b3J5KHJvb3QpO1xuICAgIH1cbn0odGhpcywgZnVuY3Rpb24ocm9vdCl7XG5cbiAgICBmdW5jdGlvbiBmb3JFYWNoKCBhcnJheSwgZm4gKSB7IHZhciBpLCBsZW5ndGg7XG4gICAgICAgIGkgPSAtMTtcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoICsraSA8IGxlbmd0aCApXG4gICAgICAgICAgICBmbiggYXJyYXlbIGkgXSwgaSwgYXJyYXkgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXAoIGFycmF5LCBmbiApIHsgdmFyIHJlc3VsdDtcbiAgICAgICAgcmVzdWx0ID0gQXJyYXkoIGFycmF5Lmxlbmd0aCApO1xuICAgICAgICBmb3JFYWNoKCBhcnJheSwgZnVuY3Rpb24gKCB2YWwsIGksIGFycmF5ICkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goIGZuKCB2YWwsIGksIGFycmF5ICkgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVkdWNlKCBhcnJheSwgZm4sIGFjY3VtdWxhdG9yICkge1xuICAgICAgICBmb3JFYWNoKCBhcnJheSwgZnVuY3Rpb24oIHZhbCwgaSwgYXJyYXkgKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvciA9IGZuKCB2YWwsIGksIGFycmF5ICk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0cmluZyBtb2RlXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcihzdHIsIGlkeCkge1xuICAgICAgICByZXR1cm4gc3RyLmNoYXJBdChpZHgpO1xuICAgIH1cblxuICAgIC8vIEZvciBhcnJheSBtb2RlXG4gICAgZnVuY3Rpb24gZ2V0QXJyYXlNZW1iZXIoYXJyLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGFycltpZHhdO1xuICAgIH1cblxuICAgIC8vIExldmVuc2h0ZWluIGRpc3RhbmNlXG4gICAgZnVuY3Rpb24gTGV2ZW5zaHRlaW4oIHN0cl9tLCBzdHJfbiApIHtcbiAgICAgICAgdmFyIHByZXZpb3VzLCBjdXJyZW50LCBtYXRyaXgsIGdldEVsZW07XG4gICAgICAgIC8vIFNldCB0byBzdHJpbmcgb3IgYXJyYXkgbW9kZVxuICAgICAgICBpZiAodHlwZW9mIHN0cl9tID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzdHJfbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgZ2V0RWxlbSA9IGdldENoYXI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN0cl9tID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzdHJfbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgZ2V0RWxlbSA9IGdldEFycmF5TWVtYmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgXCJMZXZlbnN0aHRlaW46IGlucHV0IG11c3QgYmUgdHdvIHN0cmluZ3Mgb3IgdHdvIGFycmF5c1wiO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvbnN0cnVjdG9yXG4gICAgICAgIG1hdHJpeCA9IHRoaXMuX21hdHJpeCA9IFtdO1xuXG4gICAgICAgIC8vIFNhbml0eSBjaGVja3NcbiAgICAgICAgaWYgKCBzdHJfbSA9PSBzdHJfbiApIHtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gMDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgfWVsc2UgaWYgKCBzdHJfbSA9PT0gJycgKXtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gc3RyX24ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9ZWxzZSBpZiAoIHN0cl9uID09PSAnJyApIHtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gc3RyX20ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAvLyBEYW5nZXIgV2lsbCBSb2JpbnNvblxuICAgICAgICAgICAgcHJldmlvdXMgPSBbIDAgXTtcbiAgICAgICAgICAgIGZvckVhY2goIHN0cl9tLCBmdW5jdGlvbih2LGkpe1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIHByZXZpb3VzW2ldID0gaTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaXhbMF0gPSBwcmV2aW91cztcbiAgICAgICAgICAgIGZvckVhY2goIHN0cl9uLCBmdW5jdGlvbiggbl92YWwsIG5faWR4ICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBbICsrbl9pZHggXTtcbiAgICAgICAgICAgICAgICBmb3JFYWNoKCBzdHJfbSwgZnVuY3Rpb24oIG1fdmFsLCBtX2lkeCApIHtcbiAgICAgICAgICAgICAgICAgICAgbV9pZHgrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBnZXRFbGVtKHN0cl9tLCBtX2lkeCAtIDEpID09IGdldEVsZW0oc3RyX24sIG5faWR4IC0gMSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFsgbV9pZHggXSA9IHByZXZpb3VzWyBtX2lkeCAtIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFsgbV9pZHggXSA9IE1hdGgubWluKCBwcmV2aW91c1sgbV9pZHggXSArIDEsIGN1cnJlbnRbIG1faWR4IC0gMSBdICsgMSwgcHJldmlvdXNbIG1faWR4IC0gMSBdICsgMSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgIG1hdHJpeFsgbWF0cml4Lmxlbmd0aCBdID0gcHJldmlvdXM7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IGN1cnJlbnRbIGN1cnJlbnQubGVuZ3RoIC0gMSBdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBMZXZlbnNodGVpbi5wcm90b3R5cGUudG9TdHJpbmcgPSBMZXZlbnNodGVpbi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCBub19wcmludCApIHsgdmFyIG1hdHJpeCwgbWF4LCBidWZmLCBzZXAsIHJvd3M7XG4gICAgICAgIG1hdHJpeCA9IHRoaXMuZ2V0TWF0cml4KCk7XG4gICAgICAgIG1heCA9IHJlZHVjZSggbWF0cml4LGZ1bmN0aW9uKCBtLCBvICkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KCBtLCByZWR1Y2UoIG8sIE1hdGgubWF4LCAwICkgKTtcbiAgICAgICAgfSwgMCApO1xuICAgICAgICBidWZmID0gQXJyYXkoICggbWF4ICsgJycgKS5sZW5ndGggKS5qb2luKCAnICcgKTtcblxuICAgICAgICBzZXAgPSBbXTtcbiAgICAgICAgd2hpbGUgKCBzZXAubGVuZ3RoIDwgKG1hdHJpeFswXSAmJiBtYXRyaXhbMF0ubGVuZ3RoIHx8IDApIClcbiAgICAgICAgICAgIHNlcFsgc2VwLmxlbmd0aCBdID0gQXJyYXkoIGJ1ZmYubGVuZ3RoICsgMSApLmpvaW4oICctJyApO1xuICAgICAgICBzZXAgPSBzZXAuam9pbiggJy0rJyApICsgJy0nO1xuXG4gICAgICAgIHJvd3MgPSBtYXAoIG1hdHJpeCwgZnVuY3Rpb24oIHJvdyApIHsgdmFyIGNlbGxzO1xuICAgICAgICAgICAgY2VsbHMgPSBtYXAoIHJvdywgZnVuY3Rpb24oIGNlbGwgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICggYnVmZiArIGNlbGwgKS5zbGljZSggLSBidWZmLmxlbmd0aCApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbHMuam9pbiggJyB8JyApICsgJyAnO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcm93cy5qb2luKCBcIlxcblwiICsgc2VwICsgXCJcXG5cIiApO1xuICAgIH07XG5cbiAgICAvLyBzdGVwcyB0byBnZXQgZnJvbSBzdHJpbmcgMSB0byBzdHJpbmcgMlxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS5nZXRTdGVwcyA9IGZ1bmN0aW9uKCkgICAgIHtcbiAgICAgICAgdmFyIHN0ZXBzLCBtYXRyaXgsIHgsIHksIHUsIGwsIGQsIG1pbjtcbiAgICAgICAgc3RlcHMgPSBbXTtcbiAgICAgICAgbWF0cml4ID0gdGhpcy5nZXRNYXRyaXgoKTtcbiAgICAgICAgeCA9IG1hdHJpeC5sZW5ndGggLSAxO1xuICAgICAgICB5ID0gbWF0cml4WzBdLmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlKHggIT09IDAgfHwgeSAhPT0gMCkgICAgIHtcbiAgICAgICAgICAgIHUgPSB5ID4gMCA/IG1hdHJpeFt4XVt5LTFdIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIGwgPSB4ID4gMCA/IG1hdHJpeFt4LTFdW3ldIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIGQgPSB5ID4gMCAmJiB4ID4gMCA/IG1hdHJpeFt4LTFdW3ktMV0gOiBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICAgICAgbWluID0gTWF0aC5taW4odSwgbCwgZCk7XG4gICAgICAgICAgICBpZihtaW4gPT09IGQpIHtcbiAgICAgICAgICAgICAgICBpZihkIDwgbWF0cml4W3hdW3ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzLnB1c2goWydzdWJzdGl0dXRlJywgeSwgeF0pO1xuICAgICAgICAgICAgICAgIH0vLyAgZWxzZSBzdGVwcy5wdXNoKFsnbm8tb3AnLCB5LCB4XSlcbiAgICAgICAgICAgICAgICB4LS07XG4gICAgICAgICAgICAgICAgeS0tO1xuICAgICAgICAgICAgfSBlbHNlIGlmKG1pbiA9PT0gbCkge1xuICAgICAgICAgICAgICAgIHN0ZXBzLnB1c2goWydpbnNlcnQnLCB5LCB4XSk7XG4gICAgICAgICAgICAgICAgeC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGVwcy5wdXNoKFsnZGVsZXRlJywgeSwgeF0pO1xuICAgICAgICAgICAgICAgIHktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RlcHM7XG4gICAgfTtcblxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS5nZXRNYXRyaXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRyaXguc2xpY2UoKTtcbiAgICB9O1xuXG4gICAgTGV2ZW5zaHRlaW4ucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgfTtcblxuICAgIHJldHVybiBMZXZlbnNodGVpbjtcblxufSkpO1xuXG5cbiAgLy9UaGlzIGlzIHRoZSBtYWluIHBsdWdpbiBkZWZpbml0aW9uXG4gICQuZm4uZ2hvc3RIdW50ZXIgID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cbiAgICAvL0hlcmUgd2UgdXNlIGpRdWVyeSdzIGV4dGVuZCB0byBzZXQgZGVmYXVsdCB2YWx1ZXMgaWYgdGhleSB3ZXJlbid0IHNldCBieSB0aGUgdXNlclxuICAgIHZhciBvcHRzICAgID0gJC5leHRlbmQoIHt9LCAkLmZuLmdob3N0SHVudGVyLmRlZmF1bHRzLCBvcHRpb25zICk7XG4gICAgaWYoIG9wdHMucmVzdWx0cyApXG4gICAge1xuICAgICAgcGx1Z2luTWV0aG9kcy5pbml0KCB0aGlzICwgb3B0cyApO1xuICAgICAgcmV0dXJuIHBsdWdpbk1ldGhvZHM7XG4gICAgfVxuICB9O1xuXG4gIC8vIElmIHRoZSBHaG9zdCBpbnN0YW5jZSBpcyBpbiBhIHN1YnBhdGggb2YgdGhlIHNpdGUsIHNldCBzdWJwYXRoXG4gIC8vIGFzIHRoZSBwYXRoIHRvIHRoZSBzaXRlIHdpdGggYSBsZWFkaW5nIHNsYXNoIGFuZCBubyB0cmFpbGluZyBzbGFzaFxuICAvLyAoaS5lLiBcIi9wYXRoL3RvL2luc3RhbmNlXCIpLlxuICAkLmZuLmdob3N0SHVudGVyLmRlZmF1bHRzID0ge1xuICAgIHJlc3VsdHNEYXRhICAgICA6IGZhbHNlLFxuICAgIG9uUGFnZUxvYWQgICAgICA6IHRydWUsXG4gICAgb25LZXlVcCAgICAgICA6IGZhbHNlLFxuICAgIHJlc3VsdF90ZW1wbGF0ZSAgIDogXCI8YSBpZD0nZ2gte3tyZWZ9fScgY2xhc3M9J2doLXNlYXJjaC1pdGVtJyBocmVmPSd7e2xpbmt9fSc+PHA+PGgyPnt7dGl0bGV9fTwvaDI+PGg0Pnt7cHJldHR5UHViRGF0ZX19PC9oND48L3A+PC9hPlwiLFxuICAgIGluZm9fdGVtcGxhdGUgICA6IFwiPHA+TnVtYmVyIG9mIHBvc3RzIGZvdW5kOiB7e2Ftb3VudH19PC9wPlwiLFxuICAgIGRpc3BsYXlTZWFyY2hJbmZvIDogdHJ1ZSxcbiAgICB6ZXJvUmVzdWx0c0luZm8gICA6IHRydWUsXG4gICAgYmVmb3JlICAgICAgICA6IGZhbHNlLFxuICAgIG9uQ29tcGxldGUgICAgICA6IGZhbHNlLFxuICAgIGluY2x1ZGVwYWdlcyAgICA6IGZhbHNlLFxuICAgIGZpbHRlcmZpZWxkcyAgICA6IGZhbHNlLFxuICAgIHN1YnBhdGggICAgICAgOiBcIlwiLFxuICAgIGl0ZW1fcHJlcHJvY2Vzc29yIDogZmFsc2UsXG4gICAgaW5kZXhpbmdfc3RhcnQgICAgOiBmYWxzZSxcbiAgICBpbmRleGluZ19lbmQgICAgOiBmYWxzZVxuICB9O1xuICB2YXIgcHJldHR5RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIHZhciBtb250aE5hbWVzID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG4gICAgICByZXR1cm4gZC5nZXREYXRlKCkgKyAnICcgKyBtb250aE5hbWVzW2QuZ2V0TW9udGgoKV0gKyAnICcgKyBkLmdldEZ1bGxZZWFyKCk7XG4gIH07XG5cbiAgdmFyIGdldFN1YnBhdGhLZXkgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXC8vLCBcIlwiKS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICB9O1xuXG4gIHZhciBsYXN0VGltZW91dElEID0gbnVsbDtcblxuICAvLyBXZSBhZGQgYSBwcmVmaXggdG8gbmV3IElEcyBhbmQgcmVtb3ZlIGl0IGFmdGVyIGEgc2V0IG9mXG4gIC8vIHVwZGF0ZXMgaXMgY29tcGxldGUsIGp1c3QgaW4gY2FzZSBhIGJyb3dzZXIgZnJlYWtzIG92ZXJcbiAgLy8gZHVwbGljYXRlIElEcyBpbiB0aGUgRE9NLlxuICB2YXIgc2V0dGxlSURzID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmdoLXNlYXJjaC1pdGVtJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIG9sZEF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgIHZhciBuZXdBdHRyID0gb2xkQXR0ci5yZXBsYWNlKC9ebmV3LS8sIFwiXCIpO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgbmV3QXR0cik7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHVwZGF0ZVNlYXJjaExpc3QgPSBmdW5jdGlvbihsaXN0SXRlbXMsIGFwaURhdGEsIHN0ZXBzKSB7XG4gICAgZm9yICh2YXIgaT0wLGlsZW49c3RlcHMubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgIHZhciBzdGVwID0gc3RlcHNbaV07XG4gICAgICBpZiAoc3RlcFswXSA9PSBcImRlbGV0ZVwiKSB7XG4gICAgICAgIGxpc3RJdGVtcy5lcShzdGVwWzFdLTEpLnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGx1bnJyZWYgPSBhcGlEYXRhW3N0ZXBbMl0tMV0ucmVmO1xuICAgICAgICB2YXIgcG9zdERhdGEgPSB0aGlzLmJsb2dEYXRhW2x1bnJyZWZdO1xuICAgICAgICB2YXIgaHRtbCA9IHRoaXMuZm9ybWF0KHRoaXMucmVzdWx0X3RlbXBsYXRlLHBvc3REYXRhKTtcbiAgICAgICAgaWYgKHN0ZXBbMF0gPT09IFwic3Vic3RpdHV0ZVwiKSB7XG4gICAgICAgICAgbGlzdEl0ZW1zLmVxKHN0ZXBbMV0tMSkucmVwbGFjZVdpdGgoaHRtbCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RlcFswXSA9PT0gXCJpbnNlcnRcIikge1xuICAgICAgICAgIHZhciBwb3M7XG4gICAgICAgICAgaWYgKHN0ZXBbMV0gPT09IDApIHtcbiAgICAgICAgICAgIHBvcyA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvcyA9IChzdGVwWzFdLTEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaXN0SXRlbXMuZXEocG9zKS5hZnRlcihodG1sKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXR0bGVJRHMoKTtcbiAgfTtcblxuICB2YXIgZ3JhYkFuZEluZGV4ID0gZnVuY3Rpb24oKXtcbiAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IGdyYWJBbmRJbmRleCcpO1xuICAgIHRoaXMuYmxvZ0RhdGEgPSB7fTtcbiAgICB0aGlzLmxhdGVzdFBvc3QgPSAwO1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICBsaW1pdDogXCJhbGxcIixcbiAgICAgIGluY2x1ZGU6IFwidGFnc1wiLFxuICAgICAgZm9ybWF0czogW1wicGxhaW50ZXh0XCJdXG4gICAgfTtcbiAgICBpZiAgKCB0aGlzLmluY2x1ZGVwYWdlcyApe1xuICAgICAgcGFyYW1zLmZpbHRlcj1cIihwYWdlOnRydWUscGFnZTpmYWxzZSlcIjtcbiAgICB9XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICAkLmdldChnaG9zdC51cmwuYXBpKCdwb3N0cycscGFyYW1zKSkuZG9uZShmdW5jdGlvbihkYXRhKXtcbiAgICAgIHZhciBpZHhTcmMgPSBkYXRhLnBvc3RzO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJnaG9zdEh1bnRlcjogaW5kZXhpbmcgYWxsIHBvc3RzXCIpXG4gICAgICBtZS5pbmRleCA9IGx1bnIoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlZignaWQnKTtcbiAgICAgICAgdGhpcy5maWVsZCgndGl0bGUnKTtcbiAgICAgICAgdGhpcy5maWVsZCgnZGVzY3JpcHRpb24nKTtcbiAgICAgICAgdGhpcy5maWVsZCgncGxhaW50ZXh0Jyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ3B1YkRhdGUnKTtcbiAgICAgICAgdGhpcy5maWVsZCgndGFnJyk7XG4gICAgICAgIGlkeFNyYy5mb3JFYWNoKGZ1bmN0aW9uIChhcnJheUl0ZW0pIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN0YXJ0IGluZGV4aW5nIGFuIGl0ZW06IFwiICsgYXJyYXlJdGVtLmlkKTtcbiAgICAgICAgICAvLyBUcmFjayB0aGUgbGF0ZXN0IHZhbHVlIG9mIHVwZGF0ZWRfYXQsICB0byBzdGFzaCBpbiBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICB2YXIgaXRlbURhdGUgPSBuZXcgRGF0ZShhcnJheUl0ZW0udXBkYXRlZF9hdCkuZ2V0VGltZSgpO1xuICAgICAgICAgIHZhciByZWNvcmRlZERhdGUgPSBuZXcgRGF0ZShtZS5sYXRlc3RQb3N0KS5nZXRUaW1lKCk7XG4gICAgICAgICAgaWYgKGl0ZW1EYXRlID4gcmVjb3JkZWREYXRlKSB7XG4gICAgICAgICAgICBtZS5sYXRlc3RQb3N0ID0gYXJyYXlJdGVtLnVwZGF0ZWRfYXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciB0YWdfYXJyID0gYXJyYXlJdGVtLnRhZ3MubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2Lm5hbWU7IC8vIGB0YWdgIG9iamVjdCBoYXMgYW4gYG5hbWVgIHByb3BlcnR5IHdoaWNoIGlzIHRoZSB2YWx1ZSBvZiB0YWcuIElmIHlvdSBhbHNvIHdhbnQgb3RoZXIgaW5mbywgY2hlY2sgQVBJIGFuZCBnZXQgdGhhdCBwcm9wZXJ0eVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmKGFycmF5SXRlbS5tZXRhX2Rlc2NyaXB0aW9uID09PSBudWxsKSB7IGFycmF5SXRlbS5tZXRhX2Rlc2NyaXB0aW9uID0gJyc7IH1cbiAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSB0YWdfYXJyLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoIDwgMSl7XG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBwYXJzZWREYXRhICA9IHtcbiAgICAgICAgICAgIGlkICAgICAgOiBTdHJpbmcoYXJyYXlJdGVtLmlkKSxcbiAgICAgICAgICAgIHRpdGxlICAgICA6IFN0cmluZyhhcnJheUl0ZW0udGl0bGUpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gOiBTdHJpbmcoYXJyYXlJdGVtLmN1c3RvbV9leGNlcnB0KSxcbiAgICAgICAgICAgIHBsYWludGV4dCAgIDogU3RyaW5nKGFycmF5SXRlbS5wbGFpbnRleHQpLFxuICAgICAgICAgICAgcHViRGF0ZSAgIDogU3RyaW5nKGFycmF5SXRlbS5wdWJsaXNoZWRfYXQpLFxuICAgICAgICAgICAgdGFnICAgICA6IGNhdGVnb3J5XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmFkZChwYXJzZWREYXRhKTtcbiAgICAgICAgICB2YXIgbG9jYWxVcmwgPSBtZS5zdWJwYXRoICsgYXJyYXlJdGVtLnVybDtcbiAgICAgICAgICBtZS5ibG9nRGF0YVthcnJheUl0ZW0uaWRdID0ge1xuICAgICAgICAgICAgdGl0bGU6IGFycmF5SXRlbS50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhcnJheUl0ZW0ubWV0YV9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHB1YkRhdGU6IHByZXR0eURhdGUocGFyc2VkRGF0YS5wdWJEYXRlKSxcbiAgICAgICAgICAgIGxpbms6IGxvY2FsVXJsLFxuICAgICAgICAgICAgdGFnczogdGFnX2FyclxuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtZXRhZGF0YSBcInByZVwiLXByb2Nlc3NvciBmb3IgdGhlIGl0ZW0sIHJ1biBpdCBoZXJlLlxuICAgICAgICAgIGlmIChtZS5pdGVtX3ByZXByb2Nlc3Nvcikge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtZS5ibG9nRGF0YVthcnJheUl0ZW0uaWRdLCBtZS5pdGVtX3ByZXByb2Nlc3NvcihhcnJheUl0ZW0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkb25lIGluZGV4aW5nIHRoZSBpdGVtXCIpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHN1YnBhdGhLZXkgPSBnZXRTdWJwYXRoS2V5KG1lLnN1YnBhdGgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sdW5ySW5kZXhcIiksIEpTT04uc3RyaW5naWZ5KG1lLmluZGV4KSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2Jsb2dEYXRhXCIpLCBKU09OLnN0cmluZ2lmeShtZS5ibG9nRGF0YSkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sYXRlc3RQb3N0XCIpLCBtZS5sYXRlc3RQb3N0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiZ2hvc3RIdW50ZXI6IHNhdmUgdG8gbG9jYWxTdG9yYWdlIGZhaWxlZDogXCIgKyBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChtZS5pbmRleGluZ19lbmQpIHtcbiAgICAgICAgbWUuaW5kZXhpbmdfZW5kKCk7XG4gICAgICB9XG4gICAgICBtZS5pc0luaXQgPSB0cnVlO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBwbHVnaW5NZXRob2RzID0ge1xuXG4gICAgaXNJbml0ICAgICAgOiBmYWxzZSxcblxuICAgIGluaXQgICAgICA6IGZ1bmN0aW9uKCB0YXJnZXQgLCBvcHRzICl7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdHMpO1xuICAgICAgY29uc29sZS5sb2coXCJnaG9zdEh1bnRlcjogaW5pdFwiKTtcbiAgICAgIHZhciBtaWFtID0gZnVuY3Rpb24oKXt9O1xuICAgICAgaWYgKCBvcHRzLm9uUGFnZUxvYWQgKSB7XG4gICAgICAgIG1pYW0gPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICB0aGF0LmxvYWRBUEkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQobWlhbSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuZm9jdXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICB0aGF0LmxvYWRBUEkoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRhcmdldC5jbG9zZXN0KFwiZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oZSl7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhhdC5maW5kKHRhcmdldC52YWwoKSk7XG4gICAgICB9KTtcblxuICAgICAgaWYoIG9wdHMub25LZXlVcCApIHtcbiAgICAgICAgLy8gSW4gc2VhcmNoLWFzLXlvdS10eXBlIG1vZGUsIHRoZSBFbnRlciBrZXkgaXMgbWVhbmluZ2xlc3MsXG4gICAgICAgIC8vIHNvIHdlIGRpc2FibGUgaXQgaW4gdGhlIHNlYXJjaCBmaWVsZC4gSWYgZW5hYmxlZCwgc29tZSBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHNhdmUgZGF0YSB0byBoaXN0b3J5IChldmVuIHdoZW4gYXV0b2NvbXBsZXRlPVwiZmFsc2VcIiksIHdoaWNoXG4gICAgICAgIC8vIGlzIGFuIGludHJ1c2l2ZSBoZWFkYWNoZSwgcGFydGljdWxhcmx5IG9uIG1vYmlsZS5cbiAgICAgICAgdGFyZ2V0LmtleWRvd24oZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0YXJnZXQua2V5dXAoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB0aGF0LmZpbmQodGFyZ2V0LnZhbCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICBsb2FkQVBJICAgICA6IGZ1bmN0aW9uKCl7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IGxvYWRBUEknKTtcbiAgICAgIGlmKCF0aGlzLmlzSW5pdCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IHRoaXMuaXNJbml0IGlzIHRydWUnKTtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXhpbmdfc3RhcnQpIHtcbiAgICAgICAgICB0aGlzLmluZGV4aW5nX3N0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgaXNJbml0IGlzIGZhbHN5LCBjaGVjayBmb3IgZGF0YSBpbiBsb2NhbFN0b3JlLFxuICAgICAgICAvLyBwYXJzZSBpbnRvIG1lbW9yeSwgYW5kIGRlY2xhcmUgaXNJbml0IHRvIGJlIHRydWUuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHN1YnBhdGhLZXkgPSBnZXRTdWJwYXRoS2V5KHRoaXMuc3VicGF0aCk7XG4gICAgICAgICAgdGhpcy5pbmRleCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2x1bnJJbmRleFwiKSk7XG4gICAgICAgICAgdGhpcy5ibG9nRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2Jsb2dEYXRhXCIpKTtcbiAgICAgICAgICB0aGlzLmxhdGVzdFBvc3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sYXRlc3RQb3N0XCIpKTtcbiAgICAgICAgICBpZiAodGhpcy5sYXRlc3RQb3N0ICYmIHRoaXMuaW5kZXggJiYgdGhpcy5ibG9nRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sYXRlc3RQb3N0ID0gdGhpcy5sYXRlc3RQb3N0O1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IGx1bnIuSW5kZXgubG9hZChKU09OLnBhcnNlKHRoaXMuaW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMuYmxvZ0RhdGEgPSBKU09OLnBhcnNlKHRoaXMuYmxvZ0RhdGEpO1xuICAgICAgICAgICAgdGhpcy5pc0luaXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiZ2hvc3RIdW50ZXI6IHJldHJpZXZlIGZyb20gbG9jYWxTdG9yYWdlIGZhaWxlZDogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJbml0KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogdGhpcy5pc0luaXQgcmVjaGVjayBpcyB0cnVlJyk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBuZXcgb3IgZWRpdGVkIHBvc3RzXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgbGltaXQ6IFwiYWxsXCIsXG4gICAgICAgICAgZmlsdGVyOiBcInVwZGF0ZWRfYXQ6PlxcJ1wiICsgdGhpcy5sYXRlc3RQb3N0LnJlcGxhY2UoL1xcLi4qLywgXCJcIikucmVwbGFjZSgvVC8sIFwiIFwiKSArIFwiXFwnXCIsXG4gICAgICAgICAgZmllbGRzOiBcImlkXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgJC5nZXQoZ2hvc3QudXJsLmFwaSgncG9zdHMnLCBwYXJhbXMpKS5kb25lKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgIGlmIChkYXRhLnBvc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGdyYWJBbmRJbmRleC5jYWxsKG1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1lLmluZGV4aW5nX2VuZCkge1xuICAgICAgICAgICAgICBtZS5pbmRleGluZ19lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lLmlzSW5pdCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogdGhpcy5pc0luaXQgcmVjaGVjayBpcyBmYWxzZScpO1xuICAgICAgICBncmFiQW5kSW5kZXguY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICBmaW5kICAgICAgOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBjbGVhclRpbWVvdXQobGFzdFRpbWVvdXRJRCk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxhc3RUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBRdWVyeSBzdHJhdGVneSBpcyBsaWZ0ZWQgZnJvbSBjb21tZW50cyBvbiBhIGx1bnIuanMgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9vbGl2ZXJubi9sdW5yLmpzL2lzc3Vlcy8yNTZcbiAgICAgICAgdmFyIHRoaW5nc0ZvdW5kID0gW107XG4gICAgICAgIC8vIFRoZSBxdWVyeSBpbnRlcmZhY2UgZXhwZWN0cyBzaW5nbGUgdGVybXMsIHNvIHdlIHNwbGl0LlxuICAgICAgICB2YXIgdmFsdWVTcGxpdCA9IHZhbHVlLnNwbGl0KC9cXHMrLyk7XG5cbiAgICAgICAgZm9yICh2YXIgaT0wLGlsZW49dmFsdWVTcGxpdC5sZW5ndGg7aTxpbGVuO2krKykge1xuICAgICAgICAgIC8vIEZldGNoIGEgbGlzdCBvZiBtYXRjaGVzIGZvciBlYWNoIHRlcm0uXG4gICAgICAgICAgdmFyIHYgPSB2YWx1ZVNwbGl0W2ldO1xuICAgICAgICAgIGlmICghdikgY29udGludWU7XG4gICAgICAgICAgdGhpbmdzRm91bmQucHVzaCh0aGlzLmluZGV4LnF1ZXJ5KGZ1bmN0aW9uIChxKSB7XG4gICAgICAgICAgICAvLyBGb3IgYW4gZXhwbGFuYXRpb24gb2YgbHVuciBpbmRleGluZyBvcHRpb25zLCBzZWUgdGhlIGx1bnIuanNcbiAgICAgICAgICAgIC8vIGRvY3VtZW50YXRpb24gYXQgaHR0cHM6Ly9sdW5yanMuY29tL2RvY3MvbHVuci5RdWVyeS5odG1sI35DbGF1c2VcblxuICAgICAgICAgICAgLy8gbG9vayBmb3IgYW4gZXhhY3QgbWF0Y2ggYW5kIGFwcGx5IGEgbGFyZ2UgcG9zaXRpdmUgYm9vc3RcbiAgICAgICAgICAgIHEudGVybSh2LCB7XG4gICAgICAgICAgICAgIHVzZVBpcGVsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICBib29zdDogMTAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBsb29rIGZvciB0ZXJtcyB0aGF0IG1hdGNoIHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBxdWVyeVRlcm0gYW5kIGFwcGx5IGEgbWVkaXVtIGJvb3N0XG4gICAgICAgICAgICBxLnRlcm0odiwge1xuICAgICAgICAgICAgICB1c2VQaXBlbGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIGJvb3N0OiAxMCxcbiAgICAgICAgICAgICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gbG9vayBmb3IgdGVybXMgdGhhdCBtYXRjaCB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMSBhbmQgYXBwbHkgYSBzbWFsbCBib29zdFxuICAgICAgICAgICAgcS50ZXJtKHYsIHtcbiAgICAgICAgICAgICAgdXNlUGlwZWxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICBlZGl0RGlzdGFuY2U6IDEsXG4gICAgICAgICAgICAgIGJvb3N0OiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlYXJjaFJlc3VsdDtcbiAgICAgICAgaWYgKHRoaW5nc0ZvdW5kLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYWQgbXVsdGlwbGUgdGVybXMsIHdlJ2xsIGhhdmUgbXVsdGlwbGUgbGlzdHMuIFdlIGZpbHRlclxuICAgICAgICAgIC8vIHRoZW0gaGVyZSB0byB1c2Ugb25seSBpdGVtcyB0aGF0IHByb2R1Y2UgcmV0dXJucyBmb3IgYWxsXG4gICAgICAgICAgLy8gdGVybXMuIFRoaXMgc3Bvb2ZzIGFuIEFORCBqb2luIGJldHdlZW4gdGVybXMsIHdoaWNoIGx1bnIuanMgY2FuJ3RcbiAgICAgICAgICAvLyB5ZXQgZG8gaW50ZXJuYWxseS5cbiAgICAgICAgICAvLyBCeSB1c2luZyB0aGUgZmlyc3QgbGlzdCBvZiBpdGVtcyBhcyBtYXN0ZXIsIHdlIGdldCB3ZWlnaHRpbmdzXG4gICAgICAgICAgLy8gYmFzZWQgb24gdGhlIGZpcnN0IHRlcm0gZW50ZXJlZCwgd2hpY2ggaXMgbW9yZSBvciBsZXNzXG4gICAgICAgICAgLy8gd2hhdCB3ZSB3b3VsZCBleHBlY3QuXG4gICAgICAgICAgc2VhcmNoUmVzdWx0ID0gdGhpbmdzRm91bmRbMF07XG4gICAgICAgICAgdGhpbmdzRm91bmQgPSB0aGluZ3NGb3VuZC5zbGljZSgxKTtcbiAgICAgICAgICBmb3IgKCBpPXNlYXJjaFJlc3VsdC5sZW5ndGgtMTtpPi0xO2ktLSkge1xuICAgICAgICAgICAgdmFyIHJlZiA9IHNlYXJjaFJlc3VsdFtpXS5yZWY7XG4gICAgICAgICAgICBmb3IgKGo9MCxqbGVuPXRoaW5nc0ZvdW5kLmxlbmd0aDtqPGpsZW47aisrKSB7XG4gICAgICAgICAgICAgIHZhciBvdGhlclJlZnMgPSB7fTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaz0wLGtsZW49dGhpbmdzRm91bmRbal0ubGVuZ3RoO2s8a2xlbjtrKyspIHtcbiAgICAgICAgICAgICAgICBvdGhlclJlZnNbdGhpbmdzRm91bmRbal1ba10ucmVmXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKCFvdGhlclJlZnNbcmVmXSkge1xuICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IHNlYXJjaFJlc3VsdC5zbGljZSgwLCBpKS5jb25jYXQoc2VhcmNoUmVzdWx0LnNsaWNlKGkrMSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaW5nc0ZvdW5kLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIElmIHdlIGhhZCBqdXN0IG9uZSB0ZXJtIGFuZCBvbmUgbGlzdCwgcmV0dXJuIHRoYXQuXG4gICAgICAgICAgc2VhcmNoUmVzdWx0ID0gdGhpbmdzRm91bmRbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgd2FzIG5vIHNlYXJjaCByZXN1bHQsIHJldHVybiBhbiBlbXB0eSBsaXN0LlxuICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdHMgICAgID0gJCh0aGlzLnJlc3VsdHMpO1xuICAgICAgICB2YXIgcmVzdWx0c0RhdGEgICA9IFtdO1xuICAgICAgICBpZiAoc2VhcmNoUmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlc3VsdHMuZW1wdHkoKTtcbiAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5U2VhcmNoSW5mbyAmJiB0aGlzLnplcm9SZXN1bHRzSW5mbykge1xuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQodGhpcy5mb3JtYXQodGhpcy5pbmZvX3RlbXBsYXRlLHtcImFtb3VudFwiOjB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheVNlYXJjaEluZm8pIHtcbiAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLmNoaWxkcmVuKCkuZXEoMCkucmVwbGFjZVdpdGgodGhpcy5mb3JtYXQodGhpcy5pbmZvX3RlbXBsYXRlLHtcImFtb3VudFwiOnNlYXJjaFJlc3VsdC5sZW5ndGh9KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRoaXMuZm9ybWF0KHRoaXMuaW5mb190ZW1wbGF0ZSx7XCJhbW91bnRcIjpzZWFyY2hSZXN1bHQubGVuZ3RofSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuYmVmb3JlKSB7XG4gICAgICAgICAgdGhpcy5iZWZvcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgYmxvZ0RhdGEgZm9yIHRoZSBmdWxsIHNldCwgZm9yIG9uQ29tcGxldGVcbiAgICAgICAgZm9yICggaSA9IDA7IGkgPCBzZWFyY2hSZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgbHVucnJlZiAgID0gc2VhcmNoUmVzdWx0W2ldLnJlZjtcbiAgICAgICAgICB2YXIgcG9zdERhdGEgICAgPSB0aGlzLmJsb2dEYXRhW2x1bnJyZWZdO1xuICAgICAgICAgIGlmIChwb3N0RGF0YSkge1xuICAgICAgICAgICAgcG9zdERhdGEucmVmID0gbHVucnJlZjtcbiAgICAgICAgICAgIHJlc3VsdHNEYXRhLnB1c2gocG9zdERhdGEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJnaG9zdEh1bnRlcjogaW5kZXgvZGF0YSBtaXNtYXRjaC4gT3VjaC5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBhbiBhcnJheSBvZiBJRHMgcHJlc2VudCBpbiBjdXJyZW50IHJlc3VsdHNcbiAgICAgICAgdmFyIGxpc3RJdGVtcyA9ICQoJy5naC1zZWFyY2gtaXRlbScpO1xuICAgICAgICB2YXIgY3VycmVudFJlZnMgPSBsaXN0SXRlbXNcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZC5zbGljZSgzKTtcbiAgICAgICAgICB9KS5nZXQoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRSZWZzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGZvciAoIGk9MCxpbGVuPXJlc3VsdHNEYXRhLmxlbmd0aDtpPGlsZW47aSsrKSB7XG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZCh0aGlzLmZvcm1hdCh0aGlzLnJlc3VsdF90ZW1wbGF0ZSxyZXN1bHRzRGF0YVtpXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXR0bGVJRHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHZXQgYW4gYXJyYXkgb2YgSURzIHByZXNlbnQgaW4gc2VhcmNoUmVzdWx0XG4gICAgICAgICAgdmFyIG5ld1JlZnMgPSBbXTtcbiAgICAgICAgICBmb3IgKCBpPTAsaWxlbj1zZWFyY2hSZXN1bHQubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgICAgICAgIG5ld1JlZnMucHVzaChzZWFyY2hSZXN1bHRbaV0ucmVmKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gR2V0IHRoZSBMZXZlbnNodGVpbiBzdGVwcyBuZWVkZWQgdG8gdHJhbnNmb3JtIGN1cnJlbnQgaW50byBzZWFyY2hSZXN1bHRcbiAgICAgICAgICB2YXIgbGV2ZW5zaHRlaW4gPSBuZXcgTGV2ZW5zaHRlaW4oY3VycmVudFJlZnMsIG5ld1JlZnMpO1xuICAgICAgICAgIHZhciBzdGVwcyA9IGxldmVuc2h0ZWluLmdldFN0ZXBzKCk7XG4gICAgICAgICAgLy8gQXBwbHkgdGhlIG9wZXJhdGlvbnNcbiAgICAgICAgICB1cGRhdGVTZWFyY2hMaXN0LmNhbGwodGhpcywgbGlzdEl0ZW1zLCBzZWFyY2hSZXN1bHQsIHN0ZXBzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaWR5IHVwXG4gICAgICAgIGlmKHRoaXMub25Db21wbGV0ZSkge1xuICAgICAgICAgIHRoaXMub25Db21wbGV0ZShyZXN1bHRzRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSwgMTAwKTtcbiAgICB9LFxuXG4gICAgY2xlYXIgICAgICAgOiBmdW5jdGlvbigpe1xuICAgICAgJCh0aGlzLnJlc3VsdHMpLmVtcHR5KCk7XG4gICAgICAvLyB0aGlzLnRhcmdldC52YWwoXCJcIik7XG4gICAgfSxcblxuICAgIGZvcm1hdCAgICAgIDogZnVuY3Rpb24gKHQsIGQpIHtcbiAgICAgIHJldHVybiB0LnJlcGxhY2UoL3t7KFtee31dKil9fS9nLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgciA9IGRbYl07XG4gICAgICAgIHJldHVybiB0eXBlb2YgciA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHIgPT09ICdudW1iZXInID8gciA6IGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pKCBqUXVlcnkgKTtcbiIsIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGhlYWRlciBsZXZlbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXI6IGhlYWRlcidzIHRhZyBuYW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICovXG4gICAgdmFyIGdldExldmVsID0gZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICBpZiAodHlwZW9mIGhlYWRlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlY3MgPSBoZWFkZXIubWF0Y2goL1xcZC9nKTtcbiAgICAgICAgcmV0dXJuIGRlY3MgPyBNYXRoLm1pbi5hcHBseShudWxsLCBkZWNzKSA6IDE7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBvcmRlcmVkIGxpc3RcbiAgICAgKiBAcGFyYW0ge2pRdWVydH0gJHdyYXBwZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0gbGlzdFxuICAgICAqL1xuICAgIHZhciBjcmVhdGVMaXN0ID0gZnVuY3Rpb24gKCR3cmFwcGVyLCBjb3VudCkge1xuICAgICAgICB3aGlsZSAoY291bnQtLSkge1xuICAgICAgICAgICAgJHdyYXBwZXIgPSAkKCc8b2wvPicpLmFwcGVuZFRvKCR3cmFwcGVyKTtcblxuICAgICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgJHdyYXBwZXIgPSAkKCc8bGkvPicpLmFwcGVuZFRvKCR3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkd3JhcHBlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IHBvc2l0aW9uIGp1bXAgYmFja1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkY3VycmVudFdyYXBwZXI6IGN1cnJlbnQgaW5zZXJ0IHBvaW50XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldDogZGlzdGFuY2UgYmV0d2VlbiBjdXJyZW50J3MgYW5kIHRhcmdldCdzIGRlcHRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IGluc2VydCBwb2ludFxuICAgICAqL1xuICAgIHZhciBqdW1wQmFjayA9IGZ1bmN0aW9uICgkY3VycmVudFdyYXBwZXIsIG9mZnNldCkge1xuICAgICAgICB3aGlsZSAob2Zmc2V0LS0pIHtcbiAgICAgICAgICAgICRjdXJyZW50V3JhcHBlciA9ICRjdXJyZW50V3JhcHBlci5wYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkY3VycmVudFdyYXBwZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNldCBlbGVtZW50IGhyZWYvaWQgYW5kIGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG92ZXJ3cml0ZTogd2hldGhlciBvdmVyd3JpdGUgc291cmNlIGVsZW1lbnQgZXhpc3RlZCBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXg6IHByZWZpeCB0byBwcmVwZW5kIHRvIGhyZWYvaWRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHZhciBzZXRBdHRycyA9IGZ1bmN0aW9uIChvdmVyd3JpdGUsIHByZWZpeCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCRzcmMsICR0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICRzcmMudGV4dCgpO1xuICAgICAgICAgICAgdmFyIHByZSA9IHByZWZpeCArICctJyArIGluZGV4O1xuICAgICAgICAgICAgJHRhcmdldC50ZXh0KGNvbnRlbnQpO1xuXG4gICAgICAgICAgICB2YXIgc3JjID0gJHNyY1swXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkdGFyZ2V0WzBdO1xuICAgICAgICAgICAgdmFyIGlkID0gb3ZlcndyaXRlID8gcHJlIDogKHNyYy5pZCB8fCBwcmUpO1xuXG4gICAgICAgICAgICBpZCA9IGVuY29kZVVSSUNvbXBvbmVudChpZCk7XG5cbiAgICAgICAgICAgIHNyYy5pZCA9IGlkO1xuICAgICAgICAgICAgdGFyZ2V0LmhyZWYgPSAnIycgKyBpZDtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYnVpbGQgdGFibGUgb2YgY29udGVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSBsaXN0XG4gICAgICovXG4gICAgdmFyIGJ1aWxkVE9DID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gb3B0aW9ucy5zZWxlY3RvcjtcbiAgICAgICAgdmFyIHNjb3BlID0gb3B0aW9ucy5zY29wZTtcblxuICAgICAgICB2YXIgJHJldCA9ICQoJzxvbC8+Jyk7XG4gICAgICAgIHZhciAkd3JhcHBlciA9ICRyZXQ7XG4gICAgICAgIHZhciAkbGFzdExpID0gbnVsbDtcblxuICAgICAgICB2YXIgcHJldkRlcHRoID0gZ2V0TGV2ZWwoc2VsZWN0b3IpO1xuICAgICAgICB2YXIgX3NldEF0dHJzID0gc2V0QXR0cnMob3B0aW9ucy5vdmVyd3JpdGUsIG9wdGlvbnMucHJlZml4KTtcblxuICAgICAgICAkKHNjb3BlKVxuICAgICAgICAgICAgLmZpbmQoc2VsZWN0b3IpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudERlcHRoID0gZ2V0TGV2ZWwoZWxlbS50YWdOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gY3VycmVudERlcHRoIC0gcHJldkRlcHRoO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSBjcmVhdGVMaXN0KCRsYXN0TGksIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIG9uY2UgbW9yZSBsZXZlbCB0byBqdW1wIGJhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gZWc6IGgyICsgaDMgKyBoMiwgb2Zmc2V0ID0gaDIgLSBoMyA9IC0xXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIG9sIDwtLS0tLS0rIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyAgIGxpICAgICAgfFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgb2wgLS0tKyBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGxpXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1bXBiYWNrID0gdGFyZ2V0IC0gY3VycmVudCA9IDJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSBqdW1wQmFjaygkd3JhcHBlciwgLW9mZnNldCAqIDIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghJHdyYXBwZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGVyID0gJHJldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgJGxpID0gJCgnPGxpLz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJGEgPSAkKCc8YS8+Jyk7XG5cbiAgICAgICAgICAgICAgICBfc2V0QXR0cnMoJChlbGVtKSwgJGEsIGluZGV4KTtcblxuICAgICAgICAgICAgICAgICRsaS5hcHBlbmQoJGEpLmFwcGVuZFRvKCR3cmFwcGVyKTtcblxuICAgICAgICAgICAgICAgICRsYXN0TGkgPSAkbGk7XG4gICAgICAgICAgICAgICAgcHJldkRlcHRoID0gY3VycmVudERlcHRoO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICRyZXQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluaXQgdGFibGUgb2YgY29udGVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbl06IFRPQyBvcHRpb25zLCBhdmFpbGFibGUgcHJvcHM6XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7U3RyaW5nfSBbc2VsZWN0b3JdOiBoZWFkZXJzIHNlbGVjdG9yLCBkZWZhdWx0IGlzICdoMSwgaDIsIGgzLCBoNCwgaDUsIGg2J1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1N0cmluZ30gW3Njb3BlXTogc2VsZWN0b3IgdG8gc3BlY2lmeSBlbGVtZW50cyBzZWFyY2ggc2NvcGUsIGRlZmF1bHQgaXMgJ2JvZHknXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Qm9vbGVhbn0gW292ZXJ3cml0ZV06IHdoZXRoZXIgdG8gb3ZlcndyaXRlIGV4aXN0ZWQgaGVhZGVycycgaWQsIGRlZmF1bHQgaXMgZmFsc2VcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtTdHJpbmd9IFtwcmVmaXhdOiBzdHJpbmcgdG8gcHJlcGVuZCB0byBpZC9ocmVmIHByb3AsIGRlZmF1bHQgaXMgJ3RvYydcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0gJHRoaXNcbiAgICAgKi9cbiAgICAkLmZuLmluaXRUT0MgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdE9wdHMgPSB7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ2gxLCBoMiwgaDMsIGg0LCBoNSwgaDYnLFxuICAgICAgICAgICAgc2NvcGU6ICdib2R5JyxcbiAgICAgICAgICAgIG92ZXJ3cml0ZTogZmFsc2UsXG4gICAgICAgICAgICBwcmVmaXg6ICd0b2MnXG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRPcHRzLCBvcHRpb25zKTtcblxuICAgICAgICB2YXIgc2VsZWN0b3IgPSBvcHRpb25zLnNlbGVjdG9yO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWxlY3RvciBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGVjdG9yLm1hdGNoKC9eKD86aFsxLTZdLD9cXHMqKSskL2cpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWxlY3RvciBtdXN0IGNvbnRhaW5zIG9ubHkgaDEtNicpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzKS5hcHBlbmQoYnVpbGRUT0Mob3B0aW9ucykpO1xuXG4gICAgICAgIHZhciBjdXJyZW50SGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRIYXNoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5jaG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3VycmVudEhhc2guc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgIGlmIChhbmNob3IpIGFuY2hvci5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJCh0aGlzKTtcbiAgICB9O1xufSkpO1xuIl19
